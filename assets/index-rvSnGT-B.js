(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vl(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Lt={},Lr=[],on=()=>{},Mf=()=>!1,Ro=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Dl=e=>e.startsWith("onUpdate:"),we=Object.assign,xl=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},wg=Object.prototype.hasOwnProperty,St=(e,t)=>wg.call(e,t),ct=Array.isArray,$r=e=>ui(e)==="[object Map]",So=e=>ui(e)==="[object Set]",Ec=e=>ui(e)==="[object Date]",dt=e=>typeof e=="function",Jt=e=>typeof e=="string",fn=e=>typeof e=="symbol",$t=e=>e!==null&&typeof e=="object",kf=e=>($t(e)||dt(e))&&dt(e.then)&&dt(e.catch),Lf=Object.prototype.toString,ui=e=>Lf.call(e),Ig=e=>ui(e).slice(8,-1),$f=e=>ui(e)==="[object Object]",Ol=e=>Jt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ds=Vl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Co=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Ag=/-\w/g,zn=Co(e=>e.replace(Ag,t=>t.slice(1).toUpperCase())),bg=/\B([A-Z])/g,Tr=Co(e=>e.replace(bg,"-$1").toLowerCase()),Ff=Co(e=>e.charAt(0).toUpperCase()+e.slice(1)),ya=Co(e=>e?`on${Ff(e)}`:""),Fn=(e,t)=>!Object.is(e,t),Fi=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Uf=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Qi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Tc;const Po=()=>Tc||(Tc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nl(e){if(ct(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Jt(r)?Pg(r):Nl(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Jt(e)||$t(e))return e}const Rg=/;(?![^(]*\))/g,Sg=/:([^]+)/,Cg=/\/\*[^]*?\*\//g;function Pg(e){const t={};return e.replace(Cg,"").split(Rg).forEach(n=>{if(n){const r=n.split(Sg);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function zs(e){let t="";if(Jt(e))t=e;else if(ct(e))for(let n=0;n<e.length;n++){const r=zs(e[n]);r&&(t+=r+" ")}else if($t(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Vg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Dg=Vl(Vg);function jf(e){return!!e||e===""}function xg(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Vo(e[r],t[r]);return n}function Vo(e,t){if(e===t)return!0;let n=Ec(e),r=Ec(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=fn(e),r=fn(t),n||r)return e===t;if(n=ct(e),r=ct(t),n||r)return n&&r?xg(e,t):!1;if(n=$t(e),r=$t(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),u=t.hasOwnProperty(a);if(l&&!u||!l&&u||!Vo(e[a],t[a]))return!1}}return String(e)===String(t)}function Og(e,t){return e.findIndex(n=>Vo(n,t))}const Bf=e=>!!(e&&e.__v_isRef===!0),Bt=e=>Jt(e)?e:e==null?"":ct(e)||$t(e)&&(e.toString===Lf||!dt(e.toString))?Bf(e)?Bt(e.value):JSON.stringify(e,qf,2):String(e),qf=(e,t)=>Bf(t)?qf(e,t.value):$r(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[va(r,i)+" =>"]=s,n),{})}:So(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>va(n))}:fn(t)?va(t):$t(t)&&!ct(t)&&!$f(t)?String(t):t,va=(e,t="")=>{var n;return fn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Se;class Ng{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Se,!t&&Se&&(this.index=(Se.scopes||(Se.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Se;try{return Se=this,t()}finally{Se=n}}}on(){++this._on===1&&(this.prevScope=Se,Se=this)}off(){this._on>0&&--this._on===0&&(Se=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Mg(){return Se}let Ft;const Ea=new WeakSet;class Hf{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Se&&Se.active&&Se.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ea.has(this)&&(Ea.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Kf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wc(this),Gf(this);const t=Ft,n=Ke;Ft=this,Ke=!0;try{return this.fn()}finally{Wf(this),Ft=t,Ke=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ll(t);this.deps=this.depsTail=void 0,wc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ea.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ha(this)&&this.run()}get dirty(){return Ha(this)}}let zf=0,xs,Os;function Kf(e,t=!1){if(e.flags|=8,t){e.next=Os,Os=e;return}e.next=xs,xs=e}function Ml(){zf++}function kl(){if(--zf>0)return;if(Os){let t=Os;for(Os=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;xs;){let t=xs;for(xs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Gf(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Wf(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Ll(r),kg(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function Ha(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Qf(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Qf(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ks)||(e.globalVersion=Ks,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ha(e))))return;e.flags|=2;const t=e.dep,n=Ft,r=Ke;Ft=e,Ke=!0;try{Gf(e);const s=e.fn(e._value);(t.version===0||Fn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Ft=n,Ke=r,Wf(e),e.flags&=-3}}function Ll(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ll(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function kg(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ke=!0;const Xf=[];function En(){Xf.push(Ke),Ke=!1}function Tn(){const e=Xf.pop();Ke=e===void 0?!0:e}function wc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ft;Ft=void 0;try{t()}finally{Ft=n}}}let Ks=0;class Lg{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $l{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ft||!Ke||Ft===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ft)n=this.activeLink=new Lg(Ft,this),Ft.deps?(n.prevDep=Ft.depsTail,Ft.depsTail.nextDep=n,Ft.depsTail=n):Ft.deps=Ft.depsTail=n,Yf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ft.depsTail,n.nextDep=void 0,Ft.depsTail.nextDep=n,Ft.depsTail=n,Ft.deps===n&&(Ft.deps=r)}return n}trigger(t){this.version++,Ks++,this.notify(t)}notify(t){Ml();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{kl()}}}function Yf(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Yf(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const za=new WeakMap,mr=Symbol(""),Ka=Symbol(""),Gs=Symbol("");function Ee(e,t,n){if(Ke&&Ft){let r=za.get(e);r||za.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new $l),s.map=r,s.key=n),s.track()}}function yn(e,t,n,r,s,i){const a=za.get(e);if(!a){Ks++;return}const l=u=>{u&&u.trigger()};if(Ml(),t==="clear")a.forEach(l);else{const u=ct(e),h=u&&Ol(n);if(u&&n==="length"){const f=Number(r);a.forEach((p,m)=>{(m==="length"||m===Gs||!fn(m)&&m>=f)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),h&&l(a.get(Gs)),t){case"add":u?h&&l(a.get("length")):(l(a.get(mr)),$r(e)&&l(a.get(Ka)));break;case"delete":u||(l(a.get(mr)),$r(e)&&l(a.get(Ka)));break;case"set":$r(e)&&l(a.get(mr));break}}kl()}function Vr(e){const t=Rt(e);return t===e?t:(Ee(t,"iterate",Gs),Be(e)?t:t.map(fe))}function Do(e){return Ee(e=Rt(e),"iterate",Gs),e}const $g={__proto__:null,[Symbol.iterator](){return Ta(this,Symbol.iterator,fe)},concat(...e){return Vr(this).concat(...e.map(t=>ct(t)?Vr(t):t))},entries(){return Ta(this,"entries",e=>(e[1]=fe(e[1]),e))},every(e,t){return mn(this,"every",e,t,void 0,arguments)},filter(e,t){return mn(this,"filter",e,t,n=>n.map(fe),arguments)},find(e,t){return mn(this,"find",e,t,fe,arguments)},findIndex(e,t){return mn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return mn(this,"findLast",e,t,fe,arguments)},findLastIndex(e,t){return mn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return mn(this,"forEach",e,t,void 0,arguments)},includes(...e){return wa(this,"includes",e)},indexOf(...e){return wa(this,"indexOf",e)},join(e){return Vr(this).join(e)},lastIndexOf(...e){return wa(this,"lastIndexOf",e)},map(e,t){return mn(this,"map",e,t,void 0,arguments)},pop(){return Es(this,"pop")},push(...e){return Es(this,"push",e)},reduce(e,...t){return Ic(this,"reduce",e,t)},reduceRight(e,...t){return Ic(this,"reduceRight",e,t)},shift(){return Es(this,"shift")},some(e,t){return mn(this,"some",e,t,void 0,arguments)},splice(...e){return Es(this,"splice",e)},toReversed(){return Vr(this).toReversed()},toSorted(e){return Vr(this).toSorted(e)},toSpliced(...e){return Vr(this).toSpliced(...e)},unshift(...e){return Es(this,"unshift",e)},values(){return Ta(this,"values",fe)}};function Ta(e,t,n){const r=Do(e),s=r[t]();return r!==e&&!Be(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const Fg=Array.prototype;function mn(e,t,n,r,s,i){const a=Do(e),l=a!==e&&!Be(e),u=a[t];if(u!==Fg[t]){const p=u.apply(e,i);return l?fe(p):p}let h=n;a!==e&&(l?h=function(p,m){return n.call(this,fe(p),m,e)}:n.length>2&&(h=function(p,m){return n.call(this,p,m,e)}));const f=u.call(a,h,r);return l&&s?s(f):f}function Ic(e,t,n,r){const s=Do(e);let i=n;return s!==e&&(Be(e)?n.length>3&&(i=function(a,l,u){return n.call(this,a,l,u,e)}):i=function(a,l,u){return n.call(this,a,fe(l),u,e)}),s[t](i,...r)}function wa(e,t,n){const r=Rt(e);Ee(r,"iterate",Gs);const s=r[t](...n);return(s===-1||s===!1)&&jl(n[0])?(n[0]=Rt(n[0]),r[t](...n)):s}function Es(e,t,n=[]){En(),Ml();const r=Rt(e)[t].apply(e,n);return kl(),Tn(),r}const Ug=Vl("__proto__,__v_isRef,__isVue"),Jf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(fn));function jg(e){fn(e)||(e=String(e));const t=Rt(this);return Ee(t,"has",e),t.hasOwnProperty(e)}class Zf{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Yg:rd:i?nd:ed).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=ct(t);if(!s){let u;if(a&&(u=$g[n]))return u;if(n==="hasOwnProperty")return jg}const l=Reflect.get(t,n,ee(t)?t:r);if((fn(n)?Jf.has(n):Ug(n))||(s||Ee(t,"get",n),i))return l;if(ee(l)){const u=a&&Ol(n)?l:l.value;return s&&$t(u)?Wa(u):u}return $t(l)?s?Wa(l):wr(l):l}}class td extends Zf{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const u=wn(i);if(!Be(r)&&!wn(r)&&(i=Rt(i),r=Rt(r)),!ct(t)&&ee(i)&&!ee(r))return u||(i.value=r),!0}const a=ct(t)&&Ol(n)?Number(n)<t.length:St(t,n),l=Reflect.set(t,n,r,ee(t)?t:s);return t===Rt(s)&&(a?Fn(r,i)&&yn(t,"set",n,r):yn(t,"add",n,r)),l}deleteProperty(t,n){const r=St(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&yn(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!fn(n)||!Jf.has(n))&&Ee(t,"has",n),r}ownKeys(t){return Ee(t,"iterate",ct(t)?"length":mr),Reflect.ownKeys(t)}}class Bg extends Zf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const qg=new td,Hg=new Bg,zg=new td(!0);const Ga=e=>e,Vi=e=>Reflect.getPrototypeOf(e);function Kg(e,t,n){return function(...r){const s=this.__v_raw,i=Rt(s),a=$r(i),l=e==="entries"||e===Symbol.iterator&&a,u=e==="keys"&&a,h=s[e](...r),f=n?Ga:t?Xi:fe;return!t&&Ee(i,"iterate",u?Ka:mr),{next(){const{value:p,done:m}=h.next();return m?{value:p,done:m}:{value:l?[f(p[0]),f(p[1])]:f(p),done:m}},[Symbol.iterator](){return this}}}}function Di(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Gg(e,t){const n={get(s){const i=this.__v_raw,a=Rt(i),l=Rt(s);e||(Fn(s,l)&&Ee(a,"get",s),Ee(a,"get",l));const{has:u}=Vi(a),h=t?Ga:e?Xi:fe;if(u.call(a,s))return h(i.get(s));if(u.call(a,l))return h(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&Ee(Rt(s),"iterate",mr),s.size},has(s){const i=this.__v_raw,a=Rt(i),l=Rt(s);return e||(Fn(s,l)&&Ee(a,"has",s),Ee(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,u=Rt(l),h=t?Ga:e?Xi:fe;return!e&&Ee(u,"iterate",mr),l.forEach((f,p)=>s.call(i,h(f),h(p),a))}};return we(n,e?{add:Di("add"),set:Di("set"),delete:Di("delete"),clear:Di("clear")}:{add(s){!t&&!Be(s)&&!wn(s)&&(s=Rt(s));const i=Rt(this);return Vi(i).has.call(i,s)||(i.add(s),yn(i,"add",s,s)),this},set(s,i){!t&&!Be(i)&&!wn(i)&&(i=Rt(i));const a=Rt(this),{has:l,get:u}=Vi(a);let h=l.call(a,s);h||(s=Rt(s),h=l.call(a,s));const f=u.call(a,s);return a.set(s,i),h?Fn(i,f)&&yn(a,"set",s,i):yn(a,"add",s,i),this},delete(s){const i=Rt(this),{has:a,get:l}=Vi(i);let u=a.call(i,s);u||(s=Rt(s),u=a.call(i,s)),l&&l.call(i,s);const h=i.delete(s);return u&&yn(i,"delete",s,void 0),h},clear(){const s=Rt(this),i=s.size!==0,a=s.clear();return i&&yn(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Kg(s,e,t)}),n}function Fl(e,t){const n=Gg(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(St(n,s)&&s in r?n:r,s,i)}const Wg={get:Fl(!1,!1)},Qg={get:Fl(!1,!0)},Xg={get:Fl(!0,!1)};const ed=new WeakMap,nd=new WeakMap,rd=new WeakMap,Yg=new WeakMap;function Jg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zg(e){return e.__v_skip||!Object.isExtensible(e)?0:Jg(Ig(e))}function wr(e){return wn(e)?e:Ul(e,!1,qg,Wg,ed)}function sd(e){return Ul(e,!1,zg,Qg,nd)}function Wa(e){return Ul(e,!0,Hg,Xg,rd)}function Ul(e,t,n,r,s){if(!$t(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Zg(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function gr(e){return wn(e)?gr(e.__v_raw):!!(e&&e.__v_isReactive)}function wn(e){return!!(e&&e.__v_isReadonly)}function Be(e){return!!(e&&e.__v_isShallow)}function jl(e){return e?!!e.__v_raw:!1}function Rt(e){const t=e&&e.__v_raw;return t?Rt(t):e}function t_(e){return!St(e,"__v_skip")&&Object.isExtensible(e)&&Uf(e,"__v_skip",!0),e}const fe=e=>$t(e)?wr(e):e,Xi=e=>$t(e)?Wa(e):e;function ee(e){return e?e.__v_isRef===!0:!1}function Ot(e){return id(e,!1)}function e_(e){return id(e,!0)}function id(e,t){return ee(e)?e:new n_(e,t)}class n_{constructor(t,n){this.dep=new $l,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Rt(t),this._value=n?t:fe(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Be(t)||wn(t);t=r?t:Rt(t),Fn(t,n)&&(this._rawValue=t,this._value=r?t:fe(t),this.dep.trigger())}}function at(e){return ee(e)?e.value:e}const r_={get:(e,t,n)=>t==="__v_raw"?e:at(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return ee(s)&&!ee(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function od(e){return gr(e)?e:new Proxy(e,r_)}class s_{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new $l(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ks-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ft!==this)return Kf(this,!0),!0}get value(){const t=this.dep.track();return Qf(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function i_(e,t,n=!1){let r,s;return dt(e)?r=e:(r=e.get,s=e.set),new s_(r,s,n)}const xi={},Yi=new WeakMap;let cr;function o_(e,t=!1,n=cr){if(n){let r=Yi.get(n);r||Yi.set(n,r=[]),r.push(e)}}function a_(e,t,n=Lt){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:u}=n,h=q=>s?q:Be(q)||s===!1||s===0?vn(q,1):vn(q);let f,p,m,_,A=!1,C=!1;if(ee(e)?(p=()=>e.value,A=Be(e)):gr(e)?(p=()=>h(e),A=!0):ct(e)?(C=!0,A=e.some(q=>gr(q)||Be(q)),p=()=>e.map(q=>{if(ee(q))return q.value;if(gr(q))return h(q);if(dt(q))return u?u(q,2):q()})):dt(e)?t?p=u?()=>u(e,2):e:p=()=>{if(m){En();try{m()}finally{Tn()}}const q=cr;cr=f;try{return u?u(e,3,[_]):e(_)}finally{cr=q}}:p=on,t&&s){const q=p,rt=s===!0?1/0:s;p=()=>vn(q(),rt)}const D=Mg(),M=()=>{f.stop(),D&&D.active&&xl(D.effects,f)};if(i&&t){const q=t;t=(...rt)=>{q(...rt),M()}}let H=C?new Array(e.length).fill(xi):xi;const Q=q=>{if(!(!(f.flags&1)||!f.dirty&&!q))if(t){const rt=f.run();if(s||A||(C?rt.some((lt,I)=>Fn(lt,H[I])):Fn(rt,H))){m&&m();const lt=cr;cr=f;try{const I=[rt,H===xi?void 0:C&&H[0]===xi?[]:H,_];H=rt,u?u(t,3,I):t(...I)}finally{cr=lt}}}else f.run()};return l&&l(Q),f=new Hf(p),f.scheduler=a?()=>a(Q,!1):Q,_=q=>o_(q,!1,f),m=f.onStop=()=>{const q=Yi.get(f);if(q){if(u)u(q,4);else for(const rt of q)rt();Yi.delete(f)}},t?r?Q(!0):H=f.run():a?a(Q.bind(null,!0),!0):f.run(),M.pause=f.pause.bind(f),M.resume=f.resume.bind(f),M.stop=M,M}function vn(e,t=1/0,n){if(t<=0||!$t(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,ee(e))vn(e.value,t,n);else if(ct(e))for(let r=0;r<e.length;r++)vn(e[r],t,n);else if(So(e)||$r(e))e.forEach(r=>{vn(r,t,n)});else if($f(e)){for(const r in e)vn(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&vn(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ci(e,t,n,r){try{return r?e(...r):e()}catch(s){xo(s,t,n)}}function dn(e,t,n,r){if(dt(e)){const s=ci(e,t,n,r);return s&&kf(s)&&s.catch(i=>{xo(i,t,n)}),s}if(ct(e)){const s=[];for(let i=0;i<e.length;i++)s.push(dn(e[i],t,n,r));return s}}function xo(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Lt;if(t){let l=t.parent;const u=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const f=l.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](e,u,h)===!1)return}l=l.parent}if(i){En(),ci(i,null,10,[e,u,h]),Tn();return}}l_(e,n,s,r,a)}function l_(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const be=[];let nn=-1;const Fr=[];let Nn=null,Dr=0;const ad=Promise.resolve();let Ji=null;function Ws(e){const t=Ji||ad;return e?t.then(this?e.bind(this):e):t}function u_(e){let t=nn+1,n=be.length;for(;t<n;){const r=t+n>>>1,s=be[r],i=Qs(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function Bl(e){if(!(e.flags&1)){const t=Qs(e),n=be[be.length-1];!n||!(e.flags&2)&&t>=Qs(n)?be.push(e):be.splice(u_(t),0,e),e.flags|=1,ld()}}function ld(){Ji||(Ji=ad.then(cd))}function c_(e){ct(e)?Fr.push(...e):Nn&&e.id===-1?Nn.splice(Dr+1,0,e):e.flags&1||(Fr.push(e),e.flags|=1),ld()}function Ac(e,t,n=nn+1){for(;n<be.length;n++){const r=be[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;be.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function ud(e){if(Fr.length){const t=[...new Set(Fr)].sort((n,r)=>Qs(n)-Qs(r));if(Fr.length=0,Nn){Nn.push(...t);return}for(Nn=t,Dr=0;Dr<Nn.length;Dr++){const n=Nn[Dr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Nn=null,Dr=0}}const Qs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function cd(e){try{for(nn=0;nn<be.length;nn++){const t=be[nn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ci(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;nn<be.length;nn++){const t=be[nn];t&&(t.flags&=-2)}nn=-1,be.length=0,ud(),Ji=null,(be.length||Fr.length)&&cd()}}let je=null,hd=null;function Zi(e){const t=je;return je=e,hd=e&&e.type.__scopeId||null,t}function h_(e,t=je,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&no(-1);const i=Zi(t);let a;try{a=e(...s)}finally{Zi(i),r._d&&no(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function ae(e,t){if(je===null)return e;const n=ko(je),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,u=Lt]=t[s];i&&(dt(i)&&(i={mounted:i,updated:i}),i.deep&&vn(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u}))}return e}function lr(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let u=l.dir[r];u&&(En(),dn(u,n,8,[e.el,l,e,t]),Tn())}}const f_=Symbol("_vte"),d_=e=>e.__isTeleport,p_=Symbol("_leaveCb");function ql(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ql(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function fd(e,t){return dt(e)?we({name:e.name},t,{setup:e}):e}function dd(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const to=new WeakMap;function Ns(e,t,n,r,s=!1){if(ct(e)){e.forEach((A,C)=>Ns(A,t&&(ct(t)?t[C]:t),n,r,s));return}if(Ms(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ns(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?ko(r.component):r.el,a=s?null:i,{i:l,r:u}=e,h=t&&t.r,f=l.refs===Lt?l.refs={}:l.refs,p=l.setupState,m=Rt(p),_=p===Lt?Mf:A=>St(m,A);if(h!=null&&h!==u){if(bc(t),Jt(h))f[h]=null,_(h)&&(p[h]=null);else if(ee(h)){h.value=null;const A=t;A.k&&(f[A.k]=null)}}if(dt(u))ci(u,l,12,[a,f]);else{const A=Jt(u),C=ee(u);if(A||C){const D=()=>{if(e.f){const M=A?_(u)?p[u]:f[u]:u.value;if(s)ct(M)&&xl(M,i);else if(ct(M))M.includes(i)||M.push(i);else if(A)f[u]=[i],_(u)&&(p[u]=f[u]);else{const H=[i];u.value=H,e.k&&(f[e.k]=H)}}else A?(f[u]=a,_(u)&&(p[u]=a)):C&&(u.value=a,e.k&&(f[e.k]=a))};if(a){const M=()=>{D(),to.delete(e)};M.id=-1,to.set(e,M),ke(M,n)}else bc(e),D()}}}function bc(e){const t=to.get(e);t&&(t.flags|=8,to.delete(e))}Po().requestIdleCallback;Po().cancelIdleCallback;const Ms=e=>!!e.type.__asyncLoader,pd=e=>e.type.__isKeepAlive;function m_(e,t){md(e,"a",t)}function g_(e,t){md(e,"da",t)}function md(e,t,n=Re){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Oo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)pd(s.parent.vnode)&&__(r,t,n,s),s=s.parent}}function __(e,t,n,r){const s=Oo(t,e,r,!0);vd(()=>{xl(r[t],s)},n)}function Oo(e,t,n=Re,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{En();const l=hi(n),u=dn(t,n,e,a);return l(),Tn(),u});return r?s.unshift(i):s.push(i),i}}const Rn=e=>(t,n=Re)=>{(!Ys||e==="sp")&&Oo(e,(...r)=>t(...r),n)},gd=Rn("bm"),_d=Rn("m"),y_=Rn("bu"),v_=Rn("u"),yd=Rn("bum"),vd=Rn("um"),E_=Rn("sp"),T_=Rn("rtg"),w_=Rn("rtc");function I_(e,t=Re){Oo("ec",e,t)}const A_=Symbol.for("v-ndc");function Oi(e,t,n,r){let s;const i=n,a=ct(e);if(a||Jt(e)){const l=a&&gr(e);let u=!1,h=!1;l&&(u=!Be(e),h=wn(e),e=Do(e)),s=new Array(e.length);for(let f=0,p=e.length;f<p;f++)s[f]=t(u?h?Xi(fe(e[f])):fe(e[f]):e[f],f,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if($t(e))if(e[Symbol.iterator])s=Array.from(e,(l,u)=>t(l,u,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let u=0,h=l.length;u<h;u++){const f=l[u];s[u]=t(e[f],f,u,i)}}else s=[];return s}const Qa=e=>e?Ud(e)?ko(e):Qa(e.parent):null,ks=we(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Qa(e.parent),$root:e=>Qa(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Td(e),$forceUpdate:e=>e.f||(e.f=()=>{Bl(e.update)}),$nextTick:e=>e.n||(e.n=Ws.bind(e.proxy)),$watch:e=>z_.bind(e)}),Ia=(e,t)=>e!==Lt&&!e.__isScriptSetup&&St(e,t),b_={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:u}=e;let h;if(t[0]!=="$"){const _=a[t];if(_!==void 0)switch(_){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Ia(r,t))return a[t]=1,r[t];if(s!==Lt&&St(s,t))return a[t]=2,s[t];if((h=e.propsOptions[0])&&St(h,t))return a[t]=3,i[t];if(n!==Lt&&St(n,t))return a[t]=4,n[t];Xa&&(a[t]=0)}}const f=ks[t];let p,m;if(f)return t==="$attrs"&&Ee(e.attrs,"get",""),f(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(n!==Lt&&St(n,t))return a[t]=4,n[t];if(m=u.config.globalProperties,St(m,t))return m[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Ia(s,t)?(s[t]=n,!0):r!==Lt&&St(r,t)?(r[t]=n,!0):St(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:a}},l){let u,h;return!!(n[l]||e!==Lt&&l[0]!=="$"&&St(e,l)||Ia(t,l)||(u=i[0])&&St(u,l)||St(r,l)||St(ks,l)||St(s.config.globalProperties,l)||(h=a.__cssModules)&&h[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:St(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Rc(e){return ct(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Xa=!0;function R_(e){const t=Td(e),n=e.proxy,r=e.ctx;Xa=!1,t.beforeCreate&&Sc(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:u,inject:h,created:f,beforeMount:p,mounted:m,beforeUpdate:_,updated:A,activated:C,deactivated:D,beforeDestroy:M,beforeUnmount:H,destroyed:Q,unmounted:q,render:rt,renderTracked:lt,renderTriggered:I,errorCaptured:v,serverPrefetch:w,expose:S,inheritAttrs:b,components:P,directives:E,filters:Mt}=t;if(h&&S_(h,r,null),a)for(const Et in a){const gt=a[Et];dt(gt)&&(r[Et]=gt.bind(n))}if(s){const Et=s.call(n,n);$t(Et)&&(e.data=wr(Et))}if(Xa=!0,i)for(const Et in i){const gt=i[Et],re=dt(gt)?gt.bind(n,n):dt(gt.get)?gt.get.bind(n,n):on,Tt=!dt(gt)&&dt(gt.set)?gt.set.bind(n):on,Ht=pt({get:re,set:Tt});Object.defineProperty(r,Et,{enumerable:!0,configurable:!0,get:()=>Ht.value,set:Dt=>Ht.value=Dt})}if(l)for(const Et in l)Ed(l[Et],r,n,Et);if(u){const Et=dt(u)?u.call(n):u;Reflect.ownKeys(Et).forEach(gt=>{jr(gt,Et[gt])})}f&&Sc(f,e,"c");function qt(Et,gt){ct(gt)?gt.forEach(re=>Et(re.bind(n))):gt&&Et(gt.bind(n))}if(qt(gd,p),qt(_d,m),qt(y_,_),qt(v_,A),qt(m_,C),qt(g_,D),qt(I_,v),qt(w_,lt),qt(T_,I),qt(yd,H),qt(vd,q),qt(E_,w),ct(S))if(S.length){const Et=e.exposed||(e.exposed={});S.forEach(gt=>{Object.defineProperty(Et,gt,{get:()=>n[gt],set:re=>n[gt]=re,enumerable:!0})})}else e.exposed||(e.exposed={});rt&&e.render===on&&(e.render=rt),b!=null&&(e.inheritAttrs=b),P&&(e.components=P),E&&(e.directives=E),w&&dd(e)}function S_(e,t,n=on){ct(e)&&(e=Ya(e));for(const r in e){const s=e[r];let i;$t(s)?"default"in s?i=Ge(s.from||r,s.default,!0):i=Ge(s.from||r):i=Ge(s),ee(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Sc(e,t,n){dn(ct(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ed(e,t,n,r){let s=r.includes(".")?Nd(n,r):()=>n[r];if(Jt(e)){const i=t[e];dt(i)&&an(s,i)}else if(dt(e))an(s,e.bind(n));else if($t(e))if(ct(e))e.forEach(i=>Ed(i,t,n,r));else{const i=dt(e.handler)?e.handler.bind(n):t[e.handler];dt(i)&&an(s,i,e)}}function Td(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let u;return l?u=l:!s.length&&!n&&!r?u=t:(u={},s.length&&s.forEach(h=>eo(u,h,a,!0)),eo(u,t,a)),$t(t)&&i.set(t,u),u}function eo(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&eo(e,i,n,!0),s&&s.forEach(a=>eo(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=C_[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const C_={data:Cc,props:Pc,emits:Pc,methods:bs,computed:bs,beforeCreate:Ae,created:Ae,beforeMount:Ae,mounted:Ae,beforeUpdate:Ae,updated:Ae,beforeDestroy:Ae,beforeUnmount:Ae,destroyed:Ae,unmounted:Ae,activated:Ae,deactivated:Ae,errorCaptured:Ae,serverPrefetch:Ae,components:bs,directives:bs,watch:V_,provide:Cc,inject:P_};function Cc(e,t){return t?e?function(){return we(dt(e)?e.call(this,this):e,dt(t)?t.call(this,this):t)}:t:e}function P_(e,t){return bs(Ya(e),Ya(t))}function Ya(e){if(ct(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ae(e,t){return e?[...new Set([].concat(e,t))]:t}function bs(e,t){return e?we(Object.create(null),e,t):t}function Pc(e,t){return e?ct(e)&&ct(t)?[...new Set([...e,...t])]:we(Object.create(null),Rc(e),Rc(t??{})):t}function V_(e,t){if(!e)return t;if(!t)return e;const n=we(Object.create(null),e);for(const r in t)n[r]=Ae(e[r],t[r]);return n}function wd(){return{app:null,config:{isNativeTag:Mf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let D_=0;function x_(e,t){return function(r,s=null){dt(r)||(r=we({},r)),s!=null&&!$t(s)&&(s=null);const i=wd(),a=new WeakSet,l=[];let u=!1;const h=i.app={_uid:D_++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:dy,get config(){return i.config},set config(f){},use(f,...p){return a.has(f)||(f&&dt(f.install)?(a.add(f),f.install(h,...p)):dt(f)&&(a.add(f),f(h,...p))),h},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),h},component(f,p){return p?(i.components[f]=p,h):i.components[f]},directive(f,p){return p?(i.directives[f]=p,h):i.directives[f]},mount(f,p,m){if(!u){const _=h._ceVNode||$e(r,s);return _.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),e(_,f,m),u=!0,h._container=f,f.__vue_app__=h,ko(_.component)}},onUnmount(f){l.push(f)},unmount(){u&&(dn(l,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(f,p){return i.provides[f]=p,h},runWithContext(f){const p=Ur;Ur=h;try{return f()}finally{Ur=p}}};return h}}let Ur=null;function jr(e,t){if(Re){let n=Re.provides;const r=Re.parent&&Re.parent.provides;r===n&&(n=Re.provides=Object.create(r)),n[e]=t}}function Ge(e,t,n=!1){const r=Fd();if(r||Ur){let s=Ur?Ur._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&dt(t)?t.call(r&&r.proxy):t}}const Id={},Ad=()=>Object.create(Id),bd=e=>Object.getPrototypeOf(e)===Id;function O_(e,t,n,r=!1){const s={},i=Ad();e.propsDefaults=Object.create(null),Rd(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:sd(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function N_(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=Rt(s),[u]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const f=e.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(No(e.emitsOptions,m))continue;const _=t[m];if(u)if(St(i,m))_!==i[m]&&(i[m]=_,h=!0);else{const A=zn(m);s[A]=Ja(u,l,A,_,e,!1)}else _!==i[m]&&(i[m]=_,h=!0)}}}else{Rd(e,t,s,i)&&(h=!0);let f;for(const p in l)(!t||!St(t,p)&&((f=Tr(p))===p||!St(t,f)))&&(u?n&&(n[p]!==void 0||n[f]!==void 0)&&(s[p]=Ja(u,l,p,void 0,e,!0)):delete s[p]);if(i!==l)for(const p in i)(!t||!St(t,p))&&(delete i[p],h=!0)}h&&yn(e.attrs,"set","")}function Rd(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let u in t){if(Ds(u))continue;const h=t[u];let f;s&&St(s,f=zn(u))?!i||!i.includes(f)?n[f]=h:(l||(l={}))[f]=h:No(e.emitsOptions,u)||(!(u in r)||h!==r[u])&&(r[u]=h,a=!0)}if(i){const u=Rt(n),h=l||Lt;for(let f=0;f<i.length;f++){const p=i[f];n[p]=Ja(s,u,p,h[p],e,!St(h,p))}}return a}function Ja(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=St(a,"default");if(l&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&dt(u)){const{propsDefaults:h}=s;if(n in h)r=h[n];else{const f=hi(s);r=h[n]=u.call(null,t),f()}}else r=u;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===Tr(n))&&(r=!0))}return r}const M_=new WeakMap;function Sd(e,t,n=!1){const r=n?M_:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let u=!1;if(!dt(e)){const f=p=>{u=!0;const[m,_]=Sd(p,t,!0);we(a,m),_&&l.push(..._)};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!i&&!u)return $t(e)&&r.set(e,Lr),Lr;if(ct(i))for(let f=0;f<i.length;f++){const p=zn(i[f]);Vc(p)&&(a[p]=Lt)}else if(i)for(const f in i){const p=zn(f);if(Vc(p)){const m=i[f],_=a[p]=ct(m)||dt(m)?{type:m}:we({},m),A=_.type;let C=!1,D=!0;if(ct(A))for(let M=0;M<A.length;++M){const H=A[M],Q=dt(H)&&H.name;if(Q==="Boolean"){C=!0;break}else Q==="String"&&(D=!1)}else C=dt(A)&&A.name==="Boolean";_[0]=C,_[1]=D,(C||St(_,"default"))&&l.push(p)}}const h=[a,l];return $t(e)&&r.set(e,h),h}function Vc(e){return e[0]!=="$"&&!Ds(e)}const Hl=e=>e==="_"||e==="_ctx"||e==="$stable",zl=e=>ct(e)?e.map(sn):[sn(e)],k_=(e,t,n)=>{if(t._n)return t;const r=h_((...s)=>zl(t(...s)),n);return r._c=!1,r},Cd=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Hl(s))continue;const i=e[s];if(dt(i))t[s]=k_(s,i,r);else if(i!=null){const a=zl(i);t[s]=()=>a}}},Pd=(e,t)=>{const n=zl(t);e.slots.default=()=>n},Vd=(e,t,n)=>{for(const r in t)(n||!Hl(r))&&(e[r]=t[r])},L_=(e,t,n)=>{const r=e.slots=Ad();if(e.vnode.shapeFlag&32){const s=t._;s?(Vd(r,t,n),n&&Uf(r,"_",s,!0)):Cd(t,r)}else t&&Pd(e,t)},$_=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=Lt;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Vd(s,t,n):(i=!t.$stable,Cd(t,s)),a=t}else t&&(Pd(e,t),a={default:1});if(i)for(const l in s)!Hl(l)&&a[l]==null&&delete s[l]},ke=Z_;function F_(e){return U_(e)}function U_(e,t){const n=Po();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:u,setText:h,setElementText:f,parentNode:p,nextSibling:m,setScopeId:_=on,insertStaticContent:A}=e,C=(y,T,V,U=null,B=null,$=null,Y=void 0,G=null,z=!!T.dynamicChildren)=>{if(y===T)return;y&&!Ts(y,T)&&(U=L(y),Dt(y,B,$,!0),y=null),T.patchFlag===-2&&(z=!1,T.dynamicChildren=null);const{type:K,ref:it,shapeFlag:J}=T;switch(K){case Mo:D(y,T,V,U);break;case Kn:M(y,T,V,U);break;case ba:y==null&&H(T,V,U,Y);break;case Pe:P(y,T,V,U,B,$,Y,G,z);break;default:J&1?rt(y,T,V,U,B,$,Y,G,z):J&6?E(y,T,V,U,B,$,Y,G,z):(J&64||J&128)&&K.process(y,T,V,U,B,$,Y,G,z,O)}it!=null&&B?Ns(it,y&&y.ref,$,T||y,!T):it==null&&y&&y.ref!=null&&Ns(y.ref,null,$,y,!0)},D=(y,T,V,U)=>{if(y==null)r(T.el=l(T.children),V,U);else{const B=T.el=y.el;T.children!==y.children&&h(B,T.children)}},M=(y,T,V,U)=>{y==null?r(T.el=u(T.children||""),V,U):T.el=y.el},H=(y,T,V,U)=>{[y.el,y.anchor]=A(y.children,T,V,U,y.el,y.anchor)},Q=({el:y,anchor:T},V,U)=>{let B;for(;y&&y!==T;)B=m(y),r(y,V,U),y=B;r(T,V,U)},q=({el:y,anchor:T})=>{let V;for(;y&&y!==T;)V=m(y),s(y),y=V;s(T)},rt=(y,T,V,U,B,$,Y,G,z)=>{T.type==="svg"?Y="svg":T.type==="math"&&(Y="mathml"),y==null?lt(T,V,U,B,$,Y,G,z):w(y,T,B,$,Y,G,z)},lt=(y,T,V,U,B,$,Y,G)=>{let z,K;const{props:it,shapeFlag:J,transition:st,dirs:ot}=y;if(z=y.el=a(y.type,$,it&&it.is,it),J&8?f(z,y.children):J&16&&v(y.children,z,null,U,B,Aa(y,$),Y,G),ot&&lr(y,null,U,"created"),I(z,y,y.scopeId,Y,U),it){for(const Pt in it)Pt!=="value"&&!Ds(Pt)&&i(z,Pt,null,it[Pt],$,U);"value"in it&&i(z,"value",null,it.value,$),(K=it.onVnodeBeforeMount)&&tn(K,U,y)}ot&&lr(y,null,U,"beforeMount");const _t=j_(B,st);_t&&st.beforeEnter(z),r(z,T,V),((K=it&&it.onVnodeMounted)||_t||ot)&&ke(()=>{K&&tn(K,U,y),_t&&st.enter(z),ot&&lr(y,null,U,"mounted")},B)},I=(y,T,V,U,B)=>{if(V&&_(y,V),U)for(let $=0;$<U.length;$++)_(y,U[$]);if(B){let $=B.subTree;if(T===$||kd($.type)&&($.ssContent===T||$.ssFallback===T)){const Y=B.vnode;I(y,Y,Y.scopeId,Y.slotScopeIds,B.parent)}}},v=(y,T,V,U,B,$,Y,G,z=0)=>{for(let K=z;K<y.length;K++){const it=y[K]=G?Mn(y[K]):sn(y[K]);C(null,it,T,V,U,B,$,Y,G)}},w=(y,T,V,U,B,$,Y)=>{const G=T.el=y.el;let{patchFlag:z,dynamicChildren:K,dirs:it}=T;z|=y.patchFlag&16;const J=y.props||Lt,st=T.props||Lt;let ot;if(V&&ur(V,!1),(ot=st.onVnodeBeforeUpdate)&&tn(ot,V,T,y),it&&lr(T,y,V,"beforeUpdate"),V&&ur(V,!0),(J.innerHTML&&st.innerHTML==null||J.textContent&&st.textContent==null)&&f(G,""),K?S(y.dynamicChildren,K,G,V,U,Aa(T,B),$):Y||gt(y,T,G,null,V,U,Aa(T,B),$,!1),z>0){if(z&16)b(G,J,st,V,B);else if(z&2&&J.class!==st.class&&i(G,"class",null,st.class,B),z&4&&i(G,"style",J.style,st.style,B),z&8){const _t=T.dynamicProps;for(let Pt=0;Pt<_t.length;Pt++){const At=_t[Pt],me=J[At],ge=st[At];(ge!==me||At==="value")&&i(G,At,me,ge,B,V)}}z&1&&y.children!==T.children&&f(G,T.children)}else!Y&&K==null&&b(G,J,st,V,B);((ot=st.onVnodeUpdated)||it)&&ke(()=>{ot&&tn(ot,V,T,y),it&&lr(T,y,V,"updated")},U)},S=(y,T,V,U,B,$,Y)=>{for(let G=0;G<T.length;G++){const z=y[G],K=T[G],it=z.el&&(z.type===Pe||!Ts(z,K)||z.shapeFlag&198)?p(z.el):V;C(z,K,it,null,U,B,$,Y,!0)}},b=(y,T,V,U,B)=>{if(T!==V){if(T!==Lt)for(const $ in T)!Ds($)&&!($ in V)&&i(y,$,T[$],null,B,U);for(const $ in V){if(Ds($))continue;const Y=V[$],G=T[$];Y!==G&&$!=="value"&&i(y,$,G,Y,B,U)}"value"in V&&i(y,"value",T.value,V.value,B)}},P=(y,T,V,U,B,$,Y,G,z)=>{const K=T.el=y?y.el:l(""),it=T.anchor=y?y.anchor:l("");let{patchFlag:J,dynamicChildren:st,slotScopeIds:ot}=T;ot&&(G=G?G.concat(ot):ot),y==null?(r(K,V,U),r(it,V,U),v(T.children||[],V,it,B,$,Y,G,z)):J>0&&J&64&&st&&y.dynamicChildren?(S(y.dynamicChildren,st,V,B,$,Y,G),(T.key!=null||B&&T===B.subTree)&&Dd(y,T,!0)):gt(y,T,V,it,B,$,Y,G,z)},E=(y,T,V,U,B,$,Y,G,z)=>{T.slotScopeIds=G,y==null?T.shapeFlag&512?B.ctx.activate(T,V,U,Y,z):Mt(T,V,U,B,$,Y,z):Zt(y,T,z)},Mt=(y,T,V,U,B,$,Y)=>{const G=y.component=ay(y,U,B);if(pd(y)&&(G.ctx.renderer=O),ly(G,!1,Y),G.asyncDep){if(B&&B.registerDep(G,qt,Y),!y.el){const z=G.subTree=$e(Kn);M(null,z,T,V),y.placeholder=z.el}}else qt(G,y,T,V,B,$,Y)},Zt=(y,T,V)=>{const U=T.component=y.component;if(Y_(y,T,V))if(U.asyncDep&&!U.asyncResolved){Et(U,T,V);return}else U.next=T,U.update();else T.el=y.el,U.vnode=T},qt=(y,T,V,U,B,$,Y)=>{const G=()=>{if(y.isMounted){let{next:J,bu:st,u:ot,parent:_t,vnode:Pt}=y;{const Ne=xd(y);if(Ne){J&&(J.el=Pt.el,Et(y,J,Y)),Ne.asyncDep.then(()=>{y.isUnmounted||G()});return}}let At=J,me;ur(y,!1),J?(J.el=Pt.el,Et(y,J,Y)):J=Pt,st&&Fi(st),(me=J.props&&J.props.onVnodeBeforeUpdate)&&tn(me,_t,J,Pt),ur(y,!0);const ge=xc(y),Oe=y.subTree;y.subTree=ge,C(Oe,ge,p(Oe.el),L(Oe),y,B,$),J.el=ge.el,At===null&&J_(y,ge.el),ot&&ke(ot,B),(me=J.props&&J.props.onVnodeUpdated)&&ke(()=>tn(me,_t,J,Pt),B)}else{let J;const{el:st,props:ot}=T,{bm:_t,m:Pt,parent:At,root:me,type:ge}=y,Oe=Ms(T);ur(y,!1),_t&&Fi(_t),!Oe&&(J=ot&&ot.onVnodeBeforeMount)&&tn(J,At,T),ur(y,!0);{me.ce&&me.ce._def.shadowRoot!==!1&&me.ce._injectChildStyle(ge);const Ne=y.subTree=xc(y);C(null,Ne,V,U,y,B,$),T.el=Ne.el}if(Pt&&ke(Pt,B),!Oe&&(J=ot&&ot.onVnodeMounted)){const Ne=T;ke(()=>tn(J,At,Ne),B)}(T.shapeFlag&256||At&&Ms(At.vnode)&&At.vnode.shapeFlag&256)&&y.a&&ke(y.a,B),y.isMounted=!0,T=V=U=null}};y.scope.on();const z=y.effect=new Hf(G);y.scope.off();const K=y.update=z.run.bind(z),it=y.job=z.runIfDirty.bind(z);it.i=y,it.id=y.uid,z.scheduler=()=>Bl(it),ur(y,!0),K()},Et=(y,T,V)=>{T.component=y;const U=y.vnode.props;y.vnode=T,y.next=null,N_(y,T.props,U,V),$_(y,T.children,V),En(),Ac(y),Tn()},gt=(y,T,V,U,B,$,Y,G,z=!1)=>{const K=y&&y.children,it=y?y.shapeFlag:0,J=T.children,{patchFlag:st,shapeFlag:ot}=T;if(st>0){if(st&128){Tt(K,J,V,U,B,$,Y,G,z);return}else if(st&256){re(K,J,V,U,B,$,Y,G,z);return}}ot&8?(it&16&&se(K,B,$),J!==K&&f(V,J)):it&16?ot&16?Tt(K,J,V,U,B,$,Y,G,z):se(K,B,$,!0):(it&8&&f(V,""),ot&16&&v(J,V,U,B,$,Y,G,z))},re=(y,T,V,U,B,$,Y,G,z)=>{y=y||Lr,T=T||Lr;const K=y.length,it=T.length,J=Math.min(K,it);let st;for(st=0;st<J;st++){const ot=T[st]=z?Mn(T[st]):sn(T[st]);C(y[st],ot,V,null,B,$,Y,G,z)}K>it?se(y,B,$,!0,!1,J):v(T,V,U,B,$,Y,G,z,J)},Tt=(y,T,V,U,B,$,Y,G,z)=>{let K=0;const it=T.length;let J=y.length-1,st=it-1;for(;K<=J&&K<=st;){const ot=y[K],_t=T[K]=z?Mn(T[K]):sn(T[K]);if(Ts(ot,_t))C(ot,_t,V,null,B,$,Y,G,z);else break;K++}for(;K<=J&&K<=st;){const ot=y[J],_t=T[st]=z?Mn(T[st]):sn(T[st]);if(Ts(ot,_t))C(ot,_t,V,null,B,$,Y,G,z);else break;J--,st--}if(K>J){if(K<=st){const ot=st+1,_t=ot<it?T[ot].el:U;for(;K<=st;)C(null,T[K]=z?Mn(T[K]):sn(T[K]),V,_t,B,$,Y,G,z),K++}}else if(K>st)for(;K<=J;)Dt(y[K],B,$,!0),K++;else{const ot=K,_t=K,Pt=new Map;for(K=_t;K<=st;K++){const ue=T[K]=z?Mn(T[K]):sn(T[K]);ue.key!=null&&Pt.set(ue.key,K)}let At,me=0;const ge=st-_t+1;let Oe=!1,Ne=0;const ze=new Array(ge);for(K=0;K<ge;K++)ze[K]=0;for(K=ot;K<=J;K++){const ue=y[K];if(me>=ge){Dt(ue,B,$,!0);continue}let ie;if(ue.key!=null)ie=Pt.get(ue.key);else for(At=_t;At<=st;At++)if(ze[At-_t]===0&&Ts(ue,T[At])){ie=At;break}ie===void 0?Dt(ue,B,$,!0):(ze[ie-_t]=K+1,ie>=Ne?Ne=ie:Oe=!0,C(ue,T[ie],V,null,B,$,Y,G,z),me++)}const Rr=Oe?B_(ze):Lr;for(At=Rr.length-1,K=ge-1;K>=0;K--){const ue=_t+K,ie=T[ue],is=T[ue+1],rr=ue+1<it?is.el||is.placeholder:U;ze[K]===0?C(null,ie,V,rr,B,$,Y,G,z):Oe&&(At<0||K!==Rr[At]?Ht(ie,V,rr,2):At--)}}},Ht=(y,T,V,U,B=null)=>{const{el:$,type:Y,transition:G,children:z,shapeFlag:K}=y;if(K&6){Ht(y.component.subTree,T,V,U);return}if(K&128){y.suspense.move(T,V,U);return}if(K&64){Y.move(y,T,V,O);return}if(Y===Pe){r($,T,V);for(let J=0;J<z.length;J++)Ht(z[J],T,V,U);r(y.anchor,T,V);return}if(Y===ba){Q(y,T,V);return}if(U!==2&&K&1&&G)if(U===0)G.beforeEnter($),r($,T,V),ke(()=>G.enter($),B);else{const{leave:J,delayLeave:st,afterLeave:ot}=G,_t=()=>{y.ctx.isUnmounted?s($):r($,T,V)},Pt=()=>{$._isLeaving&&$[p_](!0),J($,()=>{_t(),ot&&ot()})};st?st($,_t,Pt):Pt()}else r($,T,V)},Dt=(y,T,V,U=!1,B=!1)=>{const{type:$,props:Y,ref:G,children:z,dynamicChildren:K,shapeFlag:it,patchFlag:J,dirs:st,cacheIndex:ot}=y;if(J===-2&&(B=!1),G!=null&&(En(),Ns(G,null,V,y,!0),Tn()),ot!=null&&(T.renderCache[ot]=void 0),it&256){T.ctx.deactivate(y);return}const _t=it&1&&st,Pt=!Ms(y);let At;if(Pt&&(At=Y&&Y.onVnodeBeforeUnmount)&&tn(At,T,y),it&6)Ye(y.component,V,U);else{if(it&128){y.suspense.unmount(V,U);return}_t&&lr(y,null,T,"beforeUnmount"),it&64?y.type.remove(y,T,V,O,U):K&&!K.hasOnce&&($!==Pe||J>0&&J&64)?se(K,T,V,!1,!0):($===Pe&&J&384||!B&&it&16)&&se(z,T,V),U&&He(y)}(Pt&&(At=Y&&Y.onVnodeUnmounted)||_t)&&ke(()=>{At&&tn(At,T,y),_t&&lr(y,null,T,"unmounted")},V)},He=y=>{const{type:T,el:V,anchor:U,transition:B}=y;if(T===Pe){xe(V,U);return}if(T===ba){q(y);return}const $=()=>{s(V),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(y.shapeFlag&1&&B&&!B.persisted){const{leave:Y,delayLeave:G}=B,z=()=>Y(V,$);G?G(y.el,$,z):z()}else $()},xe=(y,T)=>{let V;for(;y!==T;)V=m(y),s(y),y=V;s(T)},Ye=(y,T,V)=>{const{bum:U,scope:B,job:$,subTree:Y,um:G,m:z,a:K}=y;Dc(z),Dc(K),U&&Fi(U),B.stop(),$&&($.flags|=8,Dt(Y,y,T,V)),G&&ke(G,T),ke(()=>{y.isUnmounted=!0},T)},se=(y,T,V,U=!1,B=!1,$=0)=>{for(let Y=$;Y<y.length;Y++)Dt(y[Y],T,V,U,B)},L=y=>{if(y.shapeFlag&6)return L(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const T=m(y.anchor||y.el),V=T&&T[f_];return V?m(V):T};let k=!1;const R=(y,T,V)=>{y==null?T._vnode&&Dt(T._vnode,null,null,!0):C(T._vnode||null,y,T,null,null,null,V),T._vnode=y,k||(k=!0,Ac(),ud(),k=!1)},O={p:C,um:Dt,m:Ht,r:He,mt:Mt,mc:v,pc:gt,pbc:S,n:L,o:e};return{render:R,hydrate:void 0,createApp:x_(R)}}function Aa({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function ur({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function j_(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Dd(e,t,n=!1){const r=e.children,s=t.children;if(ct(r)&&ct(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=Mn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&Dd(a,l)),l.type===Mo&&l.patchFlag!==-1&&(l.el=a.el),l.type===Kn&&!l.el&&(l.el=a.el)}}function B_(e){const t=e.slice(),n=[0];let r,s,i,a,l;const u=e.length;for(r=0;r<u;r++){const h=e[r];if(h!==0){if(s=n[n.length-1],e[s]<h){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<h?i=l+1:a=l;h<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function xd(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:xd(t)}function Dc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const q_=Symbol.for("v-scx"),H_=()=>Ge(q_);function an(e,t,n){return Od(e,t,n)}function Od(e,t,n=Lt){const{immediate:r,deep:s,flush:i,once:a}=n,l=we({},n),u=t&&r||!t&&i!=="post";let h;if(Ys){if(i==="sync"){const _=H_();h=_.__watcherHandles||(_.__watcherHandles=[])}else if(!u){const _=()=>{};return _.stop=on,_.resume=on,_.pause=on,_}}const f=Re;l.call=(_,A,C)=>dn(_,f,A,C);let p=!1;i==="post"?l.scheduler=_=>{ke(_,f&&f.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(_,A)=>{A?_():Bl(_)}),l.augmentJob=_=>{t&&(_.flags|=4),p&&(_.flags|=2,f&&(_.id=f.uid,_.i=f))};const m=a_(e,t,l);return Ys&&(h?h.push(m):u&&m()),m}function z_(e,t,n){const r=this.proxy,s=Jt(e)?e.includes(".")?Nd(r,e):()=>r[e]:e.bind(r,r);let i;dt(t)?i=t:(i=t.handler,n=t);const a=hi(this),l=Od(s,i.bind(r),n);return a(),l}function Nd(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const K_=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${zn(t)}Modifiers`]||e[`${Tr(t)}Modifiers`];function G_(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Lt;let s=n;const i=t.startsWith("update:"),a=i&&K_(r,t.slice(7));a&&(a.trim&&(s=n.map(f=>Jt(f)?f.trim():f)),a.number&&(s=n.map(Qi)));let l,u=r[l=ya(t)]||r[l=ya(zn(t))];!u&&i&&(u=r[l=ya(Tr(t))]),u&&dn(u,e,6,s);const h=r[l+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,dn(h,e,6,s)}}const W_=new WeakMap;function Md(e,t,n=!1){const r=n?W_:t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!dt(e)){const u=h=>{const f=Md(h,t,!0);f&&(l=!0,we(a,f))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!i&&!l?($t(e)&&r.set(e,null),null):(ct(i)?i.forEach(u=>a[u]=null):we(a,i),$t(e)&&r.set(e,a),a)}function No(e,t){return!e||!Ro(t)?!1:(t=t.slice(2).replace(/Once$/,""),St(e,t[0].toLowerCase()+t.slice(1))||St(e,Tr(t))||St(e,t))}function xc(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:u,render:h,renderCache:f,props:p,data:m,setupState:_,ctx:A,inheritAttrs:C}=e,D=Zi(e);let M,H;try{if(n.shapeFlag&4){const q=s||r,rt=q;M=sn(h.call(rt,q,f,p,_,m,A)),H=l}else{const q=t;M=sn(q.length>1?q(p,{attrs:l,slots:a,emit:u}):q(p,null)),H=t.props?l:Q_(l)}}catch(q){Ls.length=0,xo(q,e,1),M=$e(Kn)}let Q=M;if(H&&C!==!1){const q=Object.keys(H),{shapeFlag:rt}=Q;q.length&&rt&7&&(i&&q.some(Dl)&&(H=X_(H,i)),Q=zr(Q,H,!1,!0))}return n.dirs&&(Q=zr(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&ql(Q,n.transition),M=Q,Zi(D),M}const Q_=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ro(n))&&((t||(t={}))[n]=e[n]);return t},X_=(e,t)=>{const n={};for(const r in e)(!Dl(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Y_(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:u}=t,h=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?Oc(r,a,h):!!a;if(u&8){const f=t.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(a[m]!==r[m]&&!No(h,m))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?Oc(r,a,h):!0:!!a;return!1}function Oc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!No(n,i))return!0}return!1}function J_({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const kd=e=>e.__isSuspense;function Z_(e,t){t&&t.pendingBranch?ct(e)?t.effects.push(...e):t.effects.push(e):c_(e)}const Pe=Symbol.for("v-fgt"),Mo=Symbol.for("v-txt"),Kn=Symbol.for("v-cmt"),ba=Symbol.for("v-stc"),Ls=[];let Le=null;function Vt(e=!1){Ls.push(Le=e?null:[])}function ty(){Ls.pop(),Le=Ls[Ls.length-1]||null}let Xs=1;function no(e,t=!1){Xs+=e,e<0&&Le&&t&&(Le.hasOnce=!0)}function Ld(e){return e.dynamicChildren=Xs>0?Le||Lr:null,ty(),Xs>0&&Le&&Le.push(e),e}function xt(e,t,n,r,s,i){return Ld(W(e,t,n,r,s,i,!0))}function ey(e,t,n,r,s){return Ld($e(e,t,n,r,s,!0))}function ro(e){return e?e.__v_isVNode===!0:!1}function Ts(e,t){return e.type===t.type&&e.key===t.key}const $d=({key:e})=>e??null,Ui=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Jt(e)||ee(e)||dt(e)?{i:je,r:e,k:t,f:!!n}:e:null);function W(e,t=null,n=null,r=0,s=null,i=e===Pe?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$d(t),ref:t&&Ui(t),scopeId:hd,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:je};return l?(Kl(u,n),i&128&&e.normalize(u)):n&&(u.shapeFlag|=Jt(n)?8:16),Xs>0&&!a&&Le&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&Le.push(u),u}const $e=ny;function ny(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===A_)&&(e=Kn),ro(e)){const l=zr(e,t,!0);return n&&Kl(l,n),Xs>0&&!i&&Le&&(l.shapeFlag&6?Le[Le.indexOf(e)]=l:Le.push(l)),l.patchFlag=-2,l}if(fy(e)&&(e=e.__vccOpts),t){t=ry(t);let{class:l,style:u}=t;l&&!Jt(l)&&(t.class=zs(l)),$t(u)&&(jl(u)&&!ct(u)&&(u=we({},u)),t.style=Nl(u))}const a=Jt(e)?1:kd(e)?128:d_(e)?64:$t(e)?4:dt(e)?2:0;return W(e,t,n,r,s,a,i,!0)}function ry(e){return e?jl(e)||bd(e)?we({},e):e:null}function zr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:u}=e,h=t?sy(s||{},t):s,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&$d(h),ref:t&&t.ref?n&&i?ct(i)?i.concat(Ui(t)):[i,Ui(t)]:Ui(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Pe?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&zr(e.ssContent),ssFallback:e.ssFallback&&zr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&r&&ql(f,u.clone(f)),f}function hr(e=" ",t=0){return $e(Mo,null,e,t)}function _e(e="",t=!1){return t?(Vt(),ey(Kn,null,e)):$e(Kn,null,e)}function sn(e){return e==null||typeof e=="boolean"?$e(Kn):ct(e)?$e(Pe,null,e.slice()):ro(e)?Mn(e):$e(Mo,null,String(e))}function Mn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:zr(e)}function Kl(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ct(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Kl(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!bd(t)?t._ctx=je:s===3&&je&&(je.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else dt(t)?(t={default:t,_ctx:je},n=32):(t=String(t),r&64?(n=16,t=[hr(t)]):n=8);e.children=t,e.shapeFlag|=n}function sy(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=zs([t.class,r.class]));else if(s==="style")t.style=Nl([t.style,r.style]);else if(Ro(s)){const i=t[s],a=r[s];a&&i!==a&&!(ct(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function tn(e,t,n,r=null){dn(e,t,7,[n,r])}const iy=wd();let oy=0;function ay(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||iy,i={uid:oy++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ng(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Sd(r,s),emitsOptions:Md(r,s),emit:null,emitted:null,propsDefaults:Lt,inheritAttrs:r.inheritAttrs,ctx:Lt,data:Lt,props:Lt,attrs:Lt,slots:Lt,refs:Lt,setupState:Lt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=G_.bind(null,i),e.ce&&e.ce(i),i}let Re=null;const Fd=()=>Re||je;let so,Za;{const e=Po(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};so=t("__VUE_INSTANCE_SETTERS__",n=>Re=n),Za=t("__VUE_SSR_SETTERS__",n=>Ys=n)}const hi=e=>{const t=Re;return so(e),e.scope.on(),()=>{e.scope.off(),so(t)}},Nc=()=>{Re&&Re.scope.off(),so(null)};function Ud(e){return e.vnode.shapeFlag&4}let Ys=!1;function ly(e,t=!1,n=!1){t&&Za(t);const{props:r,children:s}=e.vnode,i=Ud(e);O_(e,r,i,t),L_(e,s,n||t);const a=i?uy(e,t):void 0;return t&&Za(!1),a}function uy(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,b_);const{setup:r}=n;if(r){En();const s=e.setupContext=r.length>1?hy(e):null,i=hi(e),a=ci(r,e,0,[e.props,s]),l=kf(a);if(Tn(),i(),(l||e.sp)&&!Ms(e)&&dd(e),l){if(a.then(Nc,Nc),t)return a.then(u=>{Mc(e,u)}).catch(u=>{xo(u,e,0)});e.asyncDep=a}else Mc(e,a)}else jd(e)}function Mc(e,t,n){dt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:$t(t)&&(e.setupState=od(t)),jd(e)}function jd(e,t,n){const r=e.type;e.render||(e.render=r.render||on);{const s=hi(e);En();try{R_(e)}finally{Tn(),s()}}}const cy={get(e,t){return Ee(e,"get",""),e[t]}};function hy(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,cy),slots:e.slots,emit:e.emit,expose:t}}function ko(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(od(t_(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ks)return ks[n](e)},has(t,n){return n in t||n in ks}})):e.proxy}function fy(e){return dt(e)&&"__vccOpts"in e}const pt=(e,t)=>i_(e,t,Ys);function Bd(e,t,n){try{no(-1);const r=arguments.length;return r===2?$t(t)&&!ct(t)?ro(t)?$e(e,null,[t]):$e(e,t):$e(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ro(n)&&(n=[n]),$e(e,t,n))}finally{no(1)}}const dy="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tl;const kc=typeof window<"u"&&window.trustedTypes;if(kc)try{tl=kc.createPolicy("vue",{createHTML:e=>e})}catch{}const qd=tl?e=>tl.createHTML(e):e=>e,py="http://www.w3.org/2000/svg",my="http://www.w3.org/1998/Math/MathML",_n=typeof document<"u"?document:null,Lc=_n&&_n.createElement("template"),gy={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?_n.createElementNS(py,e):t==="mathml"?_n.createElementNS(my,e):n?_n.createElement(e,{is:n}):_n.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>_n.createTextNode(e),createComment:e=>_n.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>_n.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Lc.innerHTML=qd(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=Lc.content;if(r==="svg"||r==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},_y=Symbol("_vtc");function yy(e,t,n){const r=e[_y];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const $c=Symbol("_vod"),vy=Symbol("_vsh"),Ey=Symbol(""),Ty=/(?:^|;)\s*display\s*:/;function wy(e,t,n){const r=e.style,s=Jt(n);let i=!1;if(n&&!s){if(t)if(Jt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&ji(r,l,"")}else for(const a in t)n[a]==null&&ji(r,a,"");for(const a in n)a==="display"&&(i=!0),ji(r,a,n[a])}else if(s){if(t!==n){const a=r[Ey];a&&(n+=";"+a),r.cssText=n,i=Ty.test(n)}}else t&&e.removeAttribute("style");$c in e&&(e[$c]=i?r.display:"",e[vy]&&(r.display="none"))}const Fc=/\s*!important$/;function ji(e,t,n){if(ct(n))n.forEach(r=>ji(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Iy(e,t);Fc.test(n)?e.setProperty(Tr(r),n.replace(Fc,""),"important"):e[r]=n}}const Uc=["Webkit","Moz","ms"],Ra={};function Iy(e,t){const n=Ra[t];if(n)return n;let r=zn(t);if(r!=="filter"&&r in e)return Ra[t]=r;r=Ff(r);for(let s=0;s<Uc.length;s++){const i=Uc[s]+r;if(i in e)return Ra[t]=i}return t}const jc="http://www.w3.org/1999/xlink";function Bc(e,t,n,r,s,i=Dg(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(jc,t.slice(6,t.length)):e.setAttributeNS(jc,t,n):n==null||i&&!jf(n)?e.removeAttribute(t):e.setAttribute(t,i?"":fn(n)?String(n):n)}function qc(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?qd(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=jf(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function dr(e,t,n,r){e.addEventListener(t,n,r)}function Ay(e,t,n,r){e.removeEventListener(t,n,r)}const Hc=Symbol("_vei");function by(e,t,n,r,s=null){const i=e[Hc]||(e[Hc]={}),a=i[t];if(r&&a)a.value=r;else{const[l,u]=Ry(t);if(r){const h=i[t]=Py(r,s);dr(e,l,h,u)}else a&&(Ay(e,l,a,u),i[t]=void 0)}}const zc=/(?:Once|Passive|Capture)$/;function Ry(e){let t;if(zc.test(e)){t={};let r;for(;r=e.match(zc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Tr(e.slice(2)),t]}let Sa=0;const Sy=Promise.resolve(),Cy=()=>Sa||(Sy.then(()=>Sa=0),Sa=Date.now());function Py(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;dn(Vy(r,n.value),t,5,[r])};return n.value=e,n.attached=Cy(),n}function Vy(e,t){if(ct(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Kc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Dy=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?yy(e,r,a):t==="style"?wy(e,n,r):Ro(t)?Dl(t)||by(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):xy(e,t,r,a))?(qc(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Bc(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Jt(r))?qc(e,zn(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Bc(e,t,r,a))};function xy(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Kc(t)&&dt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Kc(t)&&Jt(n)?!1:t in e}const io=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ct(t)?n=>Fi(t,n):t};function Oy(e){e.target.composing=!0}function Gc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Br=Symbol("_assign"),ce={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Br]=io(s);const i=r||s.props&&s.props.type==="number";dr(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=Qi(l)),e[Br](l)}),n&&dr(e,"change",()=>{e.value=e.value.trim()}),t||(dr(e,"compositionstart",Oy),dr(e,"compositionend",Gc),dr(e,"change",Gc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[Br]=io(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Qi(e.value):e.value,u=t??"";l!==u&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===u)||(e.value=u))}},Ny={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=So(t);dr(e,"change",()=>{const i=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>n?Qi(oo(a)):oo(a));e[Br](e.multiple?s?new Set(i):i:i[0]),e._assigning=!0,Ws(()=>{e._assigning=!1})}),e[Br]=io(r)},mounted(e,{value:t}){Wc(e,t)},beforeUpdate(e,t,n){e[Br]=io(n)},updated(e,{value:t}){e._assigning||Wc(e,t)}};function Wc(e,t){const n=e.multiple,r=ct(t);if(!(n&&!r&&!So(t))){for(let s=0,i=e.options.length;s<i;s++){const a=e.options[s],l=oo(a);if(n)if(r){const u=typeof l;u==="string"||u==="number"?a.selected=t.some(h=>String(h)===String(l)):a.selected=Og(t,l)>-1}else a.selected=t.has(l);else if(Vo(oo(a),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function oo(e){return"_value"in e?e._value:e.value}const My=["ctrl","shift","alt","meta"],ky={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>My.some(n=>e[`${n}Key`]&&!t.includes(n))},ws=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=((s,...i)=>{for(let a=0;a<t.length;a++){const l=ky[t[a]];if(l&&l(s,t))return}return e(s,...i)}))},Ly=we({patchProp:Dy},gy);let Qc;function $y(){return Qc||(Qc=F_(Ly))}const Fy=((...e)=>{const t=$y().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=jy(r);if(!s)return;const i=t._component;!dt(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,Uy(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t});function Uy(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function jy(e){return Jt(e)?document.querySelector(e):e}function Xc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xc(Object(n),!0).forEach(function(r){By(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xc(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function By(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(e).reduce((n,r)=>(t.includes(r)||(n[r]=at(e[r])),n),{})}function ao(e){return typeof e=="function"}function qy(e){return gr(e)||wn(e)}function Hd(e,t,n){let r=e;const s=t.split(".");for(let i=0;i<s.length;i++){if(!r[s[i]])return n;r=r[s[i]]}return r}function Ca(e,t,n){return pt(()=>e.some(r=>Hd(t,r,{[n]:!1})[n]))}function Jc(e,t,n){return pt(()=>e.reduce((r,s)=>{const i=Hd(t,s,{[n]:!1})[n]||[];return r.concat(i)},[]))}function zd(e,t,n,r){return e.call(r,at(t),at(n),r)}function Kd(e){return e.$valid!==void 0?!e.$valid:!e}function Hy(e,t,n,r,s,i,a){let{$lazy:l,$rewardEarly:u}=s,h=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],f=arguments.length>8?arguments[8]:void 0,p=arguments.length>9?arguments[9]:void 0,m=arguments.length>10?arguments[10]:void 0;const _=Ot(!!r.value),A=Ot(0);n.value=!1;const C=an([t,r].concat(h,m),()=>{if(l&&!r.value||u&&!p.value&&!n.value)return;let D;try{D=zd(e,t,f,a)}catch(M){D=Promise.reject(M)}A.value++,n.value=!!A.value,_.value=!1,Promise.resolve(D).then(M=>{A.value--,n.value=!!A.value,i.value=M,_.value=Kd(M)}).catch(M=>{A.value--,n.value=!!A.value,i.value=M,_.value=!0})},{immediate:!0,deep:typeof t=="object"});return{$invalid:_,$unwatch:C}}function zy(e,t,n,r,s,i,a,l){let{$lazy:u,$rewardEarly:h}=r;const f=()=>({}),p=pt(()=>{if(u&&!n.value||h&&!l.value)return!1;let m=!0;try{const _=zd(e,t,a,i);s.value=_,m=Kd(_)}catch(_){s.value=_}return m});return{$unwatch:f,$invalid:p}}function Ky(e,t,n,r,s,i,a,l,u,h,f){const p=Ot(!1),m=e.$params||{},_=Ot(null);let A,C;e.$async?{$invalid:A,$unwatch:C}=Hy(e.$validator,t,p,n,r,_,s,e.$watchTargets,u,h,f):{$invalid:A,$unwatch:C}=zy(e.$validator,t,n,r,_,s,u,h);const D=e.$message;return{$message:ao(D)?pt(()=>D(Yc({$pending:p,$invalid:A,$params:Yc(m),$model:t,$response:_,$validator:i,$propertyPath:l,$property:a}))):D||"",$params:m,$pending:p,$invalid:A,$response:_,$unwatch:C}}function Gy(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=at(e),n=Object.keys(t),r={},s={},i={};let a=null;return n.forEach(l=>{const u=t[l];switch(!0){case ao(u.$validator):r[l]=u;break;case ao(u):r[l]={$validator:u};break;case l==="$validationGroups":a=u;break;case l.startsWith("$"):i[l]=u;break;default:s[l]=u}}),{rules:r,nestedValidators:s,config:i,validationGroups:a}}const Wy="__root";function Qy(e,t,n,r,s,i,a,l,u){const h=Object.keys(e),f=r.get(s,e),p=Ot(!1),m=Ot(!1),_=Ot(0);if(f){if(!f.$partial)return f;f.$unwatch(),p.value=f.$dirty.value}const A={$dirty:p,$path:s,$touch:()=>{p.value||(p.value=!0)},$reset:()=>{p.value&&(p.value=!1)},$commit:()=>{}};return h.length?(h.forEach(C=>{A[C]=Ky(e[C],t,A.$dirty,i,a,C,n,s,u,m,_)}),A.$externalResults=pt(()=>l.value?[].concat(l.value).map((C,D)=>({$propertyPath:s,$property:n,$validator:"$externalResults",$uid:`${s}-externalResult-${D}`,$message:C,$params:{},$response:null,$pending:!1})):[]),A.$invalid=pt(()=>{const C=h.some(D=>at(A[D].$invalid));return m.value=C,!!A.$externalResults.value.length||C}),A.$pending=pt(()=>h.some(C=>at(A[C].$pending))),A.$error=pt(()=>A.$dirty.value?A.$pending.value||A.$invalid.value:!1),A.$silentErrors=pt(()=>h.filter(C=>at(A[C].$invalid)).map(C=>{const D=A[C];return wr({$propertyPath:s,$property:n,$validator:C,$uid:`${s}-${C}`,$message:D.$message,$params:D.$params,$response:D.$response,$pending:D.$pending})}).concat(A.$externalResults.value)),A.$errors=pt(()=>A.$dirty.value?A.$silentErrors.value:[]),A.$unwatch=()=>h.forEach(C=>{A[C].$unwatch()}),A.$commit=()=>{m.value=!0,_.value=Date.now()},r.set(s,e,A),A):(f&&r.set(s,e,A),A)}function Xy(e,t,n,r,s,i,a){const l=Object.keys(e);return l.length?l.reduce((u,h)=>(u[h]=el({validations:e[h],state:t,key:h,parentKey:n,resultsCache:r,globalConfig:s,instance:i,externalResults:a}),u),{}):{}}function Yy(e,t,n){const r=pt(()=>[t,n].filter(A=>A).reduce((A,C)=>A.concat(Object.values(at(C))),[])),s=pt({get(){return e.$dirty.value||(r.value.length?r.value.every(A=>A.$dirty):!1)},set(A){e.$dirty.value=A}}),i=pt(()=>{const A=at(e.$silentErrors)||[],C=r.value.filter(D=>(at(D).$silentErrors||[]).length).reduce((D,M)=>D.concat(...M.$silentErrors),[]);return A.concat(C)}),a=pt(()=>{const A=at(e.$errors)||[],C=r.value.filter(D=>(at(D).$errors||[]).length).reduce((D,M)=>D.concat(...M.$errors),[]);return A.concat(C)}),l=pt(()=>r.value.some(A=>A.$invalid)||at(e.$invalid)||!1),u=pt(()=>r.value.some(A=>at(A.$pending))||at(e.$pending)||!1),h=pt(()=>r.value.some(A=>A.$dirty)||r.value.some(A=>A.$anyDirty)||s.value),f=pt(()=>s.value?u.value||l.value:!1),p=()=>{e.$touch(),r.value.forEach(A=>{A.$touch()})},m=()=>{e.$commit(),r.value.forEach(A=>{A.$commit()})},_=()=>{e.$reset(),r.value.forEach(A=>{A.$reset()})};return r.value.length&&r.value.every(A=>A.$dirty)&&p(),{$dirty:s,$errors:a,$invalid:l,$anyDirty:h,$error:f,$pending:u,$touch:p,$reset:_,$silentErrors:i,$commit:m}}function el(e){let{validations:t,state:n,key:r,parentKey:s,childResults:i,resultsCache:a,globalConfig:l={},instance:u,externalResults:h}=e;const f=s?`${s}.${r}`:r,{rules:p,nestedValidators:m,config:_,validationGroups:A}=Gy(t),C=kn(kn({},l),_),D=r?pt(()=>{const Tt=at(n);return Tt?at(Tt[r]):void 0}):n,M=kn({},at(h)||{}),H=pt(()=>{const Tt=at(h);return r?Tt?at(Tt[r]):void 0:Tt}),Q=Qy(p,D,r,a,f,C,u,H,n),q=Xy(m,D,f,a,C,u,H),rt={};A&&Object.entries(A).forEach(Tt=>{let[Ht,Dt]=Tt;rt[Ht]={$invalid:Ca(Dt,q,"$invalid"),$error:Ca(Dt,q,"$error"),$pending:Ca(Dt,q,"$pending"),$errors:Jc(Dt,q,"$errors"),$silentErrors:Jc(Dt,q,"$silentErrors")}});const{$dirty:lt,$errors:I,$invalid:v,$anyDirty:w,$error:S,$pending:b,$touch:P,$reset:E,$silentErrors:Mt,$commit:Zt}=Yy(Q,q,i),qt=r?pt({get:()=>at(D),set:Tt=>{lt.value=!0;const Ht=at(n),Dt=at(h);Dt&&(Dt[r]=M[r]),ee(Ht[r])?Ht[r].value=Tt:Ht[r]=Tt}}):null;r&&C.$autoDirty&&an(D,()=>{lt.value||P();const Tt=at(h);Tt&&(Tt[r]=M[r])},{flush:"sync"});async function Et(){return P(),C.$rewardEarly&&(Zt(),await Ws()),await Ws(),new Promise(Tt=>{if(!b.value)return Tt(!v.value);const Ht=an(b,()=>{Tt(!v.value),Ht()})})}function gt(Tt){return(i.value||{})[Tt]}function re(){ee(h)?h.value=M:Object.keys(M).length===0?Object.keys(h).forEach(Tt=>{delete h[Tt]}):Object.assign(h,M)}return wr(kn(kn(kn({},Q),{},{$model:qt,$dirty:lt,$error:S,$errors:I,$invalid:v,$anyDirty:w,$pending:b,$touch:P,$reset:E,$path:f||Wy,$silentErrors:Mt,$validate:Et,$commit:Zt},i&&{$getResultsForChild:gt,$clearExternalResults:re,$validationGroups:rt}),q))}class Jy{constructor(){this.storage=new Map}set(t,n,r){this.storage.set(t,{rules:n,result:r})}checkRulesValidity(t,n,r){const s=Object.keys(r),i=Object.keys(n);return i.length!==s.length||!i.every(l=>s.includes(l))?!1:i.every(l=>n[l].$params?Object.keys(n[l].$params).every(u=>at(r[l].$params[u])===at(n[l].$params[u])):!0)}get(t,n){const r=this.storage.get(t);if(!r)return;const{rules:s,result:i}=r,a=this.checkRulesValidity(t,n,s),l=i.$unwatch?i.$unwatch:()=>({});return a?i:{$dirty:i.$dirty,$partial:!0,$unwatch:l}}}const Bi={COLLECT_ALL:!0,COLLECT_NONE:!1},Zc=Symbol("vuelidate#injectChildResults"),th=Symbol("vuelidate#removeChildResults");function Zy(e){let{$scope:t,instance:n}=e;const r={},s=Ot([]),i=pt(()=>s.value.reduce((f,p)=>(f[p]=at(r[p]),f),{}));function a(f,p){let{$registerAs:m,$scope:_,$stopPropagation:A}=p;A||t===Bi.COLLECT_NONE||_===Bi.COLLECT_NONE||t!==Bi.COLLECT_ALL&&t!==_||(r[m]=f,s.value.push(m))}n.__vuelidateInjectInstances=[].concat(n.__vuelidateInjectInstances||[],a);function l(f){s.value=s.value.filter(p=>p!==f),delete r[f]}n.__vuelidateRemoveInstances=[].concat(n.__vuelidateRemoveInstances||[],l);const u=Ge(Zc,[]);jr(Zc,n.__vuelidateInjectInstances);const h=Ge(th,[]);return jr(th,n.__vuelidateRemoveInstances),{childResults:i,sendValidationResultsToParent:u,removeValidationResultsFromParent:h}}function Gd(e){return new Proxy(e,{get(t,n){return typeof t[n]=="object"?Gd(t[n]):pt(()=>t[n])}})}let eh=0;function tv(e,t){var n;let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(r=e,e=void 0,t=void 0);let{$registerAs:s,$scope:i=Bi.COLLECT_ALL,$stopPropagation:a,$externalResults:l,currentVueInstance:u}=r;const h=u||((n=Fd())===null||n===void 0?void 0:n.proxy),f=h?h.$options:{};s||(eh+=1,s=`_vuelidate_${eh}`);const p=Ot({}),m=new Jy,{childResults:_,sendValidationResultsToParent:A,removeValidationResultsFromParent:C}=h?Zy({$scope:i,instance:h}):{childResults:Ot({})};if(!e&&f.validations){const D=f.validations;t=Ot({}),gd(()=>{t.value=h,an(()=>ao(D)?D.call(t.value,new Gd(t.value)):D,M=>{p.value=el({validations:M,state:t,childResults:_,resultsCache:m,globalConfig:r,instance:h,externalResults:l||h.vuelidateExternalResults})},{immediate:!0})}),r=f.validationsConfig||r}else{const D=ee(e)||qy(e)?e:wr(e||{});an(D,M=>{p.value=el({validations:M,state:t,childResults:_,resultsCache:m,globalConfig:r,instance:h??{},externalResults:l})},{immediate:!0})}return h&&(A.forEach(D=>D(p,{$registerAs:s,$scope:i,$stopPropagation:a})),yd(()=>C.forEach(D=>D(s)))),pt(()=>kn(kn({},at(p.value)),_.value))}function nh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Js(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nh(Object(n),!0).forEach(function(r){ev(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ev(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lo(e){return typeof e=="function"}function nl(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Lo(e){return lo(e.$validator)?Js({},e):{$validator:e}}function Wd(e){return typeof e=="object"?e.$valid:e}function Qd(e){return e.$validator||e}function nv(e,t){if(!nl(e))throw new Error(`[@vuelidate/validators]: First parameter to "withParams" should be an object, provided ${typeof e}`);if(!nl(t)&&!lo(t))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const n=Lo(t);return n.$params=Js(Js({},n.$params||{}),e),n}function rv(e,t){if(!lo(e)&&typeof at(e)!="string")throw new Error(`[@vuelidate/validators]: First parameter to "withMessage" should be string or a function returning a string, provided ${typeof e}`);if(!nl(t)&&!lo(t))throw new Error("[@vuelidate/validators]: Validator must be a function or object with $validator parameter");const n=Lo(t);return n.$message=e,n}function sv(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=Lo(e);return Js(Js({},n),{},{$async:!0,$watchTargets:t})}function iv(e){return{$validator(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return at(t).reduce((i,a,l)=>{const u=Object.entries(a).reduce((h,f)=>{let[p,m]=f;const _=e[p]||{},A=Object.entries(_).reduce((C,D)=>{let[M,H]=D;const q=Qd(H).call(this,m,a,l,...r),rt=Wd(q);if(C.$data[M]=q,C.$data.$invalid=!rt||!!C.$data.$invalid,C.$data.$error=C.$data.$invalid,!rt){let lt=H.$message||"";const I=H.$params||{};typeof lt=="function"&&(lt=lt({$pending:!1,$invalid:!rt,$params:I,$model:m,$response:q})),C.$errors.push({$property:p,$message:lt,$params:I,$response:q,$model:m,$pending:!1,$validator:M})}return{$valid:C.$valid&&rt,$data:C.$data,$errors:C.$errors}},{$valid:!0,$data:{},$errors:[]});return h.$data[p]=A.$data,h.$errors[p]=A.$errors,{$valid:h.$valid&&A.$valid,$data:h.$data,$errors:h.$errors}},{$valid:!0,$data:{},$errors:{}});return{$valid:i.$valid&&u.$valid,$data:i.$data.concat(u.$data),$errors:i.$errors.concat(u.$errors)}},{$valid:!0,$data:[],$errors:[]})},$message:t=>{let{$response:n}=t;return n?n.$errors.map(r=>Object.values(r).map(s=>s.map(i=>i.$message)).reduce((s,i)=>s.concat(i),[])):[]}}}const Gl=e=>{if(e=at(e),Array.isArray(e))return!!e.length;if(e==null)return!1;if(e===!1)return!0;if(e instanceof Date)return!isNaN(e.getTime());if(typeof e=="object"){for(let t in e)return!0;return!1}return!!String(e).length},ov=e=>(e=at(e),Array.isArray(e)?e.length:typeof e=="object"?Object.keys(e).length:String(e).length);function tr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=>(r=at(r),!Gl(r)||t.every(s=>(s.lastIndex=0,s.test(r))))}var Pa=Object.freeze({__proto__:null,forEach:iv,len:ov,normalizeValidatorObject:Lo,regex:tr,req:Gl,unwrap:at,unwrapNormalizedValidator:Qd,unwrapValidatorResponse:Wd,withAsync:sv,withMessage:rv,withParams:nv});tr(/^[a-zA-Z]*$/);tr(/^[a-zA-Z0-9]*$/);tr(/^\d*(\.\d+)?$/);const av=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;tr(av);function lv(e){return typeof e=="string"&&(e=e.trim()),Gl(e)}var uv={$validator:lv,$message:"Value is required",$params:{type:"required"}};const cv=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;tr(cv);tr(/(^[0-9]*$)|(^-[0-9]+$)/);tr(/^[-]?\d*(\.\d+)?$/);const hv=()=>{};var rh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},fv=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Yd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,h=u?e[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(m=64)),r.push(n[f],n[p],n[m],n[_])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):fv(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const p=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new dv;const m=i<<2|l>>4;if(r.push(m),h!==64){const _=l<<4&240|h>>2;if(r.push(_),p!==64){const A=h<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class dv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pv=function(e){const t=Xd(e);return Yd.encodeByteArray(t,!0)},uo=function(e){return pv(e).replace(/\./g,"")},mv=function(e){try{return Yd.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=()=>gv().__FIREBASE_DEFAULTS__,yv=()=>{if(typeof process>"u"||typeof rh>"u")return;const e=rh.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},vv=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&mv(e[1]);return t&&JSON.parse(t)},Wl=()=>{try{return hv()||_v()||yv()||vv()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Ev=e=>Wl()?.emulatorHosts?.[e],Tv=e=>{const t=Ev(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Jd=()=>Wl()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Iv(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[uo(JSON.stringify(n)),uo(JSON.stringify(a)),""].join(".")}const $s={};function bv(){const e={prod:[],emulator:[]};for(const t of Object.keys($s))$s[t]?e.emulator.push(t):e.prod.push(t);return e}function Rv(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let sh=!1;function Sv(e,t){if(typeof window>"u"||typeof document>"u"||!Ql(window.location.host)||$s[e]===t||$s[e]||sh)return;$s[e]=t;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=bv().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{sh=!0,a()},m}function f(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=Rv(r),_=n("text"),A=document.getElementById(_)||document.createElement("span"),C=n("learnmore"),D=document.getElementById(C)||document.createElement("a"),M=n("preprendIcon"),H=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const Q=m.element;l(Q),f(D,C);const q=h();u(H,M),Q.append(H,A,D,q),document.body.appendChild(Q)}i?(A.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Pv(){const e=Wl()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vv(){return!Pv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dv(){try{return typeof indexedDB=="object"}catch{return!1}}function xv(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="FirebaseError";class ts extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Ov,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zd.prototype.create)}}class Zd{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?Nv(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new ts(s,l,r)}}function Nv(e,t){return e.replace(Mv,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Mv=/\{\$([^}]+)}/g;function co(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(ih(i)&&ih(a)){if(!co(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ih(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(e){return e&&e._delegate?e._delegate:e}class Zs{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new wv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if($v(t))try{this.getOrInitializeService({instanceIdentifier:fr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=fr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=fr){return this.instances.has(t)}getOptions(t=fr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(t),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&t(i,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Lv(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=fr){return this.component?this.component.multipleInstances?t:fr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lv(e){return e===fr?void 0:e}function $v(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new kv(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(It||(It={}));const Uv={debug:It.DEBUG,verbose:It.VERBOSE,info:It.INFO,warn:It.WARN,error:It.ERROR,silent:It.SILENT},jv=It.INFO,Bv={[It.DEBUG]:"log",[It.VERBOSE]:"log",[It.INFO]:"info",[It.WARN]:"warn",[It.ERROR]:"error"},qv=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=Bv[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class tp{constructor(t){this.name=t,this._logLevel=jv,this._logHandler=qv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in It))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Uv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,It.DEBUG,...t),this._logHandler(this,It.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,It.VERBOSE,...t),this._logHandler(this,It.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,It.INFO,...t),this._logHandler(this,It.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,It.WARN,...t),this._logHandler(this,It.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,It.ERROR,...t),this._logHandler(this,It.ERROR,...t)}}const Hv=(e,t)=>t.some(n=>e instanceof n);let oh,ah;function zv(){return oh||(oh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kv(){return ah||(ah=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ep=new WeakMap,rl=new WeakMap,np=new WeakMap,Va=new WeakMap,Xl=new WeakMap;function Gv(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(Un(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&ep.set(n,e)}).catch(()=>{}),Xl.set(t,e),t}function Wv(e){if(rl.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});rl.set(e,t)}let sl={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return rl.get(e);if(t==="objectStoreNames")return e.objectStoreNames||np.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Un(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Qv(e){sl=e(sl)}function Xv(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Da(this),t,...n);return np.set(r,t.sort?t.sort():[t]),Un(r)}:Kv().includes(e)?function(...t){return e.apply(Da(this),t),Un(ep.get(this))}:function(...t){return Un(e.apply(Da(this),t))}}function Yv(e){return typeof e=="function"?Xv(e):(e instanceof IDBTransaction&&Wv(e),Hv(e,zv())?new Proxy(e,sl):e)}function Un(e){if(e instanceof IDBRequest)return Gv(e);if(Va.has(e))return Va.get(e);const t=Yv(e);return t!==e&&(Va.set(e,t),Xl.set(t,e)),t}const Da=e=>Xl.get(e);function Jv(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=Un(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Un(a.result),u.oldVersion,u.newVersion,Un(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const Zv=["get","getKey","getAll","getAllKeys","count"],tE=["put","add","delete","clear"],xa=new Map;function lh(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(xa.get(t))return xa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=tE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Zv.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return xa.set(t,i),i}Qv(e=>({...e,get:(t,n,r)=>lh(t,n)||e.get(t,n,r),has:(t,n)=>!!lh(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nE(e){return e.getComponent()?.type==="VERSION"}const il="@firebase/app",uh="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new tp("@firebase/app"),rE="@firebase/app-compat",sE="@firebase/analytics-compat",iE="@firebase/analytics",oE="@firebase/app-check-compat",aE="@firebase/app-check",lE="@firebase/auth",uE="@firebase/auth-compat",cE="@firebase/database",hE="@firebase/data-connect",fE="@firebase/database-compat",dE="@firebase/functions",pE="@firebase/functions-compat",mE="@firebase/installations",gE="@firebase/installations-compat",_E="@firebase/messaging",yE="@firebase/messaging-compat",vE="@firebase/performance",EE="@firebase/performance-compat",TE="@firebase/remote-config",wE="@firebase/remote-config-compat",IE="@firebase/storage",AE="@firebase/storage-compat",bE="@firebase/firestore",RE="@firebase/ai",SE="@firebase/firestore-compat",CE="firebase",PE="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="[DEFAULT]",VE={[il]:"fire-core",[rE]:"fire-core-compat",[iE]:"fire-analytics",[sE]:"fire-analytics-compat",[aE]:"fire-app-check",[oE]:"fire-app-check-compat",[lE]:"fire-auth",[uE]:"fire-auth-compat",[cE]:"fire-rtdb",[hE]:"fire-data-connect",[fE]:"fire-rtdb-compat",[dE]:"fire-fn",[pE]:"fire-fn-compat",[mE]:"fire-iid",[gE]:"fire-iid-compat",[_E]:"fire-fcm",[yE]:"fire-fcm-compat",[vE]:"fire-perf",[EE]:"fire-perf-compat",[TE]:"fire-rc",[wE]:"fire-rc-compat",[IE]:"fire-gcs",[AE]:"fire-gcs-compat",[bE]:"fire-fst",[SE]:"fire-fst-compat",[RE]:"fire-vertex","fire-js":"fire-js",[CE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new Map,DE=new Map,al=new Map;function ch(e,t){try{e.container.addComponent(t)}catch(n){In.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function fo(e){const t=e.name;if(al.has(t))return In.debug(`There were multiple attempts to register component ${t}.`),!1;al.set(t,e);for(const n of ho.values())ch(n,e);for(const n of DE.values())ch(n,e);return!0}function xE(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function OE(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jn=new Zd("app","Firebase",NE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=PE;function rp(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:ol,automaticDataCollectionEnabled:!0,...t},s=r.name;if(typeof s!="string"||!s)throw jn.create("bad-app-name",{appName:String(s)});if(n||(n=Jd()),!n)throw jn.create("no-options");const i=ho.get(s);if(i){if(co(n,i.options)&&co(r,i.config))return i;throw jn.create("duplicate-app",{appName:s})}const a=new Fv(s);for(const u of al.values())a.addComponent(u);const l=new ME(n,r,a);return ho.set(s,l),l}function LE(e=ol){const t=ho.get(e);if(!t&&e===ol&&Jd())return rp();if(!t)throw jn.create("no-app",{appName:e});return t}function qr(e,t,n){let r=VE[e]??e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),In.warn(a.join(" "));return}fo(new Zs(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="firebase-heartbeat-database",FE=1,ti="firebase-heartbeat-store";let Oa=null;function sp(){return Oa||(Oa=Jv($E,FE,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ti)}catch(n){console.warn(n)}}}}).catch(e=>{throw jn.create("idb-open",{originalErrorMessage:e.message})})),Oa}async function UE(e){try{const n=(await sp()).transaction(ti),r=await n.objectStore(ti).get(ip(e));return await n.done,r}catch(t){if(t instanceof ts)In.warn(t.message);else{const n=jn.create("idb-get",{originalErrorMessage:t?.message});In.warn(n.message)}}}async function hh(e,t){try{const r=(await sp()).transaction(ti,"readwrite");await r.objectStore(ti).put(t,ip(e)),await r.done}catch(n){if(n instanceof ts)In.warn(n.message);else{const r=jn.create("idb-set",{originalErrorMessage:n?.message});In.warn(r.message)}}}function ip(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=1024,BE=30;class qE{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fh();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>BE){const s=KE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){In.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=fh(),{heartbeatsToSend:n,unsentEntries:r}=HE(this._heartbeatsCache.heartbeats),s=uo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return In.warn(t),""}}}function fh(){return new Date().toISOString().substring(0,10)}function HE(e,t=jE){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),dh(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),dh(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dv()?xv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UE(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return hh(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return hh(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function dh(e){return uo(JSON.stringify({version:2,heartbeats:e})).length}function KE(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(e){fo(new Zs("platform-logger",t=>new eE(t),"PRIVATE")),fo(new Zs("heartbeat",t=>new qE(t),"PRIVATE")),qr(il,uh,e),qr(il,uh,"esm2020"),qr("fire-js","")}GE("");var WE="firebase",QE="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(WE,QE,"app");var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bn,op;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,v){function w(){}w.prototype=v.prototype,I.F=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.D=function(S,b,P){for(var E=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)E[Mt-2]=arguments[Mt];return v.prototype[b].apply(S,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,v,w){w||(w=0);const S=Array(16);if(typeof v=="string")for(var b=0;b<16;++b)S[b]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(b=0;b<16;++b)S[b]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],b=I.g[2];let P=I.g[3],E;E=v+(P^w&(b^P))+S[0]+3614090360&4294967295,v=w+(E<<7&4294967295|E>>>25),E=P+(b^v&(w^b))+S[1]+3905402710&4294967295,P=v+(E<<12&4294967295|E>>>20),E=b+(w^P&(v^w))+S[2]+606105819&4294967295,b=P+(E<<17&4294967295|E>>>15),E=w+(v^b&(P^v))+S[3]+3250441966&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(P^w&(b^P))+S[4]+4118548399&4294967295,v=w+(E<<7&4294967295|E>>>25),E=P+(b^v&(w^b))+S[5]+1200080426&4294967295,P=v+(E<<12&4294967295|E>>>20),E=b+(w^P&(v^w))+S[6]+2821735955&4294967295,b=P+(E<<17&4294967295|E>>>15),E=w+(v^b&(P^v))+S[7]+4249261313&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(P^w&(b^P))+S[8]+1770035416&4294967295,v=w+(E<<7&4294967295|E>>>25),E=P+(b^v&(w^b))+S[9]+2336552879&4294967295,P=v+(E<<12&4294967295|E>>>20),E=b+(w^P&(v^w))+S[10]+4294925233&4294967295,b=P+(E<<17&4294967295|E>>>15),E=w+(v^b&(P^v))+S[11]+2304563134&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(P^w&(b^P))+S[12]+1804603682&4294967295,v=w+(E<<7&4294967295|E>>>25),E=P+(b^v&(w^b))+S[13]+4254626195&4294967295,P=v+(E<<12&4294967295|E>>>20),E=b+(w^P&(v^w))+S[14]+2792965006&4294967295,b=P+(E<<17&4294967295|E>>>15),E=w+(v^b&(P^v))+S[15]+1236535329&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(b^P&(w^b))+S[1]+4129170786&4294967295,v=w+(E<<5&4294967295|E>>>27),E=P+(w^b&(v^w))+S[6]+3225465664&4294967295,P=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(P^v))+S[11]+643717713&4294967295,b=P+(E<<14&4294967295|E>>>18),E=w+(P^v&(b^P))+S[0]+3921069994&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^P&(w^b))+S[5]+3593408605&4294967295,v=w+(E<<5&4294967295|E>>>27),E=P+(w^b&(v^w))+S[10]+38016083&4294967295,P=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(P^v))+S[15]+3634488961&4294967295,b=P+(E<<14&4294967295|E>>>18),E=w+(P^v&(b^P))+S[4]+3889429448&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^P&(w^b))+S[9]+568446438&4294967295,v=w+(E<<5&4294967295|E>>>27),E=P+(w^b&(v^w))+S[14]+3275163606&4294967295,P=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(P^v))+S[3]+4107603335&4294967295,b=P+(E<<14&4294967295|E>>>18),E=w+(P^v&(b^P))+S[8]+1163531501&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^P&(w^b))+S[13]+2850285829&4294967295,v=w+(E<<5&4294967295|E>>>27),E=P+(w^b&(v^w))+S[2]+4243563512&4294967295,P=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(P^v))+S[7]+1735328473&4294967295,b=P+(E<<14&4294967295|E>>>18),E=w+(P^v&(b^P))+S[12]+2368359562&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(w^b^P)+S[5]+4294588738&4294967295,v=w+(E<<4&4294967295|E>>>28),E=P+(v^w^b)+S[8]+2272392833&4294967295,P=v+(E<<11&4294967295|E>>>21),E=b+(P^v^w)+S[11]+1839030562&4294967295,b=P+(E<<16&4294967295|E>>>16),E=w+(b^P^v)+S[14]+4259657740&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^P)+S[1]+2763975236&4294967295,v=w+(E<<4&4294967295|E>>>28),E=P+(v^w^b)+S[4]+1272893353&4294967295,P=v+(E<<11&4294967295|E>>>21),E=b+(P^v^w)+S[7]+4139469664&4294967295,b=P+(E<<16&4294967295|E>>>16),E=w+(b^P^v)+S[10]+3200236656&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^P)+S[13]+681279174&4294967295,v=w+(E<<4&4294967295|E>>>28),E=P+(v^w^b)+S[0]+3936430074&4294967295,P=v+(E<<11&4294967295|E>>>21),E=b+(P^v^w)+S[3]+3572445317&4294967295,b=P+(E<<16&4294967295|E>>>16),E=w+(b^P^v)+S[6]+76029189&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^P)+S[9]+3654602809&4294967295,v=w+(E<<4&4294967295|E>>>28),E=P+(v^w^b)+S[12]+3873151461&4294967295,P=v+(E<<11&4294967295|E>>>21),E=b+(P^v^w)+S[15]+530742520&4294967295,b=P+(E<<16&4294967295|E>>>16),E=w+(b^P^v)+S[2]+3299628645&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(b^(w|~P))+S[0]+4096336452&4294967295,v=w+(E<<6&4294967295|E>>>26),E=P+(w^(v|~b))+S[7]+1126891415&4294967295,P=v+(E<<10&4294967295|E>>>22),E=b+(v^(P|~w))+S[14]+2878612391&4294967295,b=P+(E<<15&4294967295|E>>>17),E=w+(P^(b|~v))+S[5]+4237533241&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~P))+S[12]+1700485571&4294967295,v=w+(E<<6&4294967295|E>>>26),E=P+(w^(v|~b))+S[3]+2399980690&4294967295,P=v+(E<<10&4294967295|E>>>22),E=b+(v^(P|~w))+S[10]+4293915773&4294967295,b=P+(E<<15&4294967295|E>>>17),E=w+(P^(b|~v))+S[1]+2240044497&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~P))+S[8]+1873313359&4294967295,v=w+(E<<6&4294967295|E>>>26),E=P+(w^(v|~b))+S[15]+4264355552&4294967295,P=v+(E<<10&4294967295|E>>>22),E=b+(v^(P|~w))+S[6]+2734768916&4294967295,b=P+(E<<15&4294967295|E>>>17),E=w+(P^(b|~v))+S[13]+1309151649&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~P))+S[4]+4149444226&4294967295,v=w+(E<<6&4294967295|E>>>26),E=P+(w^(v|~b))+S[11]+3174756917&4294967295,P=v+(E<<10&4294967295|E>>>22),E=b+(v^(P|~w))+S[2]+718787259&4294967295,b=P+(E<<15&4294967295|E>>>17),E=w+(P^(b|~v))+S[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+b&4294967295,I.g[3]=I.g[3]+P&4294967295}r.prototype.v=function(I,v){v===void 0&&(v=I.length);const w=v-this.blockSize,S=this.C;let b=this.h,P=0;for(;P<v;){if(b==0)for(;P<=w;)s(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<v;)if(S[b++]=I.charCodeAt(P++),b==this.blockSize){s(this,S),b=0;break}}else for(;P<v;)if(S[b++]=I[P++],b==this.blockSize){s(this,S),b=0;break}}this.h=b,this.o+=v},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;v=this.o*8;for(var w=I.length-8;w<I.length;++w)I[w]=v&255,v/=256;for(this.v(I),I=Array(16),v=0,w=0;w<4;++w)for(let S=0;S<32;S+=8)I[v++]=this.g[w]>>>S&255;return I};function i(I,v){var w=l;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function a(I,v){this.h=v;const w=[];let S=!0;for(let b=I.length-1;b>=0;b--){const P=I[b]|0;S&&P==v||(w[b]=P,S=!1)}this.g=w}var l={};function u(I){return-128<=I&&I<128?i(I,function(v){return new a([v|0],v<0?-1:0)}):new a([I|0],I<0?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return D(h(-I));const v=[];let w=1;for(let S=0;I>=w;S++)v[S]=I/w|0,w*=4294967296;return new a(v,0)}function f(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return D(f(I.substring(1),v));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=h(Math.pow(v,8));let S=p;for(let P=0;P<I.length;P+=8){var b=Math.min(8,I.length-P);const E=parseInt(I.substring(P,P+b),v);b<8?(b=h(Math.pow(v,b)),S=S.j(b).add(h(E))):(S=S.j(w),S=S.add(h(E)))}return S}var p=u(0),m=u(1),_=u(16777216);e=a.prototype,e.m=function(){if(C(this))return-D(this).m();let I=0,v=1;for(let w=0;w<this.g.length;w++){const S=this.i(w);I+=(S>=0?S:4294967296+S)*v,v*=4294967296}return I},e.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(A(this))return"0";if(C(this))return"-"+D(this).toString(I);const v=h(Math.pow(I,6));var w=this;let S="";for(;;){const b=q(w,v).g;w=M(w,b.j(v));let P=((w.g.length>0?w.g[0]:w.h)>>>0).toString(I);if(w=b,A(w))return P+S;for(;P.length<6;)P="0"+P;S=P+S}},e.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function A(I){if(I.h!=0)return!1;for(let v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function C(I){return I.h==-1}e.l=function(I){return I=M(this,I),C(I)?-1:A(I)?0:1};function D(I){const v=I.g.length,w=[];for(let S=0;S<v;S++)w[S]=~I.g[S];return new a(w,~I.h).add(m)}e.abs=function(){return C(this)?D(this):this},e.add=function(I){const v=Math.max(this.g.length,I.g.length),w=[];let S=0;for(let b=0;b<=v;b++){let P=S+(this.i(b)&65535)+(I.i(b)&65535),E=(P>>>16)+(this.i(b)>>>16)+(I.i(b)>>>16);S=E>>>16,P&=65535,E&=65535,w[b]=E<<16|P}return new a(w,w[w.length-1]&-2147483648?-1:0)};function M(I,v){return I.add(D(v))}e.j=function(I){if(A(this)||A(I))return p;if(C(this))return C(I)?D(this).j(D(I)):D(D(this).j(I));if(C(I))return D(this.j(D(I)));if(this.l(_)<0&&I.l(_)<0)return h(this.m()*I.m());const v=this.g.length+I.g.length,w=[];for(var S=0;S<2*v;S++)w[S]=0;for(S=0;S<this.g.length;S++)for(let b=0;b<I.g.length;b++){const P=this.i(S)>>>16,E=this.i(S)&65535,Mt=I.i(b)>>>16,Zt=I.i(b)&65535;w[2*S+2*b]+=E*Zt,H(w,2*S+2*b),w[2*S+2*b+1]+=P*Zt,H(w,2*S+2*b+1),w[2*S+2*b+1]+=E*Mt,H(w,2*S+2*b+1),w[2*S+2*b+2]+=P*Mt,H(w,2*S+2*b+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new a(w,0)};function H(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function Q(I,v){this.g=I,this.h=v}function q(I,v){if(A(v))throw Error("division by zero");if(A(I))return new Q(p,p);if(C(I))return v=q(D(I),v),new Q(D(v.g),D(v.h));if(C(v))return v=q(I,D(v)),new Q(D(v.g),v.h);if(I.g.length>30){if(C(I)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,S=v;S.l(I)<=0;)w=rt(w),S=rt(S);var b=lt(w,1),P=lt(S,1);for(S=lt(S,2),w=lt(w,2);!A(S);){var E=P.add(S);E.l(I)<=0&&(b=b.add(w),P=E),S=lt(S,1),w=lt(w,1)}return v=M(I,b.j(v)),new Q(b,v)}for(b=p;I.l(v)>=0;){for(w=Math.max(1,Math.floor(I.m()/v.m())),S=Math.ceil(Math.log(w)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),P=h(w),E=P.j(v);C(E)||E.l(I)>0;)w-=S,P=h(w),E=P.j(v);A(P)&&(P=m),b=b.add(P),I=M(I,E)}return new Q(b,I)}e.B=function(I){return q(this,I).h},e.and=function(I){const v=Math.max(this.g.length,I.g.length),w=[];for(let S=0;S<v;S++)w[S]=this.i(S)&I.i(S);return new a(w,this.h&I.h)},e.or=function(I){const v=Math.max(this.g.length,I.g.length),w=[];for(let S=0;S<v;S++)w[S]=this.i(S)|I.i(S);return new a(w,this.h|I.h)},e.xor=function(I){const v=Math.max(this.g.length,I.g.length),w=[];for(let S=0;S<v;S++)w[S]=this.i(S)^I.i(S);return new a(w,this.h^I.h)};function rt(I){const v=I.g.length+1,w=[];for(let S=0;S<v;S++)w[S]=I.i(S)<<1|I.i(S-1)>>>31;return new a(w,I.h)}function lt(I,v){const w=v>>5;v%=32;const S=I.g.length-w,b=[];for(let P=0;P<S;P++)b[P]=v>0?I.i(P+w)>>>v|I.i(P+w+1)<<32-v:I.i(P+w);return new a(b,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,op=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,Bn=a}).apply(typeof ph<"u"?ph:typeof self<"u"?self:typeof window<"u"?window:{});var Ni=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ap,Rs,lp,qi,ll,up,cp,hp;(function(){var e,t=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ni=="object"&&Ni];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)t:{var d=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var x=o[g];if(!(x in d))break t;d=d[x]}o=o[o.length-1],g=d[o],c=c(g),c!=g&&c!=null&&t(d,o,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(c){var d=[],g;for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&d.push([g,c[g]]);return d}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function u(o,c,d){return o.call.apply(o.bind,arguments)}function h(o,c,d){return h=u,h.apply(null,arguments)}function f(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function p(o,c){function d(){}d.prototype=c.prototype,o.Z=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Ob=function(g,x,N){for(var X=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)X[mt-2]=arguments[mt];return c.prototype[x].apply(g,X)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function _(o){const c=o.length;if(c>0){const d=Array(c);for(let g=0;g<c;g++)d[g]=o[g];return d}return[]}function A(o,c){for(let g=1;g<arguments.length;g++){const x=arguments[g];var d=typeof x;if(d=d!="object"?d:x?Array.isArray(x)?"array":d:"null",d=="array"||d=="object"&&typeof x.length=="number"){d=o.length||0;const N=x.length||0;o.length=d+N;for(let X=0;X<N;X++)o[d+X]=x[X]}else o.push(x)}}class C{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function D(o){a.setTimeout(()=>{throw o},0)}function M(){var o=I;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class H{constructor(){this.h=this.g=null}add(c,d){const g=Q.get();g.set(c,d),this.h?this.h.next=g:this.g=g,this.h=g}}var Q=new C(()=>new q,o=>o.reset());class q{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,lt=!1,I=new H,v=()=>{const o=Promise.resolve(void 0);rt=()=>{o.then(w)}};function w(){for(var o;o=M();){try{o.h.call(o.g)}catch(d){D(d)}var c=Q;c.j(o),c.h<100&&(c.h++,o.next=c.g,c.g=o)}lt=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};a.addEventListener("test",d,c),a.removeEventListener("test",d,c)}catch{}return o})();function E(o){return/^[\s\xa0]*$/.test(o)}function Mt(o,c){b.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,c)}p(Mt,b),Mt.prototype.init=function(o,c){const d=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget,c||(d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement)),this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Mt.Z.h.call(this)},Mt.prototype.h=function(){Mt.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Zt="closure_listenable_"+(Math.random()*1e6|0),qt=0;function Et(o,c,d,g,x){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!g,this.ha=x,this.key=++qt,this.da=this.fa=!1}function gt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function re(o,c,d){for(const g in o)c.call(d,o[g],g,o)}function Tt(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function Ht(o){const c={};for(const d in o)c[d]=o[d];return c}const Dt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function He(o,c){let d,g;for(let x=1;x<arguments.length;x++){g=arguments[x];for(d in g)o[d]=g[d];for(let N=0;N<Dt.length;N++)d=Dt[N],Object.prototype.hasOwnProperty.call(g,d)&&(o[d]=g[d])}}function xe(o){this.src=o,this.g={},this.h=0}xe.prototype.add=function(o,c,d,g,x){const N=o.toString();o=this.g[N],o||(o=this.g[N]=[],this.h++);const X=se(o,c,g,x);return X>-1?(c=o[X],d||(c.fa=!1)):(c=new Et(c,this.src,N,!!g,x),c.fa=d,o.push(c)),c};function Ye(o,c){const d=c.type;if(d in o.g){var g=o.g[d],x=Array.prototype.indexOf.call(g,c,void 0),N;(N=x>=0)&&Array.prototype.splice.call(g,x,1),N&&(gt(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function se(o,c,d,g){for(let x=0;x<o.length;++x){const N=o[x];if(!N.da&&N.listener==c&&N.capture==!!d&&N.ha==g)return x}return-1}var L="closure_lm_"+(Math.random()*1e6|0),k={};function R(o,c,d,g,x){if(Array.isArray(c)){for(let N=0;N<c.length;N++)R(o,c[N],d,g,x);return null}return d=Y(d),o&&o[Zt]?o.J(c,d,l(g)?!!g.capture:!1,x):O(o,c,d,!1,g,x)}function O(o,c,d,g,x,N){if(!c)throw Error("Invalid event type");const X=l(x)?!!x.capture:!!x;let mt=B(o);if(mt||(o[L]=mt=new xe(o)),d=mt.add(c,d,g,X,N),d.proxy)return d;if(g=et(),d.proxy=g,g.src=o,g.listener=d,o.addEventListener)P||(x=X),x===void 0&&(x=!1),o.addEventListener(c.toString(),g,x);else if(o.attachEvent)o.attachEvent(V(c.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function et(){function o(d){return c.call(o.src,o.listener,d)}const c=U;return o}function y(o,c,d,g,x){if(Array.isArray(c))for(var N=0;N<c.length;N++)y(o,c[N],d,g,x);else g=l(g)?!!g.capture:!!g,d=Y(d),o&&o[Zt]?(o=o.i,N=String(c).toString(),N in o.g&&(c=o.g[N],d=se(c,d,g,x),d>-1&&(gt(c[d]),Array.prototype.splice.call(c,d,1),c.length==0&&(delete o.g[N],o.h--)))):o&&(o=B(o))&&(c=o.g[c.toString()],o=-1,c&&(o=se(c,d,g,x)),(d=o>-1?c[o]:null)&&T(d))}function T(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Zt])Ye(c.i,o);else{var d=o.type,g=o.proxy;c.removeEventListener?c.removeEventListener(d,g,o.capture):c.detachEvent?c.detachEvent(V(d),g):c.addListener&&c.removeListener&&c.removeListener(g),(d=B(c))?(Ye(d,o),d.h==0&&(d.src=null,c[L]=null)):gt(o)}}}function V(o){return o in k?k[o]:k[o]="on"+o}function U(o,c){if(o.da)o=!0;else{c=new Mt(c,this);const d=o.listener,g=o.ha||o.src;o.fa&&T(o),o=d.call(g,c)}return o}function B(o){return o=o[L],o instanceof xe?o:null}var $="__closure_events_fn_"+(Math.random()*1e9>>>0);function Y(o){return typeof o=="function"?o:(o[$]||(o[$]=function(c){return o.handleEvent(c)}),o[$])}function G(){S.call(this),this.i=new xe(this),this.M=this,this.G=null}p(G,S),G.prototype[Zt]=!0,G.prototype.removeEventListener=function(o,c,d,g){y(this,o,c,d,g)};function z(o,c){var d,g=o.G;if(g)for(d=[];g;g=g.G)d.push(g);if(o=o.M,g=c.type||c,typeof c=="string")c=new b(c,o);else if(c instanceof b)c.target=c.target||o;else{var x=c;c=new b(g,o),He(c,x)}x=!0;let N,X;if(d)for(X=d.length-1;X>=0;X--)N=c.g=d[X],x=K(N,g,!0,c)&&x;if(N=c.g=o,x=K(N,g,!0,c)&&x,x=K(N,g,!1,c)&&x,d)for(X=0;X<d.length;X++)N=c.g=d[X],x=K(N,g,!1,c)&&x}G.prototype.N=function(){if(G.Z.N.call(this),this.i){var o=this.i;for(const c in o.g){const d=o.g[c];for(let g=0;g<d.length;g++)gt(d[g]);delete o.g[c],o.h--}}this.G=null},G.prototype.J=function(o,c,d,g){return this.i.add(String(o),c,!1,d,g)},G.prototype.K=function(o,c,d,g){return this.i.add(String(o),c,!0,d,g)};function K(o,c,d,g){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();let x=!0;for(let N=0;N<c.length;++N){const X=c[N];if(X&&!X.da&&X.capture==d){const mt=X.listener,te=X.ha||X.src;X.fa&&Ye(o.i,X),x=mt.call(te,g)!==!1&&x}}return x&&!g.defaultPrevented}function it(o,c){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(o,c||0)}function J(o){o.g=it(()=>{o.g=null,o.i&&(o.i=!1,J(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class st extends S{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ot(o){S.call(this),this.h=o,this.g={}}p(ot,S);var _t=[];function Pt(o){re(o.g,function(c,d){this.g.hasOwnProperty(d)&&T(c)},o),o.g={}}ot.prototype.N=function(){ot.Z.N.call(this),Pt(this)},ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=a.JSON.stringify,me=a.JSON.parse,ge=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Oe(){}function Ne(){}var ze={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Rr(){b.call(this,"d")}p(Rr,b);function ue(){b.call(this,"c")}p(ue,b);var ie={},is=null;function rr(){return is=is||new G}ie.Ia="serverreachability";function xu(o){b.call(this,ie.Ia,o)}p(xu,b);function os(o){const c=rr();z(c,new xu(c))}ie.STAT_EVENT="statevent";function Ou(o,c){b.call(this,ie.STAT_EVENT,o),this.stat=c}p(Ou,b);function Ie(o){const c=rr();z(c,new Ou(c,o))}ie.Ja="timingevent";function Nu(o,c){b.call(this,ie.Ja,o),this.size=c}p(Nu,b);function as(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},c)}function ls(){this.g=!0}ls.prototype.ua=function(){this.g=!1};function tg(o,c,d,g,x,N){o.info(function(){if(o.g)if(N){var X="",mt=N.split("&");for(let kt=0;kt<mt.length;kt++){var te=mt[kt].split("=");if(te.length>1){const oe=te[0];te=te[1];const Ze=oe.split("_");X=Ze.length>=2&&Ze[1]=="type"?X+(oe+"="+te+"&"):X+(oe+"=redacted&")}}}else X=null;else X=N;return"XMLHTTP REQ ("+g+") [attempt "+x+"]: "+c+`
`+d+`
`+X})}function eg(o,c,d,g,x,N,X){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+x+"]: "+c+`
`+d+`
`+N+" "+X})}function Sr(o,c,d,g){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+rg(o,d)+(g?" "+g:"")})}function ng(o,c){o.info(function(){return"TIMEOUT: "+c})}ls.prototype.info=function(){};function rg(o,c){if(!o.g)return c;if(!c)return null;try{const N=JSON.parse(c);if(N){for(o=0;o<N.length;o++)if(Array.isArray(N[o])){var d=N[o];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var x=g[0];if(x!="noop"&&x!="stop"&&x!="close")for(let X=1;X<g.length;X++)g[X]=""}}}}return At(N)}catch{return c}}var Ei={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Mu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ku;function sa(){}p(sa,Oe),sa.prototype.g=function(){return new XMLHttpRequest},ku=new sa;function us(o){return encodeURIComponent(String(o))}function sg(o){var c=1;o=o.split(":");const d=[];for(;c>0&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function Sn(o,c,d,g){this.j=o,this.i=c,this.l=d,this.S=g||1,this.V=new ot(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Lu}function Lu(){this.i=null,this.g="",this.h=!1}var $u={},ia={};function oa(o,c,d){o.M=1,o.A=wi(Je(c)),o.u=d,o.R=!0,Fu(o,null)}function Fu(o,c){o.F=Date.now(),Ti(o),o.B=Je(o.A);var d=o.B,g=o.S;Array.isArray(g)||(g=[String(g)]),Ju(d.i,"t",g),o.C=0,d=o.j.L,o.h=new Lu,o.g=gc(o.j,d?c:null,!o.u),o.P>0&&(o.O=new st(h(o.Y,o,o.g),o.P)),c=o.V,d=o.g,g=o.ba;var x="readystatechange";Array.isArray(x)||(x&&(_t[0]=x.toString()),x=_t);for(let N=0;N<x.length;N++){const X=R(d,x[N],g||c.handleEvent,!1,c.h||c);if(!X)break;c.g[X.key]=X}c=o.J?Ht(o.J):{},o.u?(o.v||(o.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,c)):(o.v="GET",o.g.ea(o.B,o.v,null,c)),os(),tg(o.i,o.v,o.B,o.l,o.S,o.u)}Sn.prototype.ba=function(o){o=o.target;const c=this.O;c&&Vn(o)==3?c.j():this.Y(o)},Sn.prototype.Y=function(o){try{if(o==this.g)t:{const mt=Vn(this.g),te=this.g.ya(),kt=this.g.ca();if(!(mt<3)&&(mt!=3||this.g&&(this.h.h||this.g.la()||ic(this.g)))){this.K||mt!=4||te==7||(te==8||kt<=0?os(3):os(2)),aa(this);var c=this.g.ca();this.X=c;var d=ig(this);if(this.o=c==200,eg(this.i,this.v,this.B,this.l,this.S,mt,c),this.o){if(this.U&&!this.L){e:{if(this.g){var g,x=this.g;if((g=x.g?x.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var N=g;break e}}N=null}if(o=N)Sr(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,la(this,o);else{this.o=!1,this.m=3,Ie(12),sr(this),cs(this);break t}}if(this.R){o=!0;let oe;for(;!this.K&&this.C<d.length;)if(oe=og(this,d),oe==ia){mt==4&&(this.m=4,Ie(14),o=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(oe==$u){this.m=4,Ie(15),Sr(this.i,this.l,d,"[Invalid Chunk]"),o=!1;break}else Sr(this.i,this.l,oe,null),la(this,oe);if(Uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||d.length!=0||this.h.h||(this.m=1,Ie(16),o=!1),this.o=this.o&&o,!o)Sr(this.i,this.l,d,"[Invalid Chunked Response]"),sr(this),cs(this);else if(d.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),ga(X),X.P=!0,Ie(11))}}else Sr(this.i,this.l,d,null),la(this,d);mt==4&&sr(this),this.o&&!this.K&&(mt==4?fc(this.j,this):(this.o=!1,Ti(this)))}else Eg(this.g),c==400&&d.indexOf("Unknown SID")>0?(this.m=3,Ie(12)):(this.m=0,Ie(13)),sr(this),cs(this)}}}catch{}finally{}};function ig(o){if(!Uu(o))return o.g.la();const c=ic(o.g);if(c==="")return"";let d="";const g=c.length,x=Vn(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return sr(o),cs(o),"";o.h.i=new a.TextDecoder}for(let N=0;N<g;N++)o.h.h=!0,d+=o.h.i.decode(c[N],{stream:!(x&&N==g-1)});return c.length=0,o.h.g+=d,o.C=0,o.h.g}function Uu(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function og(o,c){var d=o.C,g=c.indexOf(`
`,d);return g==-1?ia:(d=Number(c.substring(d,g)),isNaN(d)?$u:(g+=1,g+d>c.length?ia:(c=c.slice(g,g+d),o.C=g+d,c)))}Sn.prototype.cancel=function(){this.K=!0,sr(this)};function Ti(o){o.T=Date.now()+o.H,ju(o,o.H)}function ju(o,c){if(o.D!=null)throw Error("WatchDog timer not null");o.D=as(h(o.aa,o),c)}function aa(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Sn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(ng(this.i,this.B),this.M!=2&&(os(),Ie(17)),sr(this),this.m=2,cs(this)):ju(this,this.T-o)};function cs(o){o.j.I==0||o.K||fc(o.j,o)}function sr(o){aa(o);var c=o.O;c&&typeof c.dispose=="function"&&c.dispose(),o.O=null,Pt(o.V),o.g&&(c=o.g,o.g=null,c.abort(),c.dispose())}function la(o,c){try{var d=o.j;if(d.I!=0&&(d.g==o||ua(d.h,o))){if(!o.L&&ua(d.h,o)&&d.I==3){try{var g=d.Ba.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var x=g;if(x[0]==0){t:if(!d.v){if(d.g)if(d.g.F+3e3<o.F)Si(d),bi(d);else break t;ma(d),Ie(18)}}else d.xa=x[1],0<d.xa-d.K&&x[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=as(h(d.Va,d),6e3));Hu(d.h)<=1&&d.ta&&(d.ta=void 0)}else or(d,11)}else if((o.L||d.g==o)&&Si(d),!E(c))for(x=d.Ba.g.parse(c),c=0;c<x.length;c++){let kt=x[c];const oe=kt[0];if(!(oe<=d.K))if(d.K=oe,kt=kt[1],d.I==2)if(kt[0]=="c"){d.M=kt[1],d.ba=kt[2];const Ze=kt[3];Ze!=null&&(d.ka=Ze,d.j.info("VER="+d.ka));const ar=kt[4];ar!=null&&(d.za=ar,d.j.info("SVER="+d.za));const Dn=kt[5];Dn!=null&&typeof Dn=="number"&&Dn>0&&(g=1.5*Dn,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const xn=o.g;if(xn){const Pi=xn.g?xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pi){var N=g.h;N.g||Pi.indexOf("spdy")==-1&&Pi.indexOf("quic")==-1&&Pi.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(ca(N,N.h),N.h=null))}if(g.G){const _a=xn.g?xn.g.getResponseHeader("X-HTTP-Session-Id"):null;_a&&(g.wa=_a,jt(g.J,g.G,_a))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-o.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var X=o;if(g.na=mc(g,g.L?g.ba:null,g.W),X.L){zu(g.h,X);var mt=X,te=g.O;te&&(mt.H=te),mt.D&&(aa(mt),Ti(mt)),g.g=X}else cc(g);d.i.length>0&&Ri(d)}else kt[0]!="stop"&&kt[0]!="close"||or(d,7);else d.I==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?or(d,7):pa(d):kt[0]!="noop"&&d.l&&d.l.qa(kt),d.A=0)}}os(4)}catch{}}var ag=class{constructor(o,c){this.g=o,this.map=c}};function Bu(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Hu(o){return o.h?1:o.g?o.g.size:0}function ua(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function ca(o,c){o.g?o.g.add(c):o.h=c}function zu(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Bu.prototype.cancel=function(){if(this.i=Ku(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Ku(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.G);return c}return _(o.i)}var Gu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lg(o,c){if(o){o=o.split("&");for(let d=0;d<o.length;d++){const g=o[d].indexOf("=");let x,N=null;g>=0?(x=o[d].substring(0,g),N=o[d].substring(g+1)):x=o[d],c(x,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Cn(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;o instanceof Cn?(this.l=o.l,hs(this,o.j),this.o=o.o,this.g=o.g,fs(this,o.u),this.h=o.h,ha(this,Zu(o.i)),this.m=o.m):o&&(c=String(o).match(Gu))?(this.l=!1,hs(this,c[1]||"",!0),this.o=ds(c[2]||""),this.g=ds(c[3]||"",!0),fs(this,c[4]),this.h=ds(c[5]||"",!0),ha(this,c[6]||"",!0),this.m=ds(c[7]||"")):(this.l=!1,this.i=new ms(null,this.l))}Cn.prototype.toString=function(){const o=[];var c=this.j;c&&o.push(ps(c,Wu,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(ps(c,Wu,!0),"@"),o.push(us(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&o.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(ps(d,d.charAt(0)=="/"?hg:cg,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",ps(d,dg)),o.join("")},Cn.prototype.resolve=function(o){const c=Je(this);let d=!!o.j;d?hs(c,o.j):d=!!o.o,d?c.o=o.o:d=!!o.g,d?c.g=o.g:d=o.u!=null;var g=o.h;if(d)fs(c,o.u);else if(d=!!o.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var x=c.h.lastIndexOf("/");x!=-1&&(g=c.h.slice(0,x+1)+g)}if(x=g,x==".."||x==".")g="";else if(x.indexOf("./")!=-1||x.indexOf("/.")!=-1){g=x.lastIndexOf("/",0)==0,x=x.split("/");const N=[];for(let X=0;X<x.length;){const mt=x[X++];mt=="."?g&&X==x.length&&N.push(""):mt==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),g&&X==x.length&&N.push("")):(N.push(mt),g=!0)}g=N.join("/")}else g=x}return d?c.h=g:d=o.i.toString()!=="",d?ha(c,Zu(o.i)):d=!!o.m,d&&(c.m=o.m),c};function Je(o){return new Cn(o)}function hs(o,c,d){o.j=d?ds(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function fs(o,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);o.u=c}else o.u=null}function ha(o,c,d){c instanceof ms?(o.i=c,pg(o.i,o.l)):(d||(c=ps(c,fg)),o.i=new ms(c,o.l))}function jt(o,c,d){o.i.set(c,d)}function wi(o){return jt(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function ds(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ps(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,ug),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function ug(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Wu=/[#\/\?@]/g,cg=/[#\?:]/g,hg=/[#\?]/g,fg=/[#\?@]/g,dg=/#/g;function ms(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function ir(o){o.g||(o.g=new Map,o.h=0,o.i&&lg(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}e=ms.prototype,e.add=function(o,c){ir(this),this.i=null,o=Cr(this,o);let d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function Qu(o,c){ir(o),c=Cr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Xu(o,c){return ir(o),c=Cr(o,c),o.g.has(c)}e.forEach=function(o,c){ir(this),this.g.forEach(function(d,g){d.forEach(function(x){o.call(c,x,g,this)},this)},this)};function Yu(o,c){ir(o);let d=[];if(typeof c=="string")Xu(o,c)&&(d=d.concat(o.g.get(Cr(o,c))));else for(o=Array.from(o.g.values()),c=0;c<o.length;c++)d=d.concat(o[c]);return d}e.set=function(o,c){return ir(this),this.i=null,o=Cr(this,o),Xu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=Yu(this,o),o.length>0?String(o[0]):c):c};function Ju(o,c,d){Qu(o,c),d.length>0&&(o.i=null,o.g.set(Cr(o,c),_(d)),o.h+=d.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(let g=0;g<c.length;g++){var d=c[g];const x=us(d);d=Yu(this,d);for(let N=0;N<d.length;N++){let X=x;d[N]!==""&&(X+="="+us(d[N])),o.push(X)}}return this.i=o.join("&")};function Zu(o){const c=new ms;return c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),c}function Cr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function pg(o,c){c&&!o.j&&(ir(o),o.i=null,o.g.forEach(function(d,g){const x=g.toLowerCase();g!=x&&(Qu(this,g),Ju(this,x,d))},o)),o.j=c}function mg(o,c){const d=new ls;if(a.Image){const g=new Image;g.onload=f(Pn,d,"TestLoadImage: loaded",!0,c,g),g.onerror=f(Pn,d,"TestLoadImage: error",!1,c,g),g.onabort=f(Pn,d,"TestLoadImage: abort",!1,c,g),g.ontimeout=f(Pn,d,"TestLoadImage: timeout",!1,c,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else c(!1)}function gg(o,c){const d=new ls,g=new AbortController,x=setTimeout(()=>{g.abort(),Pn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:g.signal}).then(N=>{clearTimeout(x),N.ok?Pn(d,"TestPingServer: ok",!0,c):Pn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(x),Pn(d,"TestPingServer: error",!1,c)})}function Pn(o,c,d,g,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),g(d)}catch{}}function _g(){this.g=new ge}function fa(o){this.i=o.Sb||null,this.h=o.ab||!1}p(fa,Oe),fa.prototype.g=function(){return new Ii(this.i,this.h)};function Ii(o,c){G.call(this),this.H=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ii,G),e=Ii.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=c,this.readyState=1,_s(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(c.body=o),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},e.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,_s(this)),this.g&&(this.readyState=3,_s(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tc(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function tc(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}e.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?gs(this):_s(this),this.readyState==3&&tc(this)}},e.Oa=function(o){this.g&&(this.response=this.responseText=o,gs(this))},e.Na=function(o){this.g&&(this.response=o,gs(this))},e.ga=function(){this.g&&gs(this)};function gs(o){o.readyState=4,o.l=null,o.j=null,o.B=null,_s(o)}e.setRequestHeader=function(o,c){this.A.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function _s(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ec(o){let c="";return re(o,function(d,g){c+=g,c+=":",c+=d,c+=`\r
`}),c}function da(o,c,d){t:{for(g in d){var g=!1;break t}g=!0}g||(d=ec(d),typeof o=="string"?d!=null&&us(d):jt(o,c,d))}function Kt(o){G.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Kt,G);var yg=/^https?$/i,vg=["POST","PUT"];e=Kt.prototype,e.Fa=function(o){this.H=o},e.ea=function(o,c,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ku.g(),this.g.onreadystatechange=m(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(N){nc(this,N);return}if(o=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var x in g)d.set(x,g[x]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const N of g.keys())d.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),x=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(vg,c,void 0)>=0)||g||x||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,X]of d)this.g.setRequestHeader(N,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(N){nc(this,N)}};function nc(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.o=5,rc(o),Ai(o)}function rc(o){o.A||(o.A=!0,z(o,"complete"),z(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,z(this,"complete"),z(this,"abort"),Ai(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ai(this,!0)),Kt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?sc(this):this.Xa())},e.Xa=function(){sc(this)};function sc(o){if(o.h&&typeof i<"u"){if(o.v&&Vn(o)==4)setTimeout(o.Ca.bind(o),0);else if(z(o,"readystatechange"),Vn(o)==4){o.h=!1;try{const N=o.ca();t:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var d;if(!(d=c)){var g;if(g=N===0){let X=String(o.D).match(Gu)[1]||null;!X&&a.self&&a.self.location&&(X=a.self.location.protocol.slice(0,-1)),g=!yg.test(X?X.toLowerCase():"")}d=g}if(d)z(o,"complete"),z(o,"success");else{o.o=6;try{var x=Vn(o)>2?o.g.statusText:""}catch{x=""}o.l=x+" ["+o.ca()+"]",rc(o)}}finally{Ai(o)}}}}function Ai(o,c){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const d=o.g;o.g=null,c||z(o,"ready");try{d.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function Vn(o){return o.g?o.g.readyState:0}e.ca=function(){try{return Vn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),me(c)}};function ic(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Eg(o){const c={};o=(o.g&&Vn(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(E(o[g]))continue;var d=sg(o[g]);const x=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=c[x]||[];c[x]=N,N.push(d)}Tt(c,function(g){return g.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ys(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function oc(o){this.za=0,this.i=[],this.j=new ls,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ys("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ys("baseRetryDelayMs",5e3,o),this.Za=ys("retryDelaySeedMs",1e4,o),this.Ta=ys("forwardChannelMaxRetries",2,o),this.va=ys("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Bu(o&&o.concurrentRequestLimit),this.Ba=new _g,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=oc.prototype,e.ka=8,e.I=1,e.connect=function(o,c,d,g){Ie(0),this.W=o,this.H=c||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=mc(this,null,this.W),Ri(this)};function pa(o){if(ac(o),o.I==3){var c=o.V++,d=Je(o.J);if(jt(d,"SID",o.M),jt(d,"RID",c),jt(d,"TYPE","terminate"),vs(o,d),c=new Sn(o,o.j,c),c.M=2,c.A=wi(Je(d)),d=!1,a.navigator&&a.navigator.sendBeacon)try{d=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!d&&a.Image&&(new Image().src=c.A,d=!0),d||(c.g=gc(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Ti(c)}pc(o)}function bi(o){o.g&&(ga(o),o.g.cancel(),o.g=null)}function ac(o){bi(o),o.v&&(a.clearTimeout(o.v),o.v=null),Si(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function Ri(o){if(!qu(o.h)&&!o.m){o.m=!0;var c=o.Ea;rt||v(),lt||(rt(),lt=!0),I.add(c,o),o.D=0}}function Tg(o,c){return Hu(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=c.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=as(h(o.Ea,o,c),dc(o,o.D)),o.D++,!0)}e.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const x=new Sn(this,this.j,o);let N=this.o;if(this.U&&(N?(N=Ht(N),He(N,this.U)):N=this.U),this.u!==null||this.R||(x.J=N,N=null),this.S)t:{for(var c=0,d=0;d<this.i.length;d++){e:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(c+=g,c>4096){c=d;break t}if(c===4096||d===this.i.length-1){c=d+1;break t}}c=1e3}else c=1e3;c=uc(this,x,c),d=Je(this.J),jt(d,"RID",o),jt(d,"CVER",22),this.G&&jt(d,"X-HTTP-Session-Id",this.G),vs(this,d),N&&(this.R?c="headers="+us(ec(N))+"&"+c:this.u&&da(d,this.u,N)),ca(this.h,x),this.Ra&&jt(d,"TYPE","init"),this.S?(jt(d,"$req",c),jt(d,"SID","null"),x.U=!0,oa(x,d,null)):oa(x,d,c),this.I=2}}else this.I==3&&(o?lc(this,o):this.i.length==0||qu(this.h)||lc(this))};function lc(o,c){var d;c?d=c.l:d=o.V++;const g=Je(o.J);jt(g,"SID",o.M),jt(g,"RID",d),jt(g,"AID",o.K),vs(o,g),o.u&&o.o&&da(g,o.u,o.o),d=new Sn(o,o.j,d,o.D+1),o.u===null&&(d.J=o.o),c&&(o.i=c.G.concat(o.i)),c=uc(o,d,1e3),d.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),ca(o.h,d),oa(d,g,c)}function vs(o,c){o.H&&re(o.H,function(d,g){jt(c,g,d)}),o.l&&re({},function(d,g){jt(c,g,d)})}function uc(o,c,d){d=Math.min(o.i.length,d);const g=o.l?h(o.l.Ka,o.l,o):null;t:{var x=o.i;let mt=-1;for(;;){const te=["count="+d];mt==-1?d>0?(mt=x[0].g,te.push("ofs="+mt)):mt=0:te.push("ofs="+mt);let kt=!0;for(let oe=0;oe<d;oe++){var N=x[oe].g;const Ze=x[oe].map;if(N-=mt,N<0)mt=Math.max(0,x[oe].g-100),kt=!1;else try{N="req"+N+"_"||"";try{var X=Ze instanceof Map?Ze:Object.entries(Ze);for(const[ar,Dn]of X){let xn=Dn;l(Dn)&&(xn=At(Dn)),te.push(N+ar+"="+encodeURIComponent(xn))}}catch(ar){throw te.push(N+"type="+encodeURIComponent("_badmap")),ar}}catch{g&&g(Ze)}}if(kt){X=te.join("&");break t}}X=void 0}return o=o.i.splice(0,d),c.G=o,X}function cc(o){if(!o.g&&!o.v){o.Y=1;var c=o.Da;rt||v(),lt||(rt(),lt=!0),I.add(c,o),o.A=0}}function ma(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=as(h(o.Da,o),dc(o,o.A)),o.A++,!0)}e.Da=function(){if(this.v=null,hc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=as(h(this.Wa,this),o)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ie(10),bi(this),hc(this))};function ga(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function hc(o){o.g=new Sn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var c=Je(o.na);jt(c,"RID","rpc"),jt(c,"SID",o.M),jt(c,"AID",o.K),jt(c,"CI",o.F?"0":"1"),!o.F&&o.ia&&jt(c,"TO",o.ia),jt(c,"TYPE","xmlhttp"),vs(o,c),o.u&&o.o&&da(c,o.u,o.o),o.O&&(o.g.H=o.O);var d=o.g;o=o.ba,d.M=1,d.A=wi(Je(c)),d.u=null,d.R=!0,Fu(d,o)}e.Va=function(){this.C!=null&&(this.C=null,bi(this),ma(this),Ie(19))};function Si(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function fc(o,c){var d=null;if(o.g==c){Si(o),ga(o),o.g=null;var g=2}else if(ua(o.h,c))d=c.G,zu(o.h,c),g=1;else return;if(o.I!=0){if(c.o)if(g==1){d=c.u?c.u.length:0,c=Date.now()-c.F;var x=o.D;g=rr(),z(g,new Nu(g,d)),Ri(o)}else cc(o);else if(x=c.m,x==3||x==0&&c.X>0||!(g==1&&Tg(o,c)||g==2&&ma(o)))switch(d&&d.length>0&&(c=o.h,c.i=c.i.concat(d)),x){case 1:or(o,5);break;case 4:or(o,10);break;case 3:or(o,6);break;default:or(o,2)}}}function dc(o,c){let d=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(d*=2),d*c}function or(o,c){if(o.j.info("Error code "+c),c==2){var d=h(o.bb,o),g=o.Ua;const x=!g;g=new Cn(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||hs(g,"https"),wi(g),x?mg(g.toString(),d):gg(g.toString(),d)}else Ie(2);o.I=0,o.l&&o.l.pa(c),pc(o),ac(o)}e.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))};function pc(o){if(o.I=0,o.ja=[],o.l){const c=Ku(o.h);(c.length!=0||o.i.length!=0)&&(A(o.ja,c),A(o.ja,o.i),o.h.i.length=0,_(o.i),o.i.length=0),o.l.oa()}}function mc(o,c,d){var g=d instanceof Cn?Je(d):new Cn(d);if(g.g!="")c&&(g.g=c+"."+g.g),fs(g,g.u);else{var x=a.location;g=x.protocol,c=c?c+"."+x.hostname:x.hostname,x=+x.port;const N=new Cn(null);g&&hs(N,g),c&&(N.g=c),x&&fs(N,x),d&&(N.h=d),g=N}return d=o.G,c=o.wa,d&&c&&jt(g,d,c),jt(g,"VER",o.ka),vs(o,g),g}function gc(o,c,d){if(c&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Aa&&!o.ma?new Kt(new fa({ab:d})):new Kt(o.ma),c.Fa(o.L),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function _c(){}e=_c.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Ci(){}Ci.prototype.g=function(o,c){return new Me(o,c)};function Me(o,c){G.call(this),this.g=new oc(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(o?o["X-WebChannel-Client-Profile"]=c.sa:o={"X-WebChannel-Client-Profile":c.sa}),this.g.U=o,(o=c&&c.Qb)&&!E(o)&&(this.g.u=o),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.G=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Pr(this)}p(Me,G),Me.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Me.prototype.close=function(){pa(this.g)},Me.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.v&&(d={},d.__data__=At(o),o=d);c.i.push(new ag(c.Ya++,o)),c.I==3&&Ri(c)},Me.prototype.N=function(){this.g.l=null,delete this.j,pa(this.g),delete this.g,Me.Z.N.call(this)};function yc(o){Rr.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const d in c){o=d;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}p(yc,Rr);function vc(){ue.call(this),this.status=1}p(vc,ue);function Pr(o){this.g=o}p(Pr,_c),Pr.prototype.ra=function(){z(this.g,"a")},Pr.prototype.qa=function(o){z(this.g,new yc(o))},Pr.prototype.pa=function(o){z(this.g,new vc)},Pr.prototype.oa=function(){z(this.g,"b")},Ci.prototype.createWebChannel=Ci.prototype.g,Me.prototype.send=Me.prototype.o,Me.prototype.open=Me.prototype.m,Me.prototype.close=Me.prototype.close,hp=function(){return new Ci},cp=function(){return rr()},up=ie,ll={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ei.NO_ERROR=0,Ei.TIMEOUT=8,Ei.HTTP_ERROR=6,qi=Ei,Mu.COMPLETE="complete",lp=Mu,Ne.EventType=ze,ze.OPEN="a",ze.CLOSE="b",ze.ERROR="c",ze.MESSAGE="d",G.prototype.listen=G.prototype.J,Rs=Ne,Kt.prototype.listenOnce=Kt.prototype.K,Kt.prototype.getLastError=Kt.prototype.Ha,Kt.prototype.getLastErrorCode=Kt.prototype.ya,Kt.prototype.getStatus=Kt.prototype.ca,Kt.prototype.getResponseJson=Kt.prototype.La,Kt.prototype.getResponseText=Kt.prototype.la,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Fa,ap=Kt}).apply(typeof Ni<"u"?Ni:typeof self<"u"?self:typeof window<"u"?window:{});const mh="@firebase/firestore",gh="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ve.UNAUTHENTICATED=new ve(null),ve.GOOGLE_CREDENTIALS=new ve("google-credentials-uid"),ve.FIRST_PARTY=new ve("first-party-uid"),ve.MOCK_USER=new ve("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let es="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=new tp("@firebase/firestore");function xr(){return vr.logLevel}function tt(e,...t){if(vr.logLevel<=It.DEBUG){const n=t.map(Yl);vr.debug(`Firestore (${es}): ${e}`,...n)}}function An(e,...t){if(vr.logLevel<=It.ERROR){const n=t.map(Yl);vr.error(`Firestore (${es}): ${e}`,...n)}}function Kr(e,...t){if(vr.logLevel<=It.WARN){const n=t.map(Yl);vr.warn(`Firestore (${es}): ${e}`,...n)}}function Yl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,fp(e,r,n)}function fp(e,t,n){let r=`FIRESTORE (${es}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw An(r),new Error(r)}function Ct(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||fp(t,s,r)}function ft(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends ts{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class XE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(ve.UNAUTHENTICATED)))}shutdown(){}}class YE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class JE{constructor(t){this.t=t,this.currentUser=ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ct(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new qn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new qn,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const u=i;t.enqueueRetryable((async()=>{await u.promise,await s(this.currentUser)}))},l=u=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>l(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new qn)}}),0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct(typeof r.accessToken=="string",31837,{l:r}),new dp(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ct(t===null||typeof t=="string",2055,{h:t}),new ve(t)}}class ZE{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=ve.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tT{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new ZE(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(ve.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _h{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eT{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,OE(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Ct(this.o===void 0,3512);const r=i=>{i.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,tt("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable((()=>r(i)))};const s=i=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _h(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new _h(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=nT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function yt(e,t){return e<t?-1:e>t?1:0}function ul(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=e.charAt(r),i=t.charAt(r);if(s!==i)return Na(s)===Na(i)?yt(s,i):Na(s)?1:-1}return yt(e.length,t.length)}const rT=55296,sT=57343;function Na(e){const t=e.charCodeAt(0);return t>=rT&&t<=sT}function Gr(e,t,n){return e.length===t.length&&e.every(((r,s)=>n(r,t[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="__name__";class rn{constructor(t,n,r){n===void 0?n=0:n>t.length&&ut(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&ut(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return rn.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof rn?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=rn.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return yt(t.length,n.length)}static compareSegments(t,n){const r=rn.isNumericId(t),s=rn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?rn.extractNumericId(t).compare(rn.extractNumericId(n)):ul(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Bn.fromString(t.substring(4,t.length-2))}}class Ut extends rn{construct(t,n,r){return new Ut(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ut(n)}static emptyPath(){return new Ut([])}}const iT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class de extends rn{construct(t,n,r){return new de(t,n,r)}static isValidIdentifier(t){return iT.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),de.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yh}static keyField(){return new de([yh])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new Z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new de(n)}static emptyPath(){return new de([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(t){this.path=t}static fromPath(t){return new nt(Ut.fromString(t))}static fromName(t){return new nt(Ut.fromString(t).popFirst(5))}static empty(){return new nt(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ut.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ut.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new nt(new Ut(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(e,t,n){if(!n)throw new Z(F.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function oT(e,t,n,r){if(t===!0&&r===!0)throw new Z(F.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function vh(e){if(!nt.isDocumentKey(e))throw new Z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Eh(e){if(nt.isDocumentKey(e))throw new Z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function mp(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function $o(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ut(12329,{type:typeof e})}function We(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$o(e);throw new Z(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(e,t){const n={typeString:e};return t&&(n.value=t),n}function fi(e,t){if(!mp(e))throw new Z(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Z(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=-62135596800,wh=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(t){return Nt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*wh);return new Nt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Th)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wh}_compareTo(t){return this.seconds===t.seconds?yt(this.nanoseconds,t.nanoseconds):yt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(fi(t,Nt._jsonSchema))return new Nt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Th;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:Xt("string",Nt._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{static fromTimestamp(t){return new ht(t)}static min(){return new ht(new Nt(0,0))}static max(){return new ht(new Nt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=-1;function aT(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=ht.fromTimestamp(r===1e9?new Nt(n+1,0):new Nt(n,r));return new Gn(s,nt.empty(),t)}function lT(e){return new Gn(e.readTime,e.key,ei)}class Gn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Gn(ht.min(),nt.empty(),ei)}static max(){return new Gn(ht.max(),nt.empty(),ei)}}function uT(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=nt.comparator(e.documentKey,t.documentKey),n!==0?n:yt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ns(e){if(e.code!==F.FAILED_PRECONDITION||e.message!==cT)throw e;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ut(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new j(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):j.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):j.reject(n)}static resolve(t){return new j(((n,r)=>{n(t)}))}static reject(t){return new j(((n,r)=>{r(t)}))}static waitFor(t){return new j(((n,r)=>{let s=0,i=0,a=!1;t.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(u=>r(u)))})),a=!0,i===s&&n()}))}static or(t){let n=j.resolve(!1);for(const r of t)n=n.next((s=>s?j.resolve(s):r()));return n}static forEach(t,n){const r=[];return t.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(t,n){return new j(((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(t[h]).next((f=>{a[h]=f,++l,l===i&&r(a)}),(f=>s(f)))}}))}static doWhile(t,n){return new j(((r,s)=>{const i=()=>{t()===!0?n().next((()=>{i()}),s):r()};i()}))}}function fT(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rs(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Fo.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=-1;function Uo(e){return e==null}function po(e){return e===0&&1/e==-1/0}function dT(e){return typeof e=="number"&&Number.isInteger(e)&&!po(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="";function pT(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ih(t)),t=mT(e.get(n),t);return Ih(t)}function mT(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case gp:n+="";break;default:n+=i}}return n}function Ih(e){return e+gp+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function er(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _p(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(t,n){this.comparator=t,this.root=n||he.EMPTY}insert(t,n){return new zt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,he.BLACK,null,null))}remove(t){return new zt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,he.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Mi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Mi(this.root,t,this.comparator,!1)}getReverseIterator(){return new Mi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Mi(this.root,t,this.comparator,!0)}}class Mi{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class he{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??he.RED,this.left=s??he.EMPTY,this.right=i??he.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new he(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return he.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return he.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,he.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,he.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ut(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ut(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ut(27949);return t+(this.isRed()?0:1)}}he.EMPTY=null,he.RED=!0,he.BLACK=!1;he.EMPTY=new class{constructor(){this.size=0}get key(){throw ut(57766)}get value(){throw ut(16141)}get color(){throw ut(16727)}get left(){throw ut(29726)}get right(){throw ut(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new he(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.comparator=t,this.data=new zt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new bh(this.data.getIterator())}getIteratorFrom(t){return new bh(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof ne)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new ne(this.comparator);return n.data=t,n}}class bh{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(t){this.fields=t,t.sort(de.comparator)}static empty(){return new Fe([])}unionWith(t){let n=new ne(de.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Fe(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Gr(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new yp("Invalid base64 string: "+i):i}})(t);return new pe(n)}static fromUint8Array(t){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(t);return new pe(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return yt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}pe.EMPTY_BYTE_STRING=new pe("");const gT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wn(e){if(Ct(!!e,39018),typeof e=="string"){let t=0;const n=gT.exec(e);if(Ct(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Gt(e.seconds),nanos:Gt(e.nanos)}}function Gt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Qn(e){return typeof e=="string"?pe.fromBase64String(e):pe.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="server_timestamp",Ep="__type__",Tp="__previous_value__",wp="__local_write_time__";function tu(e){return(e?.mapValue?.fields||{})[Ep]?.stringValue===vp}function jo(e){const t=e.mapValue.fields[Tp];return tu(t)?jo(t):t}function ni(e){const t=Wn(e.mapValue.fields[wp].timestampValue);return new Nt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(t,n,r,s,i,a,l,u,h,f){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f}}const mo="(default)";class ri{constructor(t,n){this.projectId=t,this.database=n||mo}static empty(){return new ri("","")}get isDefaultDatabase(){return this.database===mo}isEqual(t){return t instanceof ri&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="__type__",yT="__max__",ki={mapValue:{}},Ap="__vector__",go="value";function Xn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?tu(e)?4:ET(e)?9007199254740991:vT(e)?10:11:ut(28295,{value:e})}function pn(e,t){if(e===t)return!0;const n=Xn(e);if(n!==Xn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ni(e).isEqual(ni(t));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Wn(s.timestampValue),l=Wn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(s,i){return Qn(s.bytesValue).isEqual(Qn(i.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(s,i){return Gt(s.geoPointValue.latitude)===Gt(i.geoPointValue.latitude)&&Gt(s.geoPointValue.longitude)===Gt(i.geoPointValue.longitude)})(e,t);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Gt(s.integerValue)===Gt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Gt(s.doubleValue),l=Gt(i.doubleValue);return a===l?po(a)===po(l):isNaN(a)&&isNaN(l)}return!1})(e,t);case 9:return Gr(e.arrayValue.values||[],t.arrayValue.values||[],pn);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Ah(a)!==Ah(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!pn(a[u],l[u])))return!1;return!0})(e,t);default:return ut(52216,{left:e})}}function si(e,t){return(e.values||[]).find((n=>pn(n,t)))!==void 0}function Wr(e,t){if(e===t)return 0;const n=Xn(e),r=Xn(t);if(n!==r)return yt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return yt(e.booleanValue,t.booleanValue);case 2:return(function(i,a){const l=Gt(i.integerValue||i.doubleValue),u=Gt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(e,t);case 3:return Rh(e.timestampValue,t.timestampValue);case 4:return Rh(ni(e),ni(t));case 5:return ul(e.stringValue,t.stringValue);case 6:return(function(i,a){const l=Qn(i),u=Qn(a);return l.compareTo(u)})(e.bytesValue,t.bytesValue);case 7:return(function(i,a){const l=i.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=yt(l[h],u[h]);if(f!==0)return f}return yt(l.length,u.length)})(e.referenceValue,t.referenceValue);case 8:return(function(i,a){const l=yt(Gt(i.latitude),Gt(a.latitude));return l!==0?l:yt(Gt(i.longitude),Gt(a.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Sh(e.arrayValue,t.arrayValue);case 10:return(function(i,a){const l=i.fields||{},u=a.fields||{},h=l[go]?.arrayValue,f=u[go]?.arrayValue,p=yt(h?.values?.length||0,f?.values?.length||0);return p!==0?p:Sh(h,f)})(e.mapValue,t.mapValue);case 11:return(function(i,a){if(i===ki.mapValue&&a===ki.mapValue)return 0;if(i===ki.mapValue)return 1;if(a===ki.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=a.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const m=ul(u[p],f[p]);if(m!==0)return m;const _=Wr(l[u[p]],h[f[p]]);if(_!==0)return _}return yt(u.length,f.length)})(e.mapValue,t.mapValue);default:throw ut(23264,{he:n})}}function Rh(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return yt(e,t);const n=Wn(e),r=Wn(t),s=yt(n.seconds,r.seconds);return s!==0?s:yt(n.nanos,r.nanos)}function Sh(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Wr(n[s],r[s]);if(i)return i}return yt(n.length,r.length)}function Qr(e){return cl(e)}function cl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=Wn(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Qn(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return nt.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=cl(i);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${cl(n.fields[a])}`;return s+"}"})(e.mapValue):ut(61005,{value:e})}function Hi(e){switch(Xn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=jo(e);return t?16+Hi(t):16;case 5:return 2*e.stringValue.length;case 6:return Qn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Hi(i)),0)})(e.arrayValue);case 10:case 11:return(function(r){let s=0;return er(r.fields,((i,a)=>{s+=i.length+Hi(a)})),s})(e.mapValue);default:throw ut(13486,{value:e})}}function Ch(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function hl(e){return!!e&&"integerValue"in e}function eu(e){return!!e&&"arrayValue"in e}function Ph(e){return!!e&&"nullValue"in e}function Vh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zi(e){return!!e&&"mapValue"in e}function vT(e){return(e?.mapValue?.fields||{})[Ip]?.stringValue===Ap}function Fs(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return er(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Fs(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Fs(e.arrayValue.values[n]);return t}return{...e}}function ET(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===yT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(t){this.value=t}static empty(){return new Ve({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!zi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Fs(n)}setAll(t){let n=de.emptyPath(),r={},s=[];t.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Fs(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());zi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return pn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];zi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){er(n,((s,i)=>t[s]=i));for(const s of r)delete t[s]}clone(){return new Ve(Fs(this.value))}}function bp(e){const t=[];return er(e.fields,((n,r)=>{const s=new de([n]);if(zi(r)){const i=bp(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)})),new Fe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new Te(t,0,ht.min(),ht.min(),ht.min(),Ve.empty(),0)}static newFoundDocument(t,n,r,s){return new Te(t,1,n,ht.min(),r,s,0)}static newNoDocument(t,n){return new Te(t,2,n,ht.min(),ht.min(),Ve.empty(),0)}static newUnknownDocument(t,n){return new Te(t,3,n,ht.min(),ht.min(),Ve.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ve.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ve.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Te&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Te(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(t,n){this.position=t,this.inclusive=n}}function Dh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=nt.comparator(nt.fromName(a.referenceValue),n.key):r=Wr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function xh(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!pn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t,n="asc"){this.field=t,this.dir=n}}function TT(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{}class Qt extends Rp{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new IT(t,n,r):n==="array-contains"?new RT(t,r):n==="in"?new ST(t,r):n==="not-in"?new CT(t,r):n==="array-contains-any"?new PT(t,r):new Qt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new AT(t,r):new bT(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wr(n,this.value)):n!==null&&Xn(this.value)===Xn(n)&&this.matchesComparison(Wr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ut(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qe extends Rp{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Qe(t,n)}matches(t){return Sp(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Sp(e){return e.op==="and"}function Cp(e){return wT(e)&&Sp(e)}function wT(e){for(const t of e.filters)if(t instanceof Qe)return!1;return!0}function fl(e){if(e instanceof Qt)return e.field.canonicalString()+e.op.toString()+Qr(e.value);if(Cp(e))return e.filters.map((t=>fl(t))).join(",");{const t=e.filters.map((n=>fl(n))).join(",");return`${e.op}(${t})`}}function Pp(e,t){return e instanceof Qt?(function(r,s){return s instanceof Qt&&r.op===s.op&&r.field.isEqual(s.field)&&pn(r.value,s.value)})(e,t):e instanceof Qe?(function(r,s){return s instanceof Qe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&Pp(a,s.filters[l])),!0):!1})(e,t):void ut(19439)}function Vp(e){return e instanceof Qt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Qr(n.value)}`})(e):e instanceof Qe?(function(n){return n.op.toString()+" {"+n.getFilters().map(Vp).join(" ,")+"}"})(e):"Filter"}class IT extends Qt{constructor(t,n,r){super(t,n,r),this.key=nt.fromName(r.referenceValue)}matches(t){const n=nt.comparator(t.key,this.key);return this.matchesComparison(n)}}class AT extends Qt{constructor(t,n){super(t,"in",n),this.keys=Dp("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class bT extends Qt{constructor(t,n){super(t,"not-in",n),this.keys=Dp("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function Dp(e,t){return(t.arrayValue?.values||[]).map((n=>nt.fromName(n.referenceValue)))}class RT extends Qt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return eu(n)&&si(n.arrayValue,this.value)}}class ST extends Qt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&si(this.value.arrayValue,n)}}class CT extends Qt{constructor(t,n){super(t,"not-in",n)}matches(t){if(si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!si(this.value.arrayValue,n)}}class PT extends Qt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!eu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>si(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function Oh(e,t=null,n=[],r=[],s=null,i=null,a=null){return new VT(e,t,n,r,s,i,a)}function nu(e){const t=ft(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>fl(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Uo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Qr(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Qr(r))).join(",")),t.Te=n}return t.Te}function ru(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!TT(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Pp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!xh(e.startAt,t.startAt)&&xh(e.endAt,t.endAt)}function dl(e){return nt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DT(e,t,n,r,s,i,a,l){return new di(e,t,n,r,s,i,a,l)}function su(e){return new di(e)}function Nh(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function xp(e){return e.collectionGroup!==null}function Us(e){const t=ft(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ne(de.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(t).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new yo(i,r))})),n.has(de.keyField().canonicalString())||t.Ie.push(new yo(de.keyField(),r))}return t.Ie}function ln(e){const t=ft(e);return t.Ee||(t.Ee=xT(t,Us(e))),t.Ee}function xT(e,t){if(e.limitType==="F")return Oh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new yo(s.field,i)}));const n=e.endAt?new _o(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new _o(e.startAt.position,e.startAt.inclusive):null;return Oh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function pl(e,t){const n=e.filters.concat([t]);return new di(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ml(e,t,n){return new di(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Bo(e,t){return ru(ln(e),ln(t))&&e.limitType===t.limitType}function Op(e){return`${nu(ln(e))}|lt:${e.limitType}`}function Or(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>Vp(s))).join(", ")}]`),Uo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Qr(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Qr(s))).join(",")),`Target(${r})`})(ln(e))}; limitType=${e.limitType})`}function qo(e,t){return t.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):nt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(e,t)&&(function(r,s){for(const i of Us(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(e,t)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(e,t)&&(function(r,s){return!(r.startAt&&!(function(a,l,u){const h=Dh(a,l,u);return a.inclusive?h<=0:h<0})(r.startAt,Us(r),s)||r.endAt&&!(function(a,l,u){const h=Dh(a,l,u);return a.inclusive?h>=0:h>0})(r.endAt,Us(r),s))})(e,t)}function OT(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Np(e){return(t,n)=>{let r=!1;for(const s of Us(e)){const i=NT(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function NT(e,t,n){const r=e.field.isKeyField()?nt.comparator(t.key,n.key):(function(i,a,l){const u=a.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Wr(u,h):ut(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ut(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){er(this.inner,((n,r)=>{for(const[s,i]of r)t(s,i)}))}isEmpty(){return _p(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new zt(nt.comparator);function bn(){return MT}const Mp=new zt(nt.comparator);function Ss(...e){let t=Mp;for(const n of e)t=t.insert(n.key,n);return t}function kp(e){let t=Mp;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function pr(){return js()}function Lp(){return js()}function js(){return new Ir((e=>e.toString()),((e,t)=>e.isEqual(t)))}const kT=new zt(nt.comparator),LT=new ne(nt.comparator);function vt(...e){let t=LT;for(const n of e)t=t.add(n);return t}const $T=new ne(yt);function FT(){return $T}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:po(t)?"-0":t}}function $p(e){return{integerValue:""+e}}function UT(e,t){return dT(t)?$p(t):iu(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this._=void 0}}function jT(e,t,n){return e instanceof vo?(function(s,i){const a={fields:{[Ep]:{stringValue:vp},[wp]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&tu(i)&&(i=jo(i)),i&&(a.fields[Tp]=i),{mapValue:a}})(n,t):e instanceof ii?Up(e,t):e instanceof oi?jp(e,t):(function(s,i){const a=Fp(s,i),l=Mh(a)+Mh(s.Ae);return hl(a)&&hl(s.Ae)?$p(l):iu(s.serializer,l)})(e,t)}function BT(e,t,n){return e instanceof ii?Up(e,t):e instanceof oi?jp(e,t):n}function Fp(e,t){return e instanceof Eo?(function(r){return hl(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(t)?t:{integerValue:0}:null}class vo extends Ho{}class ii extends Ho{constructor(t){super(),this.elements=t}}function Up(e,t){const n=Bp(t);for(const r of e.elements)n.some((s=>pn(s,r)))||n.push(r);return{arrayValue:{values:n}}}class oi extends Ho{constructor(t){super(),this.elements=t}}function jp(e,t){let n=Bp(t);for(const r of e.elements)n=n.filter((s=>!pn(s,r)));return{arrayValue:{values:n}}}class Eo extends Ho{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function Mh(e){return Gt(e.integerValue||e.doubleValue)}function Bp(e){return eu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function qT(e,t){return e.field.isEqual(t.field)&&(function(r,s){return r instanceof ii&&s instanceof ii||r instanceof oi&&s instanceof oi?Gr(r.elements,s.elements,pn):r instanceof Eo&&s instanceof Eo?pn(r.Ae,s.Ae):r instanceof vo&&s instanceof vo})(e.transform,t.transform)}class HT{constructor(t,n){this.version=t,this.transformResults=n}}class De{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new De}static exists(t){return new De(void 0,t)}static updateTime(t){return new De(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ki(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class zo{}function qp(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Ko(e.key,De.none()):new pi(e.key,e.data,De.none());{const n=e.data,r=Ve.empty();let s=new ne(de.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new nr(e.key,r,new Fe(s.toArray()),De.none())}}function zT(e,t,n){e instanceof pi?(function(s,i,a){const l=s.value.clone(),u=Lh(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(e,t,n):e instanceof nr?(function(s,i,a){if(!Ki(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Lh(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Hp(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(e,t,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,n)}function Bs(e,t,n,r){return e instanceof pi?(function(i,a,l,u){if(!Ki(i.precondition,a))return l;const h=i.value.clone(),f=$h(i.fieldTransforms,u,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(e,t,n,r):e instanceof nr?(function(i,a,l,u){if(!Ki(i.precondition,a))return l;const h=$h(i.fieldTransforms,u,a),f=a.data;return f.setAll(Hp(i)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(e,t,n,r):(function(i,a,l){return Ki(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(e,t,n)}function KT(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=Fp(r.transform,s||null);i!=null&&(n===null&&(n=Ve.empty()),n.set(r.field,i))}return n||null}function kh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Gr(r,s,((i,a)=>qT(i,a)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class pi extends zo{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class nr extends zo{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Hp(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Lh(e,t,n){const r=new Map;Ct(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,BT(a,l,n[s]))}return r}function $h(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,jT(i,a,t))}return r}class Ko extends zo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GT extends zo{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&zT(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Bs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Bs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Lp();return this.mutations.forEach((s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=qp(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ht.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),vt())}isEqual(t){return this.batchId===t.batchId&&Gr(this.mutations,t.mutations,((n,r)=>kh(n,r)))&&Gr(this.baseMutations,t.baseMutations,((n,r)=>kh(n,r)))}}class ou{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){Ct(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let s=(function(){return kT})();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new ou(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,wt;function YT(e){switch(e){case F.OK:return ut(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ut(15467,{code:e})}}function zp(e){if(e===void 0)return An("GRPC error has no .code"),F.UNKNOWN;switch(e){case Wt.OK:return F.OK;case Wt.CANCELLED:return F.CANCELLED;case Wt.UNKNOWN:return F.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return F.INTERNAL;case Wt.UNAVAILABLE:return F.UNAVAILABLE;case Wt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Wt.NOT_FOUND:return F.NOT_FOUND;case Wt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Wt.ABORTED:return F.ABORTED;case Wt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Wt.DATA_LOSS:return F.DATA_LOSS;default:return ut(39323,{code:e})}}(wt=Wt||(Wt={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=new Bn([4294967295,4294967295],0);function Fh(e){const t=JT().encode(e),n=new op;return n.update(t),new Uint8Array(n.digest())}function Uh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Bn([n,r],0),new Bn([s,i],0)]}class au{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cs(`Invalid padding: ${n}`);if(r<0)throw new Cs(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Cs(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Cs(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Bn.fromNumber(this.ge)}ye(t,n,r){let s=t.add(n.multiply(Bn.fromNumber(r)));return s.compare(ZT)===1&&(s=new Bn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Fh(t),[r,s]=Uh(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new au(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(t){if(this.ge===0)return;const n=Fh(t),[r,s]=Uh(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Cs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,mi.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Go(ht.min(),s,new zt(yt),bn(),vt())}}class mi{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new mi(r,n,vt(),vt(),vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(t,n,r,s){this.be=t,this.removedTargetIds=n,this.key=r,this.De=s}}class Kp{constructor(t,n){this.targetId=t,this.Ce=n}}class Gp{constructor(t,n,r=pe.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class jh{constructor(){this.ve=0,this.Fe=Bh(),this.Me=pe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=vt(),n=vt(),r=vt();return this.Fe.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ut(38017,{changeType:i})}})),new mi(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=Bh()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tw{constructor(t){this.Ge=t,this.ze=new Map,this.je=bn(),this.Je=Li(),this.He=Li(),this.Ye=new zt(yt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:ut(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(t){const n=t.targetId,r=t.Ce.count,s=this.ot(n);if(s){const i=s.target;if(dl(i))if(r===0){const a=new nt(i.path);this.et(n,a,Te.newNoDocument(a,ht.min()))}else Ct(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Qn(r).toUint8Array()}catch(u){if(u instanceof yp)return Kr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new au(a,s,i)}catch(u){return Kr(u instanceof Cs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(n,i,null),s++)})),s}Tt(t){const n=new Map;this.ze.forEach(((i,a)=>{const l=this.ot(a);if(l){if(i.current&&dl(l.target)){const u=new nt(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Te.newNoDocument(u,t))}i.Be&&(n.set(a,i.ke()),i.qe())}}));let r=vt();this.He.forEach(((i,a)=>{let l=!0;a.forEachWhile((u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(t)));const s=new Go(t,n,this.Ye,this.je,r);return this.je=bn(),this.Je=Li(),this.He=Li(),this.Ye=new zt(yt),s}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new jh,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new ne(yt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new ne(yt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||tt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new jh),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Li(){return new zt(nt.comparator)}function Bh(){return new zt(nt.comparator)}const ew={asc:"ASCENDING",desc:"DESCENDING"},nw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rw={and:"AND",or:"OR"};class sw{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function gl(e,t){return e.useProto3Json||Uo(t)?t:{value:t}}function To(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Wp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function iw(e,t){return To(e,t.toTimestamp())}function un(e){return Ct(!!e,49232),ht.fromTimestamp((function(n){const r=Wn(n);return new Nt(r.seconds,r.nanos)})(e))}function lu(e,t){return _l(e,t).canonicalString()}function _l(e,t){const n=(function(s){return new Ut(["projects",s.projectId,"databases",s.database])})(e).child("documents");return t===void 0?n:n.child(t)}function Qp(e){const t=Ut.fromString(e);return Ct(tm(t),10190,{key:t.toString()}),t}function yl(e,t){return lu(e.databaseId,t.path)}function Ma(e,t){const n=Qp(t);if(n.get(1)!==e.databaseId.projectId)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new nt(Yp(n))}function Xp(e,t){return lu(e.databaseId,t)}function ow(e){const t=Qp(e);return t.length===4?Ut.emptyPath():Yp(t)}function vl(e){return new Ut(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Yp(e){return Ct(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function qh(e,t,n){return{name:yl(e,t),fields:n.value.mapValue.fields}}function aw(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ut(39313,{state:h})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(Ct(f===void 0||typeof f=="string",58123),pe.fromBase64String(f||"")):(Ct(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),pe.fromUint8Array(f||new Uint8Array))})(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&(function(h){const f=h.code===void 0?F.UNKNOWN:zp(h.code);return new Z(f,h.message||"")})(a);n=new Gp(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ma(e,r.document.name),i=un(r.document.updateTime),a=r.document.createTime?un(r.document.createTime):ht.min(),l=new Ve({mapValue:{fields:r.document.fields}}),u=Te.newFoundDocument(s,i,a,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Gi(h,f,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Ma(e,r.document),i=r.readTime?un(r.readTime):ht.min(),a=Te.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Gi([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Ma(e,r.document),i=r.removedTargetIds||[];n=new Gi([],i,s,null)}else{if(!("filter"in t))return ut(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new XT(s,i),l=r.targetId;n=new Kp(l,a)}}return n}function lw(e,t){let n;if(t instanceof pi)n={update:qh(e,t.key,t.value)};else if(t instanceof Ko)n={delete:yl(e,t.key)};else if(t instanceof nr)n={update:qh(e,t.key,t.data),updateMask:_w(t.fieldMask)};else{if(!(t instanceof GT))return ut(16599,{Vt:t.type});n={verify:yl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof vo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ii)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof oi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Eo)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw ut(20930,{transform:a.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:iw(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ut(27497)})(e,t.precondition)),n}function uw(e,t){return e&&e.length>0?(Ct(t!==void 0,14353),e.map((n=>(function(s,i){let a=s.updateTime?un(s.updateTime):un(i);return a.isEqual(ht.min())&&(a=un(i)),new HT(a,s.transformResults||[])})(n,t)))):[]}function cw(e,t){return{documents:[Xp(e,t.path)]}}function hw(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Xp(e,s);const i=(function(h){if(h.length!==0)return Zp(Qe.create(h,"and"))})(t.filters);i&&(n.structuredQuery.where=i);const a=(function(h){if(h.length!==0)return h.map((f=>(function(m){return{field:Nr(m.field),direction:pw(m.dir)}})(f)))})(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=gl(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(t.endAt)),{ft:n,parent:s}}function fw(e){let t=ow(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ct(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:t=t.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const m=Jp(p);return m instanceof Qe&&Cp(m)?m.getFilters():[m]})(n.where));let a=[];n.orderBy&&(a=(function(p){return p.map((m=>(function(A){return new yo(Mr(A.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(m)))})(n.orderBy));let l=null;n.limit&&(l=(function(p){let m;return m=typeof p=="object"?p.value:p,Uo(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){const m=!!p.before,_=p.values||[];return new _o(_,m)})(n.startAt));let h=null;return n.endAt&&(h=(function(p){const m=!p.before,_=p.values||[];return new _o(_,m)})(n.endAt)),DT(t,s,a,i,l,"F",u,h)}function dw(e,t){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut(28987,{purpose:s})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Jp(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Mr(n.unaryFilter.field);return Qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Mr(n.unaryFilter.field);return Qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Mr(n.unaryFilter.field);return Qt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Mr(n.unaryFilter.field);return Qt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ut(61313);default:return ut(60726)}})(e):e.fieldFilter!==void 0?(function(n){return Qt.create(Mr(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ut(58110);default:return ut(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return Qe.create(n.compositeFilter.filters.map((r=>Jp(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ut(1026)}})(n.compositeFilter.op))})(e):ut(30097,{filter:e})}function pw(e){return ew[e]}function mw(e){return nw[e]}function gw(e){return rw[e]}function Nr(e){return{fieldPath:e.canonicalString()}}function Mr(e){return de.fromServerFormat(e.fieldPath)}function Zp(e){return e instanceof Qt?(function(n){if(n.op==="=="){if(Vh(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NAN"}};if(Ph(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vh(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NOT_NAN"}};if(Ph(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nr(n.field),op:mw(n.op),value:n.value}}})(e):e instanceof Qe?(function(n){const r=n.getFilters().map((s=>Zp(s)));return r.length===1?r[0]:{compositeFilter:{op:gw(n.op),filters:r}}})(e):ut(54877,{filter:e})}function _w(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function tm(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t,n,r,s,i=ht.min(),a=ht.min(),l=pe.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new $n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new $n(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new $n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new $n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(t){this.yt=t}}function vw(e){const t=fw({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ml(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.Cn=new Tw}addToCollectionParentIndex(t,n){return this.Cn.add(n),j.resolve()}getCollectionParents(t,n){return j.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return j.resolve()}deleteFieldIndex(t,n){return j.resolve()}deleteAllFieldIndexes(t){return j.resolve()}createTargetIndexes(t,n){return j.resolve()}getDocumentsMatchingTarget(t,n){return j.resolve(null)}getIndexType(t,n){return j.resolve(0)}getFieldIndexes(t,n){return j.resolve([])}getNextCollectionGroupToUpdate(t){return j.resolve(null)}getMinOffset(t,n){return j.resolve(Gn.min())}getMinOffsetFromCollectionGroup(t,n){return j.resolve(Gn.min())}updateCollectionGroup(t,n,r){return j.resolve()}updateIndexEntries(t,n){return j.resolve()}}class Tw{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new ne(Ut.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new ne(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},em=41943040;class Ce{static withCacheSize(t){return new Ce(t,Ce.DEFAULT_COLLECTION_PERCENTILE,Ce.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ce.DEFAULT_COLLECTION_PERCENTILE=10,Ce.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ce.DEFAULT=new Ce(em,Ce.DEFAULT_COLLECTION_PERCENTILE,Ce.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ce.DISABLED=new Ce(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Xr(0)}static cr(){return new Xr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="LruGarbageCollector",ww=1048576;function Kh([e,t],[n,r]){const s=yt(e,n);return s===0?yt(t,r):s}class Iw{constructor(t){this.Ir=t,this.buffer=new ne(Kh),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Kh(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Aw{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){tt(zh,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){rs(n)?tt(zh,"Ignoring IndexedDB error during garbage collection: ",n):await ns(n)}await this.Vr(3e5)}))}}class bw{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return j.resolve(Fo.ce);const r=new Iw(n);return this.mr.forEachTarget(t,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(t,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(Hh)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hh):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,s,i,a,l,u,h;const f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(t,s)))).next((p=>(r=p,l=Date.now(),this.removeTargets(t,r,n)))).next((p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(t,r)))).next((p=>(h=Date.now(),xr()<=It.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function Rw(e,t){return new bw(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(){this.changes=new Ir((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Te.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,n)))).next((s=>(r!==null&&Bs(r.mutation,s,Fe.empty(),Nt.now()),s)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,vt()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=vt()){const s=pr();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,r).next((i=>{let a=Ss();return i.forEach(((l,u)=>{a=a.insert(l,u.overlayedDocument)})),a}))))}getOverlayedDocuments(t,n){const r=pr();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,vt())))}populateOverlays(t,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(t,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(t,n,r,s){let i=bn();const a=js(),l=(function(){return js()})();return n.forEach(((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof nr)?i=i.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),Bs(f.mutation,h,f.mutation.getFieldMask(),Nt.now())):a.set(h.key,Fe.empty())})),this.recalculateAndSaveOverlays(t,i).next((u=>(u.forEach(((h,f)=>a.set(h,f))),n.forEach(((h,f)=>l.set(h,new Cw(f,a.get(h)??null)))),l)))}recalculateAndSaveOverlays(t,n){const r=js();let s=new zt(((a,l)=>a-l)),i=vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((a=>{for(const l of a)l.keys().forEach((u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||Fe.empty();f=l.applyToLocalView(h,f),r.set(u,f);const p=(s.get(l.batchId)||vt()).add(u);s=s.insert(l.batchId,p)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,p=Lp();f.forEach((m=>{if(!i.has(m)){const _=qp(n.get(m),r.get(m));_!==null&&p.set(m,_),i=i.add(m)}})),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return j.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,s){return(function(a){return nt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):xp(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):j.resolve(pr());let l=ei,u=i;return a.next((h=>j.forEach(h,((f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?j.resolve():this.remoteDocumentCache.getEntry(t,f).next((m=>{u=u.insert(f,m)}))))).next((()=>this.populateOverlays(t,h,i))).next((()=>this.computeViews(t,u,h,vt()))).next((f=>({batchId:l,changes:kp(f)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new nt(n)).next((r=>{let s=Ss();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=Ss();return this.indexManager.getCollectionParents(t,i).next((l=>j.forEach(l,(u=>{const h=(function(p,m){return new di(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(t,h,r,s).next((f=>{f.forEach(((p,m)=>{a=a.insert(p,m)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s)))).next((a=>{i.forEach(((u,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,Te.newInvalidDocument(f)))}));let l=Ss();return a.forEach(((u,h)=>{const f=i.get(u);f!==void 0&&Bs(f.mutation,h,Fe.empty(),Nt.now()),qo(n,h)&&(l=l.insert(u,h))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return j.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:un(s.createTime)}})(n)),j.resolve()}getNamedQuery(t,n){return j.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:vw(s.bundledQuery),readTime:un(s.readTime)}})(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(){this.overlays=new zt(nt.comparator),this.qr=new Map}getOverlay(t,n){return j.resolve(this.overlays.get(n))}getOverlays(t,n){const r=pr();return j.forEach(n,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((s,i)=>{this.St(t,n,i)})),j.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(t,n,r){const s=pr(),i=n.length+1,a=new nt(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return j.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new zt(((h,f)=>h-f));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=pr(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=pr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,f)=>l.set(h,f))),!(l.size()>=s)););return j.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new QT(n,r));let i=this.qr.get(n);i===void 0&&(i=vt(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this.sessionToken=pe.EMPTY_BYTE_STRING}getSessionToken(t){return j.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this.Qr=new ne(le.$r),this.Ur=new ne(le.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new le(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new le(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new nt(new Ut([])),r=new le(n,t),s=new le(n,t+1),i=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),i.push(a.key)})),i}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new nt(new Ut([])),r=new le(n,t),s=new le(n,t+1);let i=vt();return this.Ur.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(t){const n=new le(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class le{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return nt.comparator(t.key,n.key)||yt(t.Yr,n.Yr)}static Kr(t,n){return yt(t.Yr,n.Yr)||nt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ne(le.$r)}checkEmpty(t){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new WT(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new le(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return j.resolve(a)}lookupMutationBatch(t,n){return j.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Zl:this.tr-1)}getAllMutationBatches(t){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new le(n,0),s=new le(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(a=>{const l=this.Xr(a.Yr);i.push(l)})),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new ne(yt);return n.forEach((s=>{const i=new le(s,0),a=new le(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],(l=>{r=r.add(l.Yr)}))})),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;nt.isDocumentKey(i)||(i=i.child(""));const a=new le(new nt(i),0);let l=new ne(yt);return this.Zr.forEachWhile((u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)}),a),j.resolve(this.ti(l))}ti(t){const n=[];return t.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(t,n){Ct(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(n.mutations,(s=>{const i=new le(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new le(n,0),s=this.Zr.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,j.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(t){this.ri=t,this.docs=(function(){return new zt(nt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():Te.newInvalidDocument(n))}getEntries(t,n){let r=bn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Te.newInvalidDocument(s))})),j.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=bn();const a=n.path,l=new nt(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||uT(lT(f),r)<=0||(s.has(f.key)||qo(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(t,n,r,s){ut(9500)}ii(t,n){return j.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new Mw(this)}getSize(t){return j.resolve(this.size)}}class Mw extends Sw{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(r)})),j.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(t){this.persistence=t,this.si=new Ir((n=>nu(n)),ru),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.oi=0,this._i=new uu,this.targetCount=0,this.ai=Xr.ur()}forEachTarget(t,n){return this.si.forEach(((r,s)=>n(s))),j.resolve()}getLastRemoteSnapshotVersion(t){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return j.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),j.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Xr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,j.resolve()}updateTargetData(t,n){return this.Pr(n),j.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.si.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),j.waitFor(i).next((()=>s))}getTargetCount(t){return j.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return j.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),j.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(t,a))})),j.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),j.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return j.resolve(r)}containsKey(t,n){return j.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(t,n){this.ui={},this.overlays={},this.ci=new Fo(0),this.li=!1,this.li=!0,this.hi=new xw,this.referenceDelegate=t(this),this.Pi=new kw(this),this.indexManager=new Ew,this.remoteDocumentCache=(function(s){return new Nw(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new yw(n),this.Ii=new Vw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Dw,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new Ow(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){tt("MemoryPersistence","Starting transaction:",t);const s=new Lw(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(t,n){return j.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class Lw extends hT{constructor(t){super(),this.currentSequenceNumber=t}}class cu{constructor(t){this.persistence=t,this.Ri=new uu,this.Vi=null}static mi(t){return new cu(t)}get fi(){if(this.Vi)return this.Vi;throw ut(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),j.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),j.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,(r=>{const s=nt.fromPath(r);return this.gi(t,s).next((i=>{i||n.removeEntry(s,ht.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return j.or([()=>j.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class wo{constructor(t,n){this.persistence=t,this.pi=new Ir((r=>pT(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=Rw(this,n)}static mi(t,n){return new wo(t,n)}Ei(){}di(t){return j.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((s=>r+s))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return j.forEach(this.pi,((r,s)=>this.br(t,r,s).next((i=>i?j.resolve():n(s)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(t,(a=>this.br(t,a,n).next((l=>{l||(r++,i.removeEntry(a,ht.min()))})))).next((()=>i.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),j.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),j.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),j.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),j.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Hi(t.data.value)),n}br(t,n,r){return j.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return j.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=s}static As(t,n){let r=vt(),s=vt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new hu(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Vv()?8:fT(Cv())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ys(t,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ws(t,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new $w;return this.Ss(t,n,a).next((l=>{if(i.result=l,this.Vs)return this.bs(t,n,a,l.size)}))})).next((()=>i.result))}bs(t,n,r,s){return r.documentReadCount<this.fs?(xr()<=It.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",Or(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(xr()<=It.DEBUG&&tt("QueryEngine","Query:",Or(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(xr()<=It.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",Or(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ln(n))):j.resolve())}ys(t,n){if(Nh(n))return j.resolve(null);let r=ln(n);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=ml(n,null,"F"),r=ln(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((i=>{const a=vt(...i);return this.ps.getDocuments(t,a).next((l=>this.indexManager.getMinOffset(t,r).next((u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(t,ml(n,null,"F")):this.vs(t,h,n,u)}))))})))))}ws(t,n,r,s){return Nh(n)||s.isEqual(ht.min())?j.resolve(null):this.ps.getDocuments(t,r).next((i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?j.resolve(null):(xr()<=It.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Or(n)),this.vs(t,a,n,aT(s,ei)).next((l=>l)))}))}Ds(t,n){let r=new ne(Np(t));return n.forEach(((s,i)=>{qo(t,i)&&(r=r.add(i))})),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,n,r){return xr()<=It.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",Or(n)),this.ps.getDocumentsMatchingQuery(t,n,Gn.min(),r)}vs(t,n,r,s){return this.ps.getDocumentsMatchingQuery(t,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu="LocalStore",Uw=3e8;class jw{constructor(t,n,r,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new zt(yt),this.xs=new Ir((i=>nu(i)),ru),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Pw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function Bw(e,t,n,r){return new jw(e,t,n,r)}async function rm(e,t){const n=ft(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let u=vt();for(const h of s){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:l})))}))}))}function qw(e,t){const n=ft(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,u,h,f){const p=h.batch,m=p.keys();let _=j.resolve();return m.forEach((A=>{_=_.next((()=>f.getEntry(u,A))).next((C=>{const D=h.docVersions.get(A);Ct(D!==null,48541),C.version.compareTo(D)<0&&(p.applyToRemoteDocument(C,h),C.isValidDocument()&&(C.setReadTime(h.commitVersion),f.addEntry(C)))}))})),_.next((()=>l.mutationQueue.removeMutationBatch(u,p)))})(n,r,t,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let u=vt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u})(t)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function sm(e){const t=ft(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function Hw(e,t){const n=ft(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach(((f,p)=>{const m=s.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p))));let _=m.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(p)!==null?_=_.withResumeToken(pe.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),s=s.insert(p,_),(function(C,D,M){return C.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=Uw?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(m,_,f)&&l.push(n.Pi.updateTargetData(i,_))}));let u=bn(),h=vt();if(t.documentUpdates.forEach((f=>{t.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),l.push(zw(i,a,t.documentUpdates).next((f=>{u=f.ks,h=f.qs}))),!r.isEqual(ht.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(f)}return j.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,u,h))).next((()=>u))})).then((i=>(n.Ms=s,i)))}function zw(e,t,n){let r=vt(),s=vt();return n.forEach((i=>r=r.add(i))),t.getEntries(e,r).next((i=>{let a=bn();return n.forEach(((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ht.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):tt(fu,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)})),{ks:a,qs:s}}))}function Kw(e,t){const n=ft(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=Zl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function Gw(e,t){const n=ft(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,t).next((i=>i?(s=i,j.resolve(s)):n.Pi.allocateTargetId(r).next((a=>(s=new $n(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function El(e,t,n){const r=ft(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!rs(a))throw a;tt(fu,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Gh(e,t,n){const r=ft(e);let s=ht.min(),i=vt();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,h,f){const p=ft(u),m=p.xs.get(f);return m!==void 0?j.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,f)})(r,a,ln(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next((u=>{i=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,t,n?s:ht.min(),n?i:vt()))).next((l=>(Ww(r,OT(t),l),{documents:l,Qs:i})))))}function Ww(e,t,n){let r=e.Os.get(t)||ht.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),e.Os.set(t,r)}class Wh{constructor(){this.activeTargetIds=FT()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Qw{constructor(){this.Mo=new Wh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Wh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="ConnectivityMonitor";class Xh{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){tt(Qh,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){tt(Qh,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $i=null;function Tl(){return $i===null?$i=(function(){return 268435456+Math.round(2147483648*Math.random())})():$i++,"0x"+$i.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="RestConnection",Yw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Jw{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===mo?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(t,n,r,s,i){const a=Tl(),l=this.zo(t,n.toUriEncodedString());tt(ka,`Sending RPC '${t}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:h}=new URL(l),f=Ql(h);return this.Jo(t,l,u,r,f).then((p=>(tt(ka,`Received RPC '${t}' ${a}: `,p),p)),(p=>{throw Kr(ka,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",r),p}))}Ho(t,n,r,s,i,a){return this.Go(t,n,r,s,i)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+es})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>t[i]=s)),r&&r.headers.forEach(((s,i)=>t[i]=s))}zo(t,n){const r=Yw[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye="WebChannelConnection";class tI extends Jw{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=Tl();return new Promise(((l,u)=>{const h=new ap;h.setWithCredentials(!0),h.listenOnce(lp.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case qi.NO_ERROR:const p=h.getResponseJson();tt(ye,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case qi.TIMEOUT:tt(ye,`RPC '${t}' ${a} timed out`),u(new Z(F.DEADLINE_EXCEEDED,"Request time out"));break;case qi.HTTP_ERROR:const m=h.getStatus();if(tt(ye,`RPC '${t}' ${a} failed with status:`,m,"response text:",h.getResponseText()),m>0){let _=h.getResponseJson();Array.isArray(_)&&(_=_[0]);const A=_?.error;if(A&&A.status&&A.message){const C=(function(M){const H=M.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(H)>=0?H:F.UNKNOWN})(A.status);u(new Z(C,A.message))}else u(new Z(F.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Z(F.UNAVAILABLE,"Connection failed."));break;default:ut(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{tt(ye,`RPC '${t}' ${a} completed.`)}}));const f=JSON.stringify(s);tt(ye,`RPC '${t}' ${a} sending request:`,s),h.send(n,"POST",f,r,15)}))}T_(t,n,r){const s=Tl(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=hp(),l=cp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");tt(ye,`Creating RPC '${t}' stream ${s}: ${f}`,u);const p=a.createWebChannel(f,u);this.I_(p);let m=!1,_=!1;const A=new Zw({Yo:D=>{_?tt(ye,`Not sending because RPC '${t}' stream ${s} is closed:`,D):(m||(tt(ye,`Opening RPC '${t}' stream ${s} transport.`),p.open(),m=!0),tt(ye,`RPC '${t}' stream ${s} sending:`,D),p.send(D))},Zo:()=>p.close()}),C=(D,M,H)=>{D.listen(M,(Q=>{try{H(Q)}catch(q){setTimeout((()=>{throw q}),0)}}))};return C(p,Rs.EventType.OPEN,(()=>{_||(tt(ye,`RPC '${t}' stream ${s} transport opened.`),A.o_())})),C(p,Rs.EventType.CLOSE,(()=>{_||(_=!0,tt(ye,`RPC '${t}' stream ${s} transport closed`),A.a_(),this.E_(p))})),C(p,Rs.EventType.ERROR,(D=>{_||(_=!0,Kr(ye,`RPC '${t}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),A.a_(new Z(F.UNAVAILABLE,"The operation could not be completed")))})),C(p,Rs.EventType.MESSAGE,(D=>{if(!_){const M=D.data[0];Ct(!!M,16349);const H=M,Q=H?.error||H[0]?.error;if(Q){tt(ye,`RPC '${t}' stream ${s} received error:`,Q);const q=Q.status;let rt=(function(v){const w=Wt[v];if(w!==void 0)return zp(w)})(q),lt=Q.message;rt===void 0&&(rt=F.INTERNAL,lt="Unknown error status: "+q+" with message "+Q.message),_=!0,A.a_(new Z(rt,lt)),p.close()}else tt(ye,`RPC '${t}' stream ${s} received:`,M),A.u_(M)}})),C(l,up.STAT_EVENT,(D=>{D.stat===ll.PROXY?tt(ye,`RPC '${t}' stream ${s} detected buffering proxy`):D.stat===ll.NOPROXY&&tt(ye,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function La(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(e){return new sw(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(t,n,r=1e3,s=1.5,i=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&tt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh="PersistentStream";class om{constructor(t,n,r,s,i,a,l,u){this.Mi=t,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new im(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{t((()=>{const s=new Z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return tt(Yh,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(tt(Yh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eI extends om{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=aw(this.serializer,t),r=(function(i){if(!("targetChange"in i))return ht.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ht.min():a.readTime?un(a.readTime):ht.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=vl(this.serializer),n.addTarget=(function(i,a){let l;const u=a.target;if(l=dl(u)?{documents:cw(i,u)}:{query:hw(i,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Wp(i,a.resumeToken);const h=gl(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(ht.min())>0){l.readTime=To(i,a.snapshotVersion.toTimestamp());const h=gl(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,t);const r=dw(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=vl(this.serializer),n.removeTarget=t,this.q_(n)}}class nI extends om{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Ct(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ct(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ct(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=uw(t.writeResults,t.commitTime),r=un(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=vl(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>lw(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{}class sI extends rI{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(t,_l(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(F.UNKNOWN,i.toString())}))}Ho(t,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Ho(t,_l(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(F.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class iI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(An(n),this.aa=!1):tt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="RemoteStore";class oI{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Ar(this)&&(tt(Er,"Restarting streams for network reachability change."),await(async function(u){const h=ft(u);h.Ea.add(4),await gi(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Qo(h)})(this))}))})),this.Ra=new iI(r,s)}}async function Qo(e){if(Ar(e))for(const t of e.da)await t(!0)}async function gi(e){for(const t of e.da)await t(!1)}function am(e,t){const n=ft(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),gu(n)?mu(n):ss(n).O_()&&pu(n,t))}function du(e,t){const n=ft(e),r=ss(n);n.Ia.delete(t),r.O_()&&lm(n,t),n.Ia.size===0&&(r.O_()?r.L_():Ar(n)&&n.Ra.set("Unknown"))}function pu(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ht.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ss(e).Y_(t)}function lm(e,t){e.Va.Ue(t),ss(e).Z_(t)}function mu(e){e.Va=new tw({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),ss(e).start(),e.Ra.ua()}function gu(e){return Ar(e)&&!ss(e).x_()&&e.Ia.size>0}function Ar(e){return ft(e).Ea.size===0}function um(e){e.Va=void 0}async function aI(e){e.Ra.set("Online")}async function lI(e){e.Ia.forEach(((t,n)=>{pu(e,t)}))}async function uI(e,t){um(e),gu(e)?(e.Ra.ha(t),mu(e)):e.Ra.set("Unknown")}async function cI(e,t,n){if(e.Ra.set("Online"),t instanceof Gp&&t.state===2&&t.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))})(e,t)}catch(r){tt(Er,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Io(e,r)}else if(t instanceof Gi?e.Va.Ze(t):t instanceof Kp?e.Va.st(t):e.Va.tt(t),!n.isEqual(ht.min()))try{const r=await sm(e.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(u.resumeToken,a))}})),l.targetMismatches.forEach(((u,h)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(pe.EMPTY_BYTE_STRING,f.snapshotVersion)),lm(i,u);const p=new $n(f.target,u,h,f.sequenceNumber);pu(i,p)})),i.remoteSyncer.applyRemoteEvent(l)})(e,n)}catch(r){tt(Er,"Failed to raise snapshot:",r),await Io(e,r)}}async function Io(e,t,n){if(!rs(t))throw t;e.Ea.add(1),await gi(e),e.Ra.set("Offline"),n||(n=()=>sm(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{tt(Er,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Qo(e)}))}function cm(e,t){return t().catch((n=>Io(e,n,t)))}async function Xo(e){const t=ft(e),n=Yn(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Zl;for(;hI(t);)try{const s=await Kw(t.localStore,r);if(s===null){t.Ta.length===0&&n.L_();break}r=s.batchId,fI(t,s)}catch(s){await Io(t,s)}hm(t)&&fm(t)}function hI(e){return Ar(e)&&e.Ta.length<10}function fI(e,t){e.Ta.push(t);const n=Yn(e);n.O_()&&n.X_&&n.ea(t.mutations)}function hm(e){return Ar(e)&&!Yn(e).x_()&&e.Ta.length>0}function fm(e){Yn(e).start()}async function dI(e){Yn(e).ra()}async function pI(e){const t=Yn(e);for(const n of e.Ta)t.ea(n.mutations)}async function mI(e,t,n){const r=e.Ta.shift(),s=ou.from(r,t,n);await cm(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await Xo(e)}async function gI(e,t){t&&Yn(e).X_&&await(async function(r,s){if((function(a){return YT(a)&&a!==F.ABORTED})(s.code)){const i=r.Ta.shift();Yn(r).B_(),await cm(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Xo(r)}})(e,t),hm(e)&&fm(e)}async function Jh(e,t){const n=ft(e);n.asyncQueue.verifyOperationInProgress(),tt(Er,"RemoteStore received new credentials");const r=Ar(n);n.Ea.add(3),await gi(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Qo(n)}async function _I(e,t){const n=ft(e);t?(n.Ea.delete(2),await Qo(n)):t||(n.Ea.add(2),await gi(n),n.Ra.set("Unknown"))}function ss(e){return e.ma||(e.ma=(function(n,r,s){const i=ft(n);return i.sa(),new eI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:aI.bind(null,e),t_:lI.bind(null,e),r_:uI.bind(null,e),H_:cI.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),gu(e)?mu(e):e.Ra.set("Unknown")):(await e.ma.stop(),um(e))}))),e.ma}function Yn(e){return e.fa||(e.fa=(function(n,r,s){const i=ft(n);return i.sa(),new nI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:dI.bind(null,e),r_:gI.bind(null,e),ta:pI.bind(null,e),na:mI.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await Xo(e)):(await e.fa.stop(),e.Ta.length>0&&(tt(Er,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new _u(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(F.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yu(e,t){if(An("AsyncQueue",`${t}: ${e}`),rs(e))return new Z(F.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{static emptySet(t){return new Hr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||nt.comparator(n.key,r.key):(n,r)=>nt.comparator(n.key,r.key),this.keyedMap=Ss(),this.sortedSet=new zt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Hr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Hr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(){this.ga=new zt(nt.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):ut(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Yr{constructor(t,n,r,s,i,a,l,u,h){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new Yr(t,n,Hr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class vI{constructor(){this.queries=tf(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ft(n),i=s.queries;s.queries=tf(),i.forEach(((a,l)=>{for(const u of l.Sa)u.onError(r)}))})(this,new Z(F.ABORTED,"Firestore shutting down"))}}function tf(){return new Ir((e=>Op(e)),Bo)}async function dm(e,t){const n=ft(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new yI,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=yu(a,`Initialization of query '${Or(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&vu(n)}async function pm(e,t){const n=ft(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(t);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function EI(e,t){const n=ft(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&vu(n)}function TI(e,t,n){const r=ft(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function vu(e){e.Ca.forEach((t=>{t.next()}))}var wl,ef;(ef=wl||(wl={})).Ma="default",ef.Cache="cache";class mm{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Yr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Yr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==wl.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(t){this.key=t}}class _m{constructor(t){this.key=t}}class wI{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=vt(),this.mutatedKeys=vt(),this.eu=Np(t),this.tu=new Hr(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new Zh,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((f,p)=>{const m=s.get(f),_=qo(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),C=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let D=!1;m&&_?m.data.isEqual(_.data)?A!==C&&(r.track({type:3,doc:_}),D=!0):this.su(m,_)||(r.track({type:2,doc:_}),D=!0,(u&&this.eu(_,u)>0||h&&this.eu(_,h)<0)&&(l=!0)):!m&&_?(r.track({type:0,doc:_}),D=!0):m&&!_&&(r.track({type:1,doc:m}),D=!0,(u||h)&&(l=!0)),D&&(_?(a=a.add(_),i=C?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort(((f,p)=>(function(_,A){const C=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut(20277,{Rt:D})}};return C(_)-C(A)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Yr(this.query,t.tu,i,a,t.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=vt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new _m(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new gm(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=vt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Yr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Eu="SyncEngine";class II{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class AI{constructor(t){this.key=t,this.hu=!1}}class bI{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ir((l=>Op(l)),Bo),this.Iu=new Map,this.Eu=new Set,this.du=new zt(nt.comparator),this.Au=new Map,this.Ru=new uu,this.Vu={},this.mu=new Map,this.fu=Xr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function RI(e,t,n=!0){const r=Im(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await ym(r,t,n,!0),s}async function SI(e,t){const n=Im(e);await ym(n,t,!0,!1)}async function ym(e,t,n,r){const s=await Gw(e.localStore,ln(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await CI(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&am(e.remoteStore,s),l}async function CI(e,t,n,r,s){e.pu=(p,m,_)=>(async function(C,D,M,H){let Q=D.view.ru(M);Q.Cs&&(Q=await Gh(C.localStore,D.query,!1).then((({documents:I})=>D.view.ru(I,Q))));const q=H&&H.targetChanges.get(D.targetId),rt=H&&H.targetMismatches.get(D.targetId)!=null,lt=D.view.applyChanges(Q,C.isPrimaryClient,q,rt);return rf(C,D.targetId,lt.au),lt.snapshot})(e,p,m,_);const i=await Gh(e.localStore,t,!0),a=new wI(t,i.Qs),l=a.ru(i.documents),u=mi.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,u);rf(e,n,h.au);const f=new II(t,n,a);return e.Tu.set(t,f),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function PI(e,t,n){const r=ft(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!Bo(a,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await El(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&du(r.remoteStore,s.targetId),Il(r,s.targetId)})).catch(ns)):(Il(r,s.targetId),await El(r.localStore,s.targetId,!0))}async function VI(e,t){const n=ft(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),du(n.remoteStore,r.targetId))}async function DI(e,t,n){const r=$I(e);try{const s=await(function(a,l){const u=ft(a),h=Nt.now(),f=l.reduce(((_,A)=>_.add(A.key)),vt());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let A=bn(),C=vt();return u.Ns.getEntries(_,f).next((D=>{A=D,A.forEach(((M,H)=>{H.isValidDocument()||(C=C.add(M))}))})).next((()=>u.localDocuments.getOverlayedDocuments(_,A))).next((D=>{p=D;const M=[];for(const H of l){const Q=KT(H,p.get(H.key).overlayedDocument);Q!=null&&M.push(new nr(H.key,Q,bp(Q.value.mapValue),De.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,M,l)})).next((D=>{m=D;const M=D.applyToLocalDocumentSet(p,C);return u.documentOverlayCache.saveOverlays(_,D.batchId,M)}))})).then((()=>({batchId:m.batchId,changes:kp(p)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new zt(yt)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h})(r,s.batchId,n),await _i(r,s.changes),await Xo(r.remoteStore)}catch(s){const i=yu(s,"Failed to persist write");n.reject(i)}}async function vm(e,t){const n=ft(e);try{const r=await Hw(n.localStore,t);t.targetChanges.forEach(((s,i)=>{const a=n.Au.get(i);a&&(Ct(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Ct(a.hu,14607):s.removedDocuments.size>0&&(Ct(a.hu,42227),a.hu=!1))})),await _i(n,r,t)}catch(r){await ns(r)}}function nf(e,t,n){const r=ft(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const u=ft(a);u.onlineState=l;let h=!1;u.queries.forEach(((f,p)=>{for(const m of p.Sa)m.va(l)&&(h=!0)})),h&&vu(u)})(r.eventManager,t),s.length&&r.Pu.H_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function xI(e,t,n){const r=ft(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let a=new zt(nt.comparator);a=a.insert(i,Te.newNoDocument(i,ht.min()));const l=vt().add(i),u=new Go(ht.min(),new Map,new zt(yt),a,l);await vm(r,u),r.du=r.du.remove(i),r.Au.delete(t),Tu(r)}else await El(r.localStore,t,!1).then((()=>Il(r,t,n))).catch(ns)}async function OI(e,t){const n=ft(e),r=t.batch.batchId;try{const s=await qw(n.localStore,t);Tm(n,r,null),Em(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _i(n,s)}catch(s){await ns(s)}}async function NI(e,t,n){const r=ft(e);try{const s=await(function(a,l){const u=ft(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next((p=>(Ct(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>u.localDocuments.getDocuments(h,f)))}))})(r.localStore,t);Tm(r,t,n),Em(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await _i(r,s)}catch(s){await ns(s)}}function Em(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function Tm(e,t,n){const r=ft(e);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function Il(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((r=>{e.Ru.containsKey(r)||wm(e,r)}))}function wm(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(du(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Tu(e))}function rf(e,t,n){for(const r of n)r instanceof gm?(e.Ru.addReference(r.key,t),MI(e,r)):r instanceof _m?(tt(Eu,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||wm(e,r.key)):ut(19791,{wu:r})}function MI(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(tt(Eu,"New document in limbo: "+n),e.Eu.add(r),Tu(e))}function Tu(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new nt(Ut.fromString(t)),r=e.fu.next();e.Au.set(r,new AI(n)),e.du=e.du.insert(n,r),am(e.remoteStore,new $n(ln(su(n.path)),r,"TargetPurposeLimboResolution",Fo.ce))}}async function _i(e,t,n){const r=ft(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,u)=>{a.push(r.pu(u,t,n).then((h=>{if((h||n)&&r.isPrimaryClient){const f=h?!h.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(h){s.push(h);const f=hu.As(u.targetId,h);i.push(f)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(u,h){const f=ft(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>j.forEach(h,(m=>j.forEach(m.Es,(_=>f.persistence.referenceDelegate.addReference(p,m.targetId,_))).next((()=>j.forEach(m.ds,(_=>f.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))))))}catch(p){if(!rs(p))throw p;tt(fu,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const _=f.Ms.get(m),A=_.snapshotVersion,C=_.withLastLimboFreeSnapshotVersion(A);f.Ms=f.Ms.insert(m,C)}}})(r.localStore,i))}async function kI(e,t){const n=ft(e);if(!n.currentUser.isEqual(t)){tt(Eu,"User change. New user:",t.toKey());const r=await rm(n.localStore,t);n.currentUser=t,(function(i,a){i.mu.forEach((l=>{l.forEach((u=>{u.reject(new Z(F.CANCELLED,a))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await _i(n,r.Ls)}}function LI(e,t){const n=ft(e),r=n.Au.get(t);if(r&&r.hu)return vt().add(r.key);{let s=vt();const i=n.Iu.get(t);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Im(e){const t=ft(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=LI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xI.bind(null,t),t.Pu.H_=EI.bind(null,t.eventManager),t.Pu.yu=TI.bind(null,t.eventManager),t}function $I(e){const t=ft(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=OI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=NI.bind(null,t),t}class Ao{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Wo(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return Bw(this.persistence,new Fw,t.initialUser,this.serializer)}Cu(t){return new nm(cu.mi,this.serializer)}Du(t){return new Qw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ao.provider={build:()=>new Ao};class FI extends Ao{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Ct(this.persistence.referenceDelegate instanceof wo,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Aw(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?Ce.withCacheSize(this.cacheSizeBytes):Ce.DEFAULT;return new nm((r=>wo.mi(r,n)),this.serializer)}}class Al{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kI.bind(null,this.syncEngine),await _I(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new vI})()}createDatastore(t){const n=Wo(t.databaseInfo.databaseId),r=(function(i){return new tI(i)})(t.databaseInfo);return(function(i,a,l,u){return new sI(i,a,l,u)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,s,i,a,l){return new oI(r,s,i,a,l)})(this.localStore,this.datastore,t.asyncQueue,(n=>nf(this.syncEngine,n,0)),(function(){return Xh.v()?new Xh:new Xw})())}createSyncEngine(t,n){return(function(s,i,a,l,u,h,f){const p=new bI(s,i,a,l,u,h);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=ft(n);tt(Er,"RemoteStore shutting down."),r.Ea.add(5),await gi(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Al.provider={build:()=>new Al};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):An("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn="FirestoreClient";class UI{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ve.UNAUTHENTICATED,this.clientId=Jl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{tt(Jn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(tt(Jn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=yu(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function $a(e,t){e.asyncQueue.verifyOperationInProgress(),tt(Jn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async s=>{r.isEqual(s)||(await rm(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function sf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await jI(e);tt(Jn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>Jh(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,s)=>Jh(t.remoteStore,s))),e._onlineComponents=t}async function jI(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){tt(Jn,"Using user provided OfflineComponentProvider");try{await $a(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Kr("Error using user provided cache. Falling back to memory cache: "+n),await $a(e,new Ao)}}else tt(Jn,"Using default OfflineComponentProvider"),await $a(e,new FI(void 0));return e._offlineComponents}async function bm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(tt(Jn,"Using user provided OnlineComponentProvider"),await sf(e,e._uninitializedComponentsProvider._online)):(tt(Jn,"Using default OnlineComponentProvider"),await sf(e,new Al))),e._onlineComponents}function BI(e){return bm(e).then((t=>t.syncEngine))}async function bl(e){const t=await bm(e),n=t.eventManager;return n.onListen=RI.bind(null,t.syncEngine),n.onUnlisten=PI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=SI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=VI.bind(null,t.syncEngine),n}function qI(e,t,n={}){const r=new qn;return e.asyncQueue.enqueueAndForget((async()=>(function(i,a,l,u,h){const f=new Am({next:m=>{f.Nu(),a.enqueueAndForget((()=>pm(i,p))),m.fromCache&&u.source==="server"?h.reject(new Z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new mm(l,f,{includeMetadataChanges:!0,qa:!0});return dm(i,p)})(await bl(e),e.asyncQueue,t,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="firestore.googleapis.com",af=!0;class lf{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sm,this.ssl=af}else this.host=t.host,this.ssl=t.ssl??af;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=em;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<ww)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}oT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rm(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Yo{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lf(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new XE;switch(r.type){case"firstParty":return new tT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=of.get(n);r&&(tt("ComponentProvider","Removing Datastore"),of.delete(n),r.terminate())})(this),Promise.resolve()}}function HI(e,t,n,r={}){e=We(e,Yo);const s=Ql(t),i=e._getSettings(),a={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(Iv(`https://${l}`),Sv("Firestore",!0)),i.host!==Sm&&i.host!==l&&Kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!co(u,a)&&(e._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=ve.MOCK_USER;else{h=Av(r.mockUserToken,e._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ve(p)}e._authCredentials=new YE(new dp(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new br(this.firestore,t,this._query)}}class Yt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Yt(this.firestore,t,this._key)}toJSON(){return{type:Yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(fi(n,Yt._jsonSchema))return new Yt(t,r||null,new nt(Ut.fromString(n.referencePath)))}}Yt._jsonSchemaVersion="firestore/documentReference/1.0",Yt._jsonSchema={type:Xt("string",Yt._jsonSchemaVersion),referencePath:Xt("string")};class Hn extends br{constructor(t,n,r){super(t,n,su(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Yt(this.firestore,null,new nt(t))}withConverter(t){return new Hn(this.firestore,t,this._path)}}function Is(e,t,...n){if(e=qe(e),pp("collection","path",t),e instanceof Yo){const r=Ut.fromString(t,...n);return Eh(r),new Hn(e,null,r)}{if(!(e instanceof Yt||e instanceof Hn))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ut.fromString(t,...n));return Eh(r),new Hn(e.firestore,null,r)}}function Ps(e,t,...n){if(e=qe(e),arguments.length===1&&(t=Jl.newId()),pp("doc","path",t),e instanceof Yo){const r=Ut.fromString(t,...n);return vh(r),new Yt(e,null,new nt(r))}{if(!(e instanceof Yt||e instanceof Hn))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ut.fromString(t,...n));return vh(r),new Yt(e.firestore,e instanceof Hn?e.converter:null,new nt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="AsyncQueue";class cf{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new im(this,"async_queue_retry"),this._c=()=>{const r=La();r&&tt(uf,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=La();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=La();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new qn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!rs(t))throw t;tt(uf,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,An("INTERNAL UNHANDLED ERROR: ",hf(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=_u.createAndSchedule(this,t,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ut(47125,{Pc:hf(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function hf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(e){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(e,["next","error","complete"])}class Zn extends Yo{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new cf,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new cf(t),this._firestoreClient=void 0,await t}}}function zI(e,t){const n=typeof e=="object"?e:LE(),r=typeof e=="string"?e:mo,s=xE(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Tv("firestore");i&&HI(s,...i)}return s}function Jo(e){if(e._terminated)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||KI(e),e._firestoreClient}function KI(e){const t=e._freezeSettings(),n=(function(s,i,a,l){return new _T(s,i,a,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Rm(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new UI(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ue(pe.fromBase64String(t))}catch(n){throw new Z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ue(pe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ue._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(fi(t,Ue._jsonSchema))return Ue.fromBase64String(t.bytes)}}Ue._jsonSchemaVersion="firestore/bytes/1.0",Ue._jsonSchema={type:Xt("string",Ue._jsonSchemaVersion),bytes:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new de(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return yt(this._lat,t._lat)||yt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cn._jsonSchemaVersion}}static fromJSON(t){if(fi(t,cn._jsonSchema))return new cn(t.latitude,t.longitude)}}cn._jsonSchemaVersion="firestore/geoPoint/1.0",cn._jsonSchema={type:Xt("string",cn._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,t._values)}toJSON(){return{type:hn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(fi(t,hn._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new hn(t.vectorValues);throw new Z(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hn._jsonSchemaVersion="firestore/vectorValue/1.0",hn._jsonSchema={type:Xt("string",hn._jsonSchemaVersion),vectorValues:Xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=/^__.*__$/;class WI{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new nr(t,this.data,this.fieldMask,n,this.fieldTransforms):new pi(t,this.data,n,this.fieldTransforms)}}class Cm{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new nr(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Pm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut(40011,{Ac:e})}}class Iu{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Iu({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return bo(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Pm(this.Ac)&&GI.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class QI{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Wo(t)}Cc(t,n,r,s=!1){return new Iu({Ac:t,methodName:n,Dc:r,path:de.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zo(e){const t=e._freezeSettings(),n=Wo(e._databaseId);return new QI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Vm(e,t,n,r,s,i={}){const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);Au("Data must be an object, but it was:",a,r);const l=Om(r,a);let u,h;if(i.merge)u=new Fe(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=Rl(t,p,n);if(!a.contains(m))throw new Z(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Mm(f,m)||f.push(m)}u=new Fe(f),h=a.fieldTransforms.filter((p=>u.covers(p.field)))}else u=null,h=a.fieldTransforms;return new WI(new Ve(l),u,h)}class ta extends wu{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ta}}function Dm(e,t,n,r){const s=e.Cc(1,t,n);Au("Data must be an object, but it was:",s,r);const i=[],a=Ve.empty();er(r,((u,h)=>{const f=bu(t,u,n);h=qe(h);const p=s.yc(f);if(h instanceof ta)i.push(f);else{const m=vi(h,p);m!=null&&(i.push(f),a.set(f,m))}}));const l=new Fe(i);return new Cm(a,l,s.fieldTransforms)}function xm(e,t,n,r,s,i){const a=e.Cc(1,t,n),l=[Rl(t,r,n)],u=[s];if(i.length%2!=0)throw new Z(F.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Rl(t,i[m])),u.push(i[m+1]);const h=[],f=Ve.empty();for(let m=l.length-1;m>=0;--m)if(!Mm(h,l[m])){const _=l[m];let A=u[m];A=qe(A);const C=a.yc(_);if(A instanceof ta)h.push(_);else{const D=vi(A,C);D!=null&&(h.push(_),f.set(_,D))}}const p=new Fe(h);return new Cm(f,p,a.fieldTransforms)}function XI(e,t,n,r=!1){return vi(n,e.Cc(r?4:3,t))}function vi(e,t){if(Nm(e=qe(e)))return Au("Unsupported field value:",t,e),Om(e,t);if(e instanceof wu)return(function(r,s){if(!Pm(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let u=vi(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}})(e,t)}return(function(r,s){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Nt.fromDate(r);return{timestampValue:To(s.serializer,i)}}if(r instanceof Nt){const i=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:To(s.serializer,i)}}if(r instanceof cn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ue)return{bytesValue:Wp(s.serializer,r._byteString)};if(r instanceof Yt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:lu(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof hn)return(function(a,l){return{mapValue:{fields:{[Ip]:{stringValue:Ap},[go]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return iu(l.serializer,h)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${$o(r)}`)})(e,t)}function Om(e,t){const n={};return _p(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):er(e,((r,s)=>{const i=vi(s,t.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Nm(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Nt||e instanceof cn||e instanceof Ue||e instanceof Yt||e instanceof wu||e instanceof hn)}function Au(e,t,n){if(!Nm(n)||!mp(n)){const r=$o(n);throw r==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Rl(e,t,n){if((t=qe(t))instanceof yi)return t._internalPath;if(typeof t=="string")return bu(e,t);throw bo("Field path arguments must be of type string or ",e,!1,void 0,n)}const YI=new RegExp("[~\\*/\\[\\]]");function bu(e,t,n){if(t.search(YI)>=0)throw bo(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new yi(...t.split("."))._internalPath}catch{throw bo(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function bo(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new Z(F.INVALID_ARGUMENT,l+e+u)}function Mm(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new JI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Ru("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JI extends km{data(){return super.data()}}function Ru(e,t){return typeof t=="string"?bu(e,t):t instanceof yi?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Su{}class ZI extends Su{}function Fa(e,t,...n){let r=[];t instanceof Su&&r.push(t),r=r.concat(n),(function(i){const a=i.filter((u=>u instanceof Cu)).length,l=i.filter((u=>u instanceof ea)).length;if(a>1||a>0&&l>0)throw new Z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)e=s._apply(e);return e}class ea extends ZI{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new ea(t,n,r)}_apply(t){const n=this._parse(t);return $m(t._query,n),new br(t.firestore,t.converter,pl(t._query,n))}_parse(t){const n=Zo(t.firestore);return(function(i,a,l,u,h,f,p){let m;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){pf(p,f);const A=[];for(const C of p)A.push(df(u,i,C));m={arrayValue:{values:A}}}else m=df(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||pf(p,f),m=XI(l,a,p,f==="in"||f==="not-in");return Qt.create(h,f,m)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function tA(e,t,n){const r=t,s=Ru("where",e);return ea._create(s,r,n)}class Cu extends Su{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Cu(t,n)}_parse(t){const n=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Qe.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)$m(a,u),a=pl(a,u)})(t._query,n),new br(t.firestore,t.converter,pl(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function df(e,t,n){if(typeof(n=qe(n))=="string"){if(n==="")throw new Z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xp(t)&&n.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ut.fromString(n));if(!nt.isDocumentKey(r))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ch(e,new nt(r))}if(n instanceof Yt)return Ch(e,n._key);throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$o(n)}.`)}function pf(e,t){if(!Array.isArray(e)||e.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function $m(e,t){const n=(function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null})(e.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class eA{convertValue(t,n="none"){switch(Xn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Gt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Qn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw ut(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return er(t,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(t){const n=t.fields?.[go].arrayValue?.values?.map((r=>Gt(r.doubleValue)));return new hn(n)}convertGeoPoint(t){return new cn(Gt(t.latitude),Gt(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=jo(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ni(t));default:return null}}convertTimestamp(t){const n=Wn(t);return new Nt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Ut.fromString(t);Ct(tm(r),9688,{name:t});const s=new ri(r.get(1),r.get(3)),i=new nt(r.popFirst(5));return s.isEqual(n)||An(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Vs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _r extends km{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Wi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Ru("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=_r._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}_r._jsonSchemaVersion="firestore/documentSnapshot/1.0",_r._jsonSchema={type:Xt("string",_r._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Wi extends _r{data(t={}){return super.data(t)}}class yr{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Vs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Wi(this._firestore,this._userDataWriter,r.key,r,new Vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const u=new Wi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Vs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const u=new Wi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Vs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:nA(l.type),doc:u,oldIndex:h,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=yr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Jl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function nA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut(61501,{type:e})}}yr._jsonSchemaVersion="firestore/querySnapshot/1.0",yr._jsonSchema={type:Xt("string",yr._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Pu extends eA{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ue(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}function rA(e){e=We(e,br);const t=We(e.firestore,Zn),n=Jo(t),r=new Pu(t);return Lm(e._query),qI(n,e._query).then((s=>new yr(t,r,e,s)))}function mf(e,t,n,...r){e=We(e,Yt);const s=We(e.firestore,Zn),i=Zo(s);let a;return a=typeof(t=qe(t))=="string"||t instanceof yi?xm(i,"updateDoc",e._key,t,n,r):Dm(i,"updateDoc",e._key,t),na(s,[a.toMutation(e._key,De.exists(!0))])}function sA(e){return na(We(e.firestore,Zn),[new Ko(e._key,De.none())])}function gf(e,t){const n=We(e.firestore,Zn),r=Ps(e),s=Fm(e.converter,t);return na(n,[Vm(Zo(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,De.exists(!1))]).then((()=>r))}function _f(e,...t){e=qe(e);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||ff(t[r])||(n=t[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(ff(t[r])){const u=t[r];t[r]=u.next?.bind(u),t[r+1]=u.error?.bind(u),t[r+2]=u.complete?.bind(u)}let i,a,l;if(e instanceof Yt)a=We(e.firestore,Zn),l=su(e._key.path),i={next:u=>{t[r]&&t[r](iA(a,e,u))},error:t[r+1],complete:t[r+2]};else{const u=We(e,br);a=We(u.firestore,Zn),l=u._query;const h=new Pu(a);i={next:f=>{t[r]&&t[r](new yr(a,h,u,f))},error:t[r+1],complete:t[r+2]},Lm(e._query)}return(function(h,f,p,m){const _=new Am(m),A=new mm(f,_,p);return h.asyncQueue.enqueueAndForget((async()=>dm(await bl(h),A))),()=>{_.Nu(),h.asyncQueue.enqueueAndForget((async()=>pm(await bl(h),A)))}})(Jo(a),l,s,i)}function na(e,t){return(function(r,s){const i=new qn;return r.asyncQueue.enqueueAndForget((async()=>DI(await BI(r),s,i))),i.promise})(Jo(e),t)}function iA(e,t,n){const r=n.docs.get(t._key),s=new Pu(e);return new _r(e,s,t._key,r,new Vs(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Zo(t)}set(t,n,r){this._verifyNotCommitted();const s=Ua(t,this._firestore),i=Fm(s.converter,n,r),a=Vm(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,De.none())),this}update(t,n,r,...s){this._verifyNotCommitted();const i=Ua(t,this._firestore);let a;return a=typeof(n=qe(n))=="string"||n instanceof yi?xm(this._dataReader,"WriteBatch.update",i._key,n,r,s):Dm(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,De.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Ua(t,this._firestore);return this._mutations=this._mutations.concat(new Ko(n._key,De.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ua(e,t){if((e=qe(e)).firestore!==t)throw new Z(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(e){return Jo(e=We(e,Zn)),new oA(e,(t=>na(e,t)))}(function(t,n=!0){(function(s){es=s})(kE),fo(new Zs("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Zn(new JE(r.getProvider("auth-internal")),new eT(a,r.getProvider("app-check-internal")),(function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ri(h.options.projectId,f)})(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),qr(mh,gh,t),qr(mh,gh,"esm2020")})();const lA={apiKey:"AIzaSyCwE6QPvzmcSPqW7F8rMEHLlBmDxgSsfYY",authDomain:"hu-clientmaintenance.firebaseapp.com",projectId:"hu-clientmaintenance",storageBucket:"hu-clientmaintenance.firebasestorage.app",messagingSenderId:"499547149003",appId:"1:499547149003:web:a28a1adf076f32d845414e"},uA=rp(lA),en=zI(uA),cA={id:"app-container"},hA={key:0,class:"loading-overlay"},fA={class:"toolbar"},dA={class:"form-grid"},pA={class:"form-group"},mA={key:0,class:"form-error"},gA={class:"form-group"},_A={key:0,class:"form-error"},yA={class:"form-group"},vA={class:"form-group"},EA={class:"form-group"},TA={class:"form-buttons"},wA=["disabled"],IA={class:"form-grid"},AA={class:"form-group"},bA={class:"table-container"},RA={key:0},SA={key:0},CA={key:0},PA={key:0},VA={key:0},DA={"data-label":"姓名"},xA={"data-label":"電話"},OA={"data-label":"車牌號碼"},NA={"data-label":"車身號碼"},MA={"data-label":"建立時間"},kA={"data-label":"備註"},LA={"data-label":"最新維修紀錄"},$A={class:"record-list"},FA={key:0,class:"no-record"},UA=["onClick"],jA={"data-label":"操作"},BA={class:"action-buttons"},qA=["onClick"],HA=["onClick"],zA={key:0},KA={key:2,class:"pagination-controls"},GA=["value"],WA=["disabled"],QA=["disabled"],XA=["disabled"],YA=["disabled"],JA={class:"modal-content"},ZA={class:"modal-header"},tb={class:"modal-body"},eb={class:"record-list-modal"},nb={key:0},rb={key:1,class:"record-item"},sb=["onClick"],ib=["onClick"],ob={key:0,class:"no-record"},ab={__name:"App",setup(e){const t=Ot([]),n=Ot([]),r=Ot(""),s=Ot("createdAt"),i=Ot("desc"),a=Ot(!1),l=Ot(!1),u=Ot(1),h=Ot(30),f=[30,50,100],p=Ot(!1),m=Ot({name:"",phone:"",licensePlate:"",vin:"",memo:""}),_=Ot(null),A=Ot(null),C=Ot(!1),D=Ot({date:new Date().toISOString().split("T")[0],item:"",price:0}),M=Ot(null),H=Pa.regex(/^09\d{8}$/),Q=pt(()=>({name:{required:Pa.withMessage("姓名為必填欄位",uv)},phone:{phoneFormat:Pa.withMessage("請輸入有效的10位手機號碼",H)}})),q=tv(Q,m);_d(()=>{const k=Fa(Is(en,"clients"));_f(k,O=>{t.value=O.docs.map(et=>({id:et.id,...et.data()})),a.value=!0});const R=Fa(Is(en,"maintenanceRecords"));_f(R,O=>{n.value=O.docs.map(et=>({id:et.id,...et.data()})),l.value=!0})});const rt=pt(()=>!a.value||!l.value),lt=pt(()=>{let k=[...t.value];if(r.value){const R=r.value.toLowerCase();k=k.filter(O=>O.name?.toLowerCase().includes(R)||O.phone?.toLowerCase().includes(R)||O.licensePlate?.toLowerCase().includes(R)||O.vin?.toLowerCase().includes(R))}return s.value&&k.sort((R,O)=>{const et=i.value==="asc"?1:-1;let y=R[s.value],T=O[s.value];return y==null?1:T==null?-1:s.value==="createdAt"&&y instanceof Nt&&T instanceof Nt?(y.seconds-T.seconds)*et:String(y).localeCompare(String(T),"zh-Hant")*et}),k}),I=pt(()=>Math.ceil(lt.value.length/h.value)),v=pt(()=>{const k=(u.value-1)*h.value,R=k+h.value;return lt.value.slice(k,R)}),w=pt(()=>A.value?n.value.filter(k=>k.vin===A.value.vin).sort((k,R)=>new Date(R.date)-new Date(k.date)):[]);function S(k){return n.value.filter(R=>R.vin===k).sort((R,O)=>new Date(O.date)-new Date(R.date)).slice(0,3)}an([r,h],()=>{u.value=1});function b(k){return!k||!k.seconds?"N/A":new Date(k.seconds*1e3).toLocaleString("zh-TW")}function P(k,R=15){return k?k.length<=R?k:k.slice(0,R)+"...":""}function E(k){s.value===k?i.value=i.value==="asc"?"desc":"asc":(s.value=k,i.value="asc")}function Mt(k){k>=1&&k<=I.value&&(u.value=k)}function Zt(){m.value={name:"",phone:"",licensePlate:"",vin:"",memo:""},q.value.$reset(),p.value=!0}function qt(k){A.value=k}function Et(){A.value=null,C.value=!1,M.value=null}function gt(k){_.value={...k},p.value=!1}function re(){_.value=null}function Tt(k){M.value={...k}}function Ht(){M.value=null}async function Dt(){if(!await q.value.$validate())return;const R={...m.value,createdAt:Nt.fromDate(new Date)};await gf(Is(en,"clients"),R),p.value=!1}async function He(k){if(confirm(`確定要刪除客戶「${k.name}」嗎？
所有相關的維修紀錄將會被一併永久刪除！`))try{const R=Fa(Is(en,"maintenanceRecords"),tA("vin","==",k.vin)),O=await rA(R),et=aA(en);O.forEach(T=>{et.delete(T.ref)});const y=Ps(en,"clients",k.id);et.delete(y),await et.commit()}catch(R){console.error("Error deleting client and records: ",R),alert("刪除失敗，請稍後再試。")}}async function xe(){if(!_.value)return;const k=Ps(en,"clients",_.value.id),{id:R,...O}=_.value;await mf(k,O),_.value=null}async function Ye(){if(!D.value.item){alert("維修項目為必填欄位！");return}const k={...D.value,vin:A.value.vin,price:Number(D.value.price)||0};await gf(Is(en,"maintenanceRecords"),k),D.value={date:new Date().toISOString().split("T")[0],item:"",price:0},C.value=!1}async function se(k){confirm("確定要刪除這筆維修紀錄嗎？")&&await sA(Ps(en,"maintenanceRecords",k))}async function L(){if(!M.value)return;const k=Ps(en,"maintenanceRecords",M.value.id),{id:R,...O}=M.value;await mf(k,{...O,price:Number(O.price)||0}),M.value=null}return(k,R)=>(Vt(),xt("div",cA,[rt.value?(Vt(),xt("div",hA,[...R[32]||(R[32]=[W("div",{class:"spinner"},null,-1)])])):(Vt(),xt(Pe,{key:1},[R[47]||(R[47]=W("header",{class:"app-header"},[W("h1",null,"琥王電動車 - 客戶資料")],-1)),W("main",null,[W("div",fA,[W("button",{class:"btn btn-primary",onClick:Zt},"新增客戶"),ae(W("input",{class:"search-input",type:"text","onUpdate:modelValue":R[0]||(R[0]=O=>r.value=O),placeholder:"查詢姓名、電話、車牌或車身號碼"},null,512),[[ce,r.value]])]),p.value?(Vt(),xt("form",{key:0,class:"data-form",onSubmit:ws(Dt,["prevent"])},[R[33]||(R[33]=W("h3",null,"新增客戶資料",-1)),W("div",dA,[W("div",pA,[ae(W("input",{type:"text","onUpdate:modelValue":R[1]||(R[1]=O=>m.value.name=O),placeholder:"姓名",onBlur:R[2]||(R[2]=(...O)=>at(q).name.$touch&&at(q).name.$touch(...O)),class:zs({"input-error":at(q).name.$error})},null,34),[[ce,m.value.name]]),at(q).name.$error?(Vt(),xt("div",mA,Bt(at(q).name.$errors[0].$message),1)):_e("",!0)]),W("div",gA,[ae(W("input",{type:"tel","onUpdate:modelValue":R[3]||(R[3]=O=>m.value.phone=O),placeholder:"電話",onBlur:R[4]||(R[4]=(...O)=>at(q).phone.$touch&&at(q).phone.$touch(...O)),class:zs({"input-error":at(q).phone.$error})},null,34),[[ce,m.value.phone]]),at(q).phone.$error?(Vt(),xt("div",_A,Bt(at(q).phone.$errors[0].$message),1)):_e("",!0)]),W("div",yA,[ae(W("input",{type:"text","onUpdate:modelValue":R[5]||(R[5]=O=>m.value.licensePlate=O),placeholder:"車牌號碼"},null,512),[[ce,m.value.licensePlate]])]),W("div",vA,[ae(W("input",{type:"text","onUpdate:modelValue":R[6]||(R[6]=O=>m.value.vin=O),placeholder:"車身號碼"},null,512),[[ce,m.value.vin]])])]),W("div",EA,[ae(W("textarea",{"onUpdate:modelValue":R[7]||(R[7]=O=>m.value.memo=O),placeholder:"備註"},null,512),[[ce,m.value.memo]])]),W("div",TA,[W("button",{class:"btn btn-primary",type:"submit",disabled:at(q).$invalid},"儲存",8,wA),W("button",{class:"btn",type:"button",onClick:R[8]||(R[8]=O=>p.value=!1)},"取消")])],32)):_e("",!0),_.value?(Vt(),xt("form",{key:1,class:"data-form",onSubmit:ws(xe,["prevent"])},[R[35]||(R[35]=W("h3",null,"編輯客戶資料",-1)),W("div",IA,[ae(W("input",{type:"text","onUpdate:modelValue":R[9]||(R[9]=O=>_.value.name=O),placeholder:"姓名",required:""},null,512),[[ce,_.value.name]]),ae(W("input",{type:"tel","onUpdate:modelValue":R[10]||(R[10]=O=>_.value.phone=O),placeholder:"電話"},null,512),[[ce,_.value.phone]]),ae(W("input",{type:"text","onUpdate:modelValue":R[11]||(R[11]=O=>_.value.licensePlate=O),placeholder:"車牌號碼"},null,512),[[ce,_.value.licensePlate]]),ae(W("input",{type:"text","onUpdate:modelValue":R[12]||(R[12]=O=>_.value.vin=O),placeholder:"車身號碼",readonly:""},null,512),[[ce,_.value.vin]])]),W("div",AA,[ae(W("textarea",{"onUpdate:modelValue":R[13]||(R[13]=O=>_.value.memo=O),placeholder:"備註"},null,512),[[ce,_.value.memo]])]),W("div",{class:"form-buttons"},[R[34]||(R[34]=W("button",{class:"btn btn-primary",type:"submit"},"更新",-1)),W("button",{class:"btn",type:"button",onClick:re},"取消")])],32)):_e("",!0),W("div",bA,[W("table",null,[W("thead",null,[W("tr",null,[W("th",{class:"sortable",onClick:R[14]||(R[14]=O=>E("name"))},[R[36]||(R[36]=hr("姓名",-1)),s.value==="name"?(Vt(),xt("span",RA,Bt(i.value==="asc"?"▲":"▼"),1)):_e("",!0)]),W("th",{class:"sortable",onClick:R[15]||(R[15]=O=>E("phone"))},[R[37]||(R[37]=hr("電話",-1)),s.value==="phone"?(Vt(),xt("span",SA,Bt(i.value==="asc"?"▲":"▼"),1)):_e("",!0)]),W("th",{class:"sortable",onClick:R[16]||(R[16]=O=>E("licensePlate"))},[R[38]||(R[38]=hr("車牌號碼",-1)),s.value==="licensePlate"?(Vt(),xt("span",CA,Bt(i.value==="asc"?"▲":"▼"),1)):_e("",!0)]),W("th",{class:"sortable",onClick:R[17]||(R[17]=O=>E("vin"))},[R[39]||(R[39]=hr("車身號碼",-1)),s.value==="vin"?(Vt(),xt("span",PA,Bt(i.value==="asc"?"▲":"▼"),1)):_e("",!0)]),W("th",{class:"sortable",onClick:R[18]||(R[18]=O=>E("createdAt"))},[R[40]||(R[40]=hr("建立時間",-1)),s.value==="createdAt"?(Vt(),xt("span",VA,Bt(i.value==="asc"?"▲":"▼"),1)):_e("",!0)]),R[41]||(R[41]=W("th",null,"備註",-1)),R[42]||(R[42]=W("th",null,"最新維修紀錄",-1)),R[43]||(R[43]=W("th",null,"操作",-1))])]),W("tbody",null,[(Vt(!0),xt(Pe,null,Oi(v.value,O=>(Vt(),xt("tr",{key:O.id},[W("td",DA,Bt(O.name),1),W("td",xA,Bt(O.phone),1),W("td",OA,Bt(O.licensePlate),1),W("td",NA,Bt(O.vin),1),W("td",MA,Bt(b(O.createdAt)),1),W("td",kA,Bt(P(O.memo)),1),W("td",LA,[W("ul",$A,[(Vt(!0),xt(Pe,null,Oi(S(O.vin),et=>(Vt(),xt("li",{key:et.id},Bt(et.date)+": "+Bt(et.item)+" (NT$"+Bt(et.price)+")",1))),128)),S(O.vin).length===0?(Vt(),xt("li",FA,"無維修紀錄")):_e("",!0)]),W("button",{class:"link-button",onClick:et=>qt(O)},"查看更多",8,UA)]),W("td",jA,[W("div",BA,[W("button",{class:"btn btn-secondary",onClick:et=>gt(O)},"編輯",8,qA),W("button",{class:"btn btn-danger",onClick:et=>He(O)},"刪除",8,HA)])])]))),128)),!rt.value&&lt.value.length===0?(Vt(),xt("tr",zA,[...R[44]||(R[44]=[W("td",{class:"no-results",colspan:"8"},"找不到符合的客戶資料。",-1)])])):_e("",!0)])])]),!rt.value&&I.value>1?(Vt(),xt("div",KA,[ae(W("select",{"onUpdate:modelValue":R[19]||(R[19]=O=>h.value=O)},[(Vt(),xt(Pe,null,Oi(f,O=>W("option",{key:O,value:O},"每頁 "+Bt(O)+" 筆",9,GA)),64))],512),[[Ny,h.value]]),W("span",null,"共 "+Bt(lt.value.length)+" 筆資料，第 "+Bt(u.value)+" / "+Bt(I.value)+" 頁",1),W("div",null,[W("button",{class:"btn",onClick:R[20]||(R[20]=O=>Mt(1)),disabled:u.value===1},"«",8,WA),W("button",{class:"btn",onClick:R[21]||(R[21]=O=>Mt(u.value-1)),disabled:u.value===1},"‹",8,QA),W("button",{class:"btn",onClick:R[22]||(R[22]=O=>Mt(u.value+1)),disabled:I.value===0||u.value===I.value},"›",8,XA),W("button",{class:"btn",onClick:R[23]||(R[23]=O=>Mt(I.value)),disabled:I.value===0||u.value===I.value},"»",8,YA)])])):_e("",!0),A.value?(Vt(),xt("div",{key:3,class:"modal-overlay",onClick:ws(Et,["self"])},[W("div",JA,[W("header",ZA,[W("h3",null,Bt(A.value.name)+" 的維修紀錄",1),W("button",{class:"close-button",onClick:Et},"×")]),W("div",tb,[C.value?_e("",!0):(Vt(),xt("button",{key:0,class:"btn btn-primary btn-full-width",onClick:R[24]||(R[24]=O=>C.value=!0)},"新增維修紀錄")),C.value?(Vt(),xt("form",{key:1,class:"record-form",onSubmit:ws(Ye,["prevent"])},[ae(W("input",{type:"date","onUpdate:modelValue":R[25]||(R[25]=O=>D.value.date=O),required:""},null,512),[[ce,D.value.date]]),ae(W("input",{type:"text","onUpdate:modelValue":R[26]||(R[26]=O=>D.value.item=O),placeholder:"維修項目",required:""},null,512),[[ce,D.value.item]]),ae(W("input",{type:"number","onUpdate:modelValue":R[27]||(R[27]=O=>D.value.price=O),placeholder:"價格"},null,512),[[ce,D.value.price]]),W("div",null,[R[45]||(R[45]=W("button",{class:"btn btn-primary",type:"submit"},"儲存紀錄",-1)),W("button",{class:"btn",type:"button",onClick:R[28]||(R[28]=O=>C.value=!1)},"取消")])],32)):_e("",!0),W("ul",eb,[(Vt(!0),xt(Pe,null,Oi(w.value,O=>(Vt(),xt("li",{key:O.id},[M.value&&M.value.id===O.id?(Vt(),xt("div",nb,[W("form",{class:"record-form-inline",onSubmit:ws(L,["prevent"])},[ae(W("input",{type:"date","onUpdate:modelValue":R[29]||(R[29]=et=>M.value.date=et),required:""},null,512),[[ce,M.value.date]]),ae(W("input",{type:"text","onUpdate:modelValue":R[30]||(R[30]=et=>M.value.item=et),required:""},null,512),[[ce,M.value.item]]),ae(W("input",{type:"number","onUpdate:modelValue":R[31]||(R[31]=et=>M.value.price=et)},null,512),[[ce,M.value.price]]),R[46]||(R[46]=W("button",{class:"btn btn-primary",type:"submit"},"更新",-1)),W("button",{class:"btn",type:"button",onClick:Ht},"取消")],32)])):(Vt(),xt("div",rb,[W("span",null,[W("strong",null,Bt(O.date),1),hr(": "+Bt(O.item)+" -",1),W("em",null,"NT$"+Bt(O.price),1)]),W("div",null,[W("button",{class:"link-button",onClick:et=>Tt(O)},"編輯",8,sb),W("button",{class:"link-button-danger",onClick:et=>se(O.id)},"刪除",8,ib)])]))]))),128)),w.value.length===0&&!C.value?(Vt(),xt("li",ob,"無維修紀錄")):_e("",!0)])])])])):_e("",!0)])],64))]))}};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const kr=typeof document<"u";function Um(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function lb(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Um(e.default)}const bt=Object.assign;function ja(e,t){const n={};for(const r in t){const s=t[r];n[r]=Xe(s)?s.map(e):e(s)}return n}const qs=()=>{},Xe=Array.isArray,jm=/#/g,ub=/&/g,cb=/\//g,hb=/=/g,fb=/\?/g,Bm=/\+/g,db=/%5B/g,pb=/%5D/g,qm=/%5E/g,mb=/%60/g,Hm=/%7B/g,gb=/%7C/g,zm=/%7D/g,_b=/%20/g;function Vu(e){return encodeURI(""+e).replace(gb,"|").replace(db,"[").replace(pb,"]")}function yb(e){return Vu(e).replace(Hm,"{").replace(zm,"}").replace(qm,"^")}function Sl(e){return Vu(e).replace(Bm,"%2B").replace(_b,"+").replace(jm,"%23").replace(ub,"%26").replace(mb,"`").replace(Hm,"{").replace(zm,"}").replace(qm,"^")}function vb(e){return Sl(e).replace(hb,"%3D")}function Eb(e){return Vu(e).replace(jm,"%23").replace(fb,"%3F")}function Tb(e){return e==null?"":Eb(e).replace(cb,"%2F")}function ai(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const wb=/\/$/,Ib=e=>e.replace(wb,"");function Ba(e,t,n="/"){let r,s={},i="",a="";const l=t.indexOf("#");let u=t.indexOf("?");return l<u&&l>=0&&(u=-1),u>-1&&(r=t.slice(0,u),i=t.slice(u+1,l>-1?l:t.length),s=e(i)),l>-1&&(r=r||t.slice(0,l),a=t.slice(l,t.length)),r=Sb(r??t,n),{fullPath:r+(i&&"?")+i+a,path:r,query:s,hash:ai(a)}}function Ab(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function yf(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function bb(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Jr(t.matched[r],n.matched[s])&&Km(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Jr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Km(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Rb(e[n],t[n]))return!1;return!0}function Rb(e,t){return Xe(e)?vf(e,t):Xe(t)?vf(t,e):e===t}function vf(e,t){return Xe(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function Sb(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,a,l;for(a=0;a<r.length;a++)if(l=r[a],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(a).join("/")}const On={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var li;(function(e){e.pop="pop",e.push="push"})(li||(li={}));var Hs;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Hs||(Hs={}));function Cb(e){if(!e)if(kr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Ib(e)}const Pb=/^[^#]+#/;function Vb(e,t){return e.replace(Pb,"#")+t}function Db(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const ra=()=>({left:window.scrollX,top:window.scrollY});function xb(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=Db(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Ef(e,t){return(history.state?history.state.position-t:-1)+e}const Cl=new Map;function Ob(e,t){Cl.set(e,t)}function Nb(e){const t=Cl.get(e);return Cl.delete(e),t}let Mb=()=>location.protocol+"//"+location.host;function Gm(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let l=s.includes(e.slice(i))?e.slice(i).length:1,u=s.slice(l);return u[0]!=="/"&&(u="/"+u),yf(u,"")}return yf(n,e)+r+s}function kb(e,t,n,r){let s=[],i=[],a=null;const l=({state:m})=>{const _=Gm(e,location),A=n.value,C=t.value;let D=0;if(m){if(n.value=_,t.value=m,a&&a===A){a=null;return}D=C?m.position-C.position:0}else r(_);s.forEach(M=>{M(n.value,A,{delta:D,type:li.pop,direction:D?D>0?Hs.forward:Hs.back:Hs.unknown})})};function u(){a=n.value}function h(m){s.push(m);const _=()=>{const A=s.indexOf(m);A>-1&&s.splice(A,1)};return i.push(_),_}function f(){const{history:m}=window;m.state&&m.replaceState(bt({},m.state,{scroll:ra()}),"")}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:u,listen:h,destroy:p}}function Tf(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?ra():null}}function Lb(e){const{history:t,location:n}=window,r={value:Gm(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(u,h,f){const p=e.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?e:e.slice(p))+u:Mb()+e+u;try{t[f?"replaceState":"pushState"](h,"",m),s.value=h}catch(_){console.error(_),n[f?"replace":"assign"](m)}}function a(u,h){const f=bt({},t.state,Tf(s.value.back,u,s.value.forward,!0),h,{position:s.value.position});i(u,f,!0),r.value=u}function l(u,h){const f=bt({},s.value,t.state,{forward:u,scroll:ra()});i(f.current,f,!0);const p=bt({},Tf(r.value,u,null),{position:f.position+1},h);i(u,p,!1),r.value=u}return{location:r,state:s,push:l,replace:a}}function $b(e){e=Cb(e);const t=Lb(e),n=kb(e,t.state,t.location,t.replace);function r(i,a=!0){a||n.pauseListeners(),history.go(i)}const s=bt({location:"",base:e,go:r,createHref:Vb.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function Fb(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),$b(e)}function Ub(e){return typeof e=="string"||e&&typeof e=="object"}function Wm(e){return typeof e=="string"||typeof e=="symbol"}const Qm=Symbol("");var wf;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(wf||(wf={}));function Zr(e,t){return bt(new Error,{type:e,[Qm]:!0},t)}function gn(e,t){return e instanceof Error&&Qm in e&&(t==null||!!(e.type&t))}const If="[^/]+?",jb={sensitive:!1,strict:!1,start:!0,end:!0},Bb=/[.+*?^${}()[\]/\\]/g;function qb(e,t){const n=bt({},jb,t),r=[];let s=n.start?"^":"";const i=[];for(const h of e){const f=h.length?[]:[90];n.strict&&!h.length&&(s+="/");for(let p=0;p<h.length;p++){const m=h[p];let _=40+(n.sensitive?.25:0);if(m.type===0)p||(s+="/"),s+=m.value.replace(Bb,"\\$&"),_+=40;else if(m.type===1){const{value:A,repeatable:C,optional:D,regexp:M}=m;i.push({name:A,repeatable:C,optional:D});const H=M||If;if(H!==If){_+=10;try{new RegExp(`(${H})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${A}" (${H}): `+q.message)}}let Q=C?`((?:${H})(?:/(?:${H}))*)`:`(${H})`;p||(Q=D&&h.length<2?`(?:/${Q})`:"/"+Q),D&&(Q+="?"),s+=Q,_+=20,D&&(_+=-8),C&&(_+=-20),H===".*"&&(_+=-50)}f.push(_)}r.push(f)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function l(h){const f=h.match(a),p={};if(!f)return null;for(let m=1;m<f.length;m++){const _=f[m]||"",A=i[m-1];p[A.name]=_&&A.repeatable?_.split("/"):_}return p}function u(h){let f="",p=!1;for(const m of e){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const _ of m)if(_.type===0)f+=_.value;else if(_.type===1){const{value:A,repeatable:C,optional:D}=_,M=A in h?h[A]:"";if(Xe(M)&&!C)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const H=Xe(M)?M.join("/"):M;if(!H)if(D)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${A}"`);f+=H}}return f||"/"}return{re:a,score:r,keys:i,parse:l,stringify:u}}function Hb(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Xm(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=Hb(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Af(r))return 1;if(Af(s))return-1}return s.length-r.length}function Af(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const zb={type:0,value:""},Kb=/[a-zA-Z0-9_]/;function Gb(e){if(!e)return[[]];if(e==="/")return[[zb]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(_){throw new Error(`ERR (${n})/"${h}": ${_}`)}let n=0,r=n;const s=[];let i;function a(){i&&s.push(i),i=[]}let l=0,u,h="",f="";function p(){h&&(n===0?i.push({type:0,value:h}):n===1||n===2||n===3?(i.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:h,regexp:f,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),h="")}function m(){h+=u}for(;l<e.length;){if(u=e[l++],u==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:u==="/"?(h&&p(),a()):u===":"?(p(),n=1):m();break;case 4:m(),n=r;break;case 1:u==="("?n=2:Kb.test(u)?m():(p(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&l--);break;case 2:u===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+u:n=3:f+=u;break;case 3:p(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&l--,f="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),p(),a(),s}function Wb(e,t,n){const r=qb(Gb(e.path),n),s=bt(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Qb(e,t){const n=[],r=new Map;t=Cf({strict:!1,end:!0,sensitive:!1},t);function s(p){return r.get(p)}function i(p,m,_){const A=!_,C=Rf(p);C.aliasOf=_&&_.record;const D=Cf(t,p),M=[C];if("alias"in p){const q=typeof p.alias=="string"?[p.alias]:p.alias;for(const rt of q)M.push(Rf(bt({},C,{components:_?_.record.components:C.components,path:rt,aliasOf:_?_.record:C})))}let H,Q;for(const q of M){const{path:rt}=q;if(m&&rt[0]!=="/"){const lt=m.record.path,I=lt[lt.length-1]==="/"?"":"/";q.path=m.record.path+(rt&&I+rt)}if(H=Wb(q,m,D),_?_.alias.push(H):(Q=Q||H,Q!==H&&Q.alias.push(H),A&&p.name&&!Sf(H)&&a(p.name)),Ym(H)&&u(H),C.children){const lt=C.children;for(let I=0;I<lt.length;I++)i(lt[I],H,_&&_.children[I])}_=_||H}return Q?()=>{a(Q)}:qs}function a(p){if(Wm(p)){const m=r.get(p);m&&(r.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(a),m.alias.forEach(a))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&r.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function l(){return n}function u(p){const m=Jb(p,n);n.splice(m,0,p),p.record.name&&!Sf(p)&&r.set(p.record.name,p)}function h(p,m){let _,A={},C,D;if("name"in p&&p.name){if(_=r.get(p.name),!_)throw Zr(1,{location:p});D=_.record.name,A=bt(bf(m.params,_.keys.filter(Q=>!Q.optional).concat(_.parent?_.parent.keys.filter(Q=>Q.optional):[]).map(Q=>Q.name)),p.params&&bf(p.params,_.keys.map(Q=>Q.name))),C=_.stringify(A)}else if(p.path!=null)C=p.path,_=n.find(Q=>Q.re.test(C)),_&&(A=_.parse(C),D=_.record.name);else{if(_=m.name?r.get(m.name):n.find(Q=>Q.re.test(m.path)),!_)throw Zr(1,{location:p,currentLocation:m});D=_.record.name,A=bt({},m.params,p.params),C=_.stringify(A)}const M=[];let H=_;for(;H;)M.unshift(H.record),H=H.parent;return{name:D,path:C,params:A,matched:M,meta:Yb(M)}}e.forEach(p=>i(p));function f(){n.length=0,r.clear()}return{addRoute:i,resolve:h,removeRoute:a,clearRoutes:f,getRoutes:l,getRecordMatcher:s}}function bf(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Rf(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Xb(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Xb(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Sf(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Yb(e){return e.reduce((t,n)=>bt(t,n.meta),{})}function Cf(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function Jb(e,t){let n=0,r=t.length;for(;n!==r;){const i=n+r>>1;Xm(e,t[i])<0?r=i:n=i+1}const s=Zb(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function Zb(e){let t=e;for(;t=t.parent;)if(Ym(t)&&Xm(e,t)===0)return t}function Ym({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function t0(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Bm," "),a=i.indexOf("="),l=ai(a<0?i:i.slice(0,a)),u=a<0?null:ai(i.slice(a+1));if(l in t){let h=t[l];Xe(h)||(h=t[l]=[h]),h.push(u)}else t[l]=u}return t}function Pf(e){let t="";for(let n in e){const r=e[n];if(n=vb(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Xe(r)?r.map(i=>i&&Sl(i)):[r&&Sl(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function e0(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Xe(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const n0=Symbol(""),Vf=Symbol(""),Du=Symbol(""),Jm=Symbol(""),Pl=Symbol("");function As(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Ln(e,t,n,r,s,i=a=>a()){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,u)=>{const h=m=>{m===!1?u(Zr(4,{from:n,to:t})):m instanceof Error?u(m):Ub(m)?u(Zr(2,{from:t,to:m})):(a&&r.enterCallbacks[s]===a&&typeof m=="function"&&a.push(m),l())},f=i(()=>e.call(r&&r.instances[s],t,n,h));let p=Promise.resolve(f);e.length<3&&(p=p.then(h)),p.catch(m=>u(m))})}function qa(e,t,n,r,s=i=>i()){const i=[];for(const a of e)for(const l in a.components){let u=a.components[l];if(!(t!=="beforeRouteEnter"&&!a.instances[l]))if(Um(u)){const f=(u.__vccOpts||u)[t];f&&i.push(Ln(f,n,r,a,l,s))}else{let h=u();i.push(()=>h.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const p=lb(f)?f.default:f;a.mods[l]=f,a.components[l]=p;const _=(p.__vccOpts||p)[t];return _&&Ln(_,n,r,a,l,s)()}))}}return i}function Df(e){const t=Ge(Du),n=Ge(Jm),r=pt(()=>{const u=at(e.to);return t.resolve(u)}),s=pt(()=>{const{matched:u}=r.value,{length:h}=u,f=u[h-1],p=n.matched;if(!f||!p.length)return-1;const m=p.findIndex(Jr.bind(null,f));if(m>-1)return m;const _=xf(u[h-2]);return h>1&&xf(f)===_&&p[p.length-1].path!==_?p.findIndex(Jr.bind(null,u[h-2])):m}),i=pt(()=>s.value>-1&&a0(n.params,r.value.params)),a=pt(()=>s.value>-1&&s.value===n.matched.length-1&&Km(n.params,r.value.params));function l(u={}){if(o0(u)){const h=t[at(e.replace)?"replace":"push"](at(e.to)).catch(qs);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:pt(()=>r.value.href),isActive:i,isExactActive:a,navigate:l}}function r0(e){return e.length===1?e[0]:e}const s0=fd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Df,setup(e,{slots:t}){const n=wr(Df(e)),{options:r}=Ge(Du),s=pt(()=>({[Of(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Of(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&r0(t.default(n));return e.custom?i:Bd("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),i0=s0;function o0(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function a0(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Xe(s)||s.length!==r.length||r.some((i,a)=>i!==s[a]))return!1}return!0}function xf(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Of=(e,t,n)=>e??t??n,l0=fd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Ge(Pl),s=pt(()=>e.route||r.value),i=Ge(Vf,0),a=pt(()=>{let h=at(i);const{matched:f}=s.value;let p;for(;(p=f[h])&&!p.components;)h++;return h}),l=pt(()=>s.value.matched[a.value]);jr(Vf,pt(()=>a.value+1)),jr(n0,l),jr(Pl,s);const u=Ot();return an(()=>[u.value,l.value,e.name],([h,f,p],[m,_,A])=>{f&&(f.instances[p]=h,_&&_!==f&&h&&h===m&&(f.leaveGuards.size||(f.leaveGuards=_.leaveGuards),f.updateGuards.size||(f.updateGuards=_.updateGuards))),h&&f&&(!_||!Jr(f,_)||!m)&&(f.enterCallbacks[p]||[]).forEach(C=>C(h))},{flush:"post"}),()=>{const h=s.value,f=e.name,p=l.value,m=p&&p.components[f];if(!m)return Nf(n.default,{Component:m,route:h});const _=p.props[f],A=_?_===!0?h.params:typeof _=="function"?_(h):_:null,D=Bd(m,bt({},A,t,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(p.instances[f]=null)},ref:u}));return Nf(n.default,{Component:D,route:h})||D}}});function Nf(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const u0=l0;function c0(e){const t=Qb(e.routes,e),n=e.parseQuery||t0,r=e.stringifyQuery||Pf,s=e.history,i=As(),a=As(),l=As(),u=e_(On);let h=On;kr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=ja.bind(null,L=>""+L),p=ja.bind(null,Tb),m=ja.bind(null,ai);function _(L,k){let R,O;return Wm(L)?(R=t.getRecordMatcher(L),O=k):O=L,t.addRoute(O,R)}function A(L){const k=t.getRecordMatcher(L);k&&t.removeRoute(k)}function C(){return t.getRoutes().map(L=>L.record)}function D(L){return!!t.getRecordMatcher(L)}function M(L,k){if(k=bt({},k||u.value),typeof L=="string"){const V=Ba(n,L,k.path),U=t.resolve({path:V.path},k),B=s.createHref(V.fullPath);return bt(V,U,{params:m(U.params),hash:ai(V.hash),redirectedFrom:void 0,href:B})}let R;if(L.path!=null)R=bt({},L,{path:Ba(n,L.path,k.path).path});else{const V=bt({},L.params);for(const U in V)V[U]==null&&delete V[U];R=bt({},L,{params:p(V)}),k.params=p(k.params)}const O=t.resolve(R,k),et=L.hash||"";O.params=f(m(O.params));const y=Ab(r,bt({},L,{hash:yb(et),path:O.path})),T=s.createHref(y);return bt({fullPath:y,hash:et,query:r===Pf?e0(L.query):L.query||{}},O,{redirectedFrom:void 0,href:T})}function H(L){return typeof L=="string"?Ba(n,L,u.value.path):bt({},L)}function Q(L,k){if(h!==L)return Zr(8,{from:k,to:L})}function q(L){return I(L)}function rt(L){return q(bt(H(L),{replace:!0}))}function lt(L){const k=L.matched[L.matched.length-1];if(k&&k.redirect){const{redirect:R}=k;let O=typeof R=="function"?R(L):R;return typeof O=="string"&&(O=O.includes("?")||O.includes("#")?O=H(O):{path:O},O.params={}),bt({query:L.query,hash:L.hash,params:O.path!=null?{}:L.params},O)}}function I(L,k){const R=h=M(L),O=u.value,et=L.state,y=L.force,T=L.replace===!0,V=lt(R);if(V)return I(bt(H(V),{state:typeof V=="object"?bt({},et,V.state):et,force:y,replace:T}),k||R);const U=R;U.redirectedFrom=k;let B;return!y&&bb(r,O,R)&&(B=Zr(16,{to:U,from:O}),Ht(O,O,!0,!1)),(B?Promise.resolve(B):S(U,O)).catch($=>gn($)?gn($,2)?$:Tt($):gt($,U,O)).then($=>{if($){if(gn($,2))return I(bt({replace:T},H($.to),{state:typeof $.to=="object"?bt({},et,$.to.state):et,force:y}),k||U)}else $=P(U,O,!0,T,et);return b(U,O,$),$})}function v(L,k){const R=Q(L,k);return R?Promise.reject(R):Promise.resolve()}function w(L){const k=xe.values().next().value;return k&&typeof k.runWithContext=="function"?k.runWithContext(L):L()}function S(L,k){let R;const[O,et,y]=h0(L,k);R=qa(O.reverse(),"beforeRouteLeave",L,k);for(const V of O)V.leaveGuards.forEach(U=>{R.push(Ln(U,L,k))});const T=v.bind(null,L,k);return R.push(T),se(R).then(()=>{R=[];for(const V of i.list())R.push(Ln(V,L,k));return R.push(T),se(R)}).then(()=>{R=qa(et,"beforeRouteUpdate",L,k);for(const V of et)V.updateGuards.forEach(U=>{R.push(Ln(U,L,k))});return R.push(T),se(R)}).then(()=>{R=[];for(const V of y)if(V.beforeEnter)if(Xe(V.beforeEnter))for(const U of V.beforeEnter)R.push(Ln(U,L,k));else R.push(Ln(V.beforeEnter,L,k));return R.push(T),se(R)}).then(()=>(L.matched.forEach(V=>V.enterCallbacks={}),R=qa(y,"beforeRouteEnter",L,k,w),R.push(T),se(R))).then(()=>{R=[];for(const V of a.list())R.push(Ln(V,L,k));return R.push(T),se(R)}).catch(V=>gn(V,8)?V:Promise.reject(V))}function b(L,k,R){l.list().forEach(O=>w(()=>O(L,k,R)))}function P(L,k,R,O,et){const y=Q(L,k);if(y)return y;const T=k===On,V=kr?history.state:{};R&&(O||T?s.replace(L.fullPath,bt({scroll:T&&V&&V.scroll},et)):s.push(L.fullPath,et)),u.value=L,Ht(L,k,R,T),Tt()}let E;function Mt(){E||(E=s.listen((L,k,R)=>{if(!Ye.listening)return;const O=M(L),et=lt(O);if(et){I(bt(et,{replace:!0,force:!0}),O).catch(qs);return}h=O;const y=u.value;kr&&Ob(Ef(y.fullPath,R.delta),ra()),S(O,y).catch(T=>gn(T,12)?T:gn(T,2)?(I(bt(H(T.to),{force:!0}),O).then(V=>{gn(V,20)&&!R.delta&&R.type===li.pop&&s.go(-1,!1)}).catch(qs),Promise.reject()):(R.delta&&s.go(-R.delta,!1),gt(T,O,y))).then(T=>{T=T||P(O,y,!1),T&&(R.delta&&!gn(T,8)?s.go(-R.delta,!1):R.type===li.pop&&gn(T,20)&&s.go(-1,!1)),b(O,y,T)}).catch(qs)}))}let Zt=As(),qt=As(),Et;function gt(L,k,R){Tt(L);const O=qt.list();return O.length?O.forEach(et=>et(L,k,R)):console.error(L),Promise.reject(L)}function re(){return Et&&u.value!==On?Promise.resolve():new Promise((L,k)=>{Zt.add([L,k])})}function Tt(L){return Et||(Et=!L,Mt(),Zt.list().forEach(([k,R])=>L?R(L):k()),Zt.reset()),L}function Ht(L,k,R,O){const{scrollBehavior:et}=e;if(!kr||!et)return Promise.resolve();const y=!R&&Nb(Ef(L.fullPath,0))||(O||!R)&&history.state&&history.state.scroll||null;return Ws().then(()=>et(L,k,y)).then(T=>T&&xb(T)).catch(T=>gt(T,L,k))}const Dt=L=>s.go(L);let He;const xe=new Set,Ye={currentRoute:u,listening:!0,addRoute:_,removeRoute:A,clearRoutes:t.clearRoutes,hasRoute:D,getRoutes:C,resolve:M,options:e,push:q,replace:rt,go:Dt,back:()=>Dt(-1),forward:()=>Dt(1),beforeEach:i.add,beforeResolve:a.add,afterEach:l.add,onError:qt.add,isReady:re,install(L){const k=this;L.component("RouterLink",i0),L.component("RouterView",u0),L.config.globalProperties.$router=k,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>at(u)}),kr&&!He&&u.value===On&&(He=!0,q(s.location).catch(et=>{}));const R={};for(const et in On)Object.defineProperty(R,et,{get:()=>u.value[et],enumerable:!0});L.provide(Du,k),L.provide(Jm,sd(R)),L.provide(Pl,u);const O=L.unmount;xe.add(L),L.unmount=function(){xe.delete(L),xe.size<1&&(h=On,E&&E(),E=null,u.value=On,He=!1,Et=!1),O()}}};function se(L){return L.reduce((k,R)=>k.then(()=>w(R)),Promise.resolve())}return Ye}function h0(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let a=0;a<i;a++){const l=t.matched[a];l&&(e.matched.find(h=>Jr(h,l))?r.push(l):n.push(l));const u=e.matched[a];u&&(t.matched.find(h=>Jr(h,u))||s.push(u))}return[n,r,s]}const f0=c0({history:Fb("/Hu-ClientDataMaintenance/"),routes:[]}),Zm=Fy(ab);Zm.use(f0);Zm.mount("#app");
